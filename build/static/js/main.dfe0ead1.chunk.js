(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{180:function(e,t,n){e.exports=n(478)},185:function(e,t,n){},4:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return de}),n.d(t,"b",function(){return Oe}),n.d(t,"c",function(){return q}),n.d(t,"d",function(){return re}),n.d(t,"e",function(){return vt}),n.d(t,"f",function(){return ae}),n.d(t,"g",function(){return mt}),n.d(t,"h",function(){return V}),n.d(t,"i",function(){return ue}),n.d(t,"j",function(){return z}),n.d(t,"k",function(){return $}),n.d(t,"l",function(){return G}),n.d(t,"m",function(){return ce}),n.d(t,"n",function(){return ve});var r=n(0),o=n(9),a=n.n(o),i=n(2),s=n(10),c=n(64),u=n.n(c),l=n(106),d=n(41),f=n.n(d),v=n(107),h=n.n(v),y=n(172),p=n.n(y),m=void 0,g=void 0;function k(){m=0,g=function(){return""+m++}}k();var b={create:function(e){if(null==e)return g();if("string"===typeof e)return e;throw new Error("Keys must be strings, but you passed: "+e)},setGenerator:function(e){g=e},resetGenerator:k},A="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},x=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),w=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},E=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},S=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t},B=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){o=!0,a=c}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),P=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};function j(e,t){for(var n=M(e,t),r=0;r<n;r++){var o=e.get(r),a=t.get(r);if(o<a)return-1;if(o>a)return 1}return e.size===t.size?0:null}function _(e){if(null==e)return null;if(r.List.isList(e))return e;if(Array.isArray(e))return Object(r.List)(e);throw new Error("Paths can only be created from arrays or lists, but you passed: "+e)}function F(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:M(e,t);return[e.slice(0,n),t.slice(0,n)]}function C(e){return R(e,0-(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.size-1)}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.size-1,r=e.get(n)+t;return e.set(n,r)}function D(e,t){var n=F(e,t),r=B(n,2),o=r[0],a=r[1];return e.size<t.size&&0===j(o,a)}function L(e,t){return e.equals(t)}function I(e,t){var n=e.size-1,r=F(e,t,n),o=B(r,2),a=o[0],i=o[1],s=e.get(n),c=t.get(n);return L(a,i)&&s<c}function M(e,t){return Math.min(e.size,t.size)}var z={compare:j,create:_,crop:F,decrement:C,getAncestors:function(e){return Object(r.List)().withMutations(function(t){for(var n=0;n<e.size;n++)t.push(e.slice(0,n))})},increment:R,isAbove:D,isAfter:function(e,t){var n=F(e,t),r=B(n,2);return 1===j(r[0],r[1])},isBefore:function(e,t){var n=F(e,t),r=B(n,2);return-1===j(r[0],r[1])},isEqual:L,isOlder:function(e,t){var n=e.size-1,r=F(e,t,n),o=B(r,2),a=o[0],i=o[1],s=e.get(n),c=t.get(n);return L(a,i)&&s>c},isPath:function(e){return(r.List.isList(e)||Array.isArray(e))&&e.every(function(e){return"number"===typeof e})},isSibling:function(e,t){if(e.size!==t.size)return!1;var n=e.butLast(),r=t.butLast();return n.equals(r)},isYounger:I,lift:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.slice(0,-1*t)},drop:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.slice(t)},max:function(e,t){return Math.max(e.size,t.size)},min:M,relate:function(e,t){for(var n=[],r=0;r<e.size&&r<t.size;r++){var o=e.get(r);if(o!==t.get(r))break;n.push(o)}return _(n)},transform:function(e,t){var n=t.type,o=t.position,a=t.path;if("add_mark"===n||"insert_text"===n||"remove_mark"===n||"remove_text"===n||"set_mark"===n||"set_node"===n||"set_selection"===n||"set_value"===n||0===e.size)return Object(r.List)([e]);var i=a.size-1,s=L(a,e),c=I(a,e),u=D(a,e);if("insert_node"===n&&(s||c||u)&&(e=R(e,1,i)),"remove_node"===n&&(c?e=C(e,1,i):(s||u)&&(e=[])),"merge_node"===n&&(s||c?e=C(e,1,i):u&&(e=R(e=C(e,1,i),o,i+1))),"split_node"===n&&(s?e=[e,R(e)]:c?e=R(e,1,i):u&&e.get(i+1)>=o&&(e=C(e=R(e,1,i),o,i+1))),"move_node"===n){var l=t.newPath;if(L(a,l))return Object(r.List)([e]);u||s?e=I(a,l)&&a.size<l.size?C(l,1,M(l,a)-1).concat(e.slice(a.size)):l.concat(e.slice(a.size)):(c&&(e=C(e,1,i)),(I(l,e)||L(l,e)||D(l,e))&&(e=R(e,1,l.size-1)))}var d=Array.isArray(e)?e:[e];return Object(r.List)(d)}},J={key:void 0,offset:void 0,path:void 0},K=function(e){function t(){return O(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,e),x(t,[{key:"isAfterPoint",value:function(e){return!this.isUnset&&(this.key===e.key&&this.offset>e.offset||1===z.compare(this.path,e.path))}},{key:"isAfterRange",value:function(e){return!this.isUnset&&this.isAfterPoint(e.end)}},{key:"isAtEndOfRange",value:function(e){return!this.isUnset&&this.equals(e.end)}},{key:"isAtStartOfRange",value:function(e){return!this.isUnset&&this.equals(e.start)}},{key:"isBeforePoint",value:function(e){return!this.isUnset&&(this.key===e.key&&this.offset<e.offset||-1===z.compare(this.path,e.path))}},{key:"isBeforeRange",value:function(e){return!this.isUnset&&this.isBeforePoint(e.start)}},{key:"isInRange",value:function(e){return!this.isUnset&&(this.equals(e.start)||this.equals(e.end)||this.isAfterPoint(e.start)&&this.isBeforePoint(e.end))}},{key:"isAtEndOfNode",value:function(e){if(this.isUnset)return!1;var t=e.getLastText();return this.key===t.key&&this.offset===t.text.length}},{key:"isAtStartOfNode",value:function(e){if(this.isUnset)return!1;if(0!==this.offset)return!1;var t=e.getFirstText();return this.key===t.key}},{key:"isInNode",value:function(e){return!this.isUnset&&("text"===e.object&&e.key===this.key||!!e.hasNode(this.key))}},{key:"moveBackward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return 0===e?this:e<0?this.moveForward(-e):this.setOffset(this.offset-e)}},{key:"moveForward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return 0===e?this:e<0?this.moveBackward(-e):this.setOffset(this.offset+e)}},{key:"moveTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.key;return"number"===typeof e?(t=e,e=this.path):"string"===typeof e?e=(n=e)===this.key?this.path:null:n=e.equals(this.path)?this.key:null,this.merge({key:n,path:e,offset:t})}},{key:"moveToStartOfNode",value:function(e){var t=e.getFirstText();return this.moveTo(t.key,0)}},{key:"moveToEndOfNode",value:function(e){var t=e.getLastText();return this.moveTo(t.key,t.text.length)}},{key:"normalize",value:function(e){if(null==this.key&&null==this.path)return this.setOffset(null);var n=this.key,r=this.offset,o=this.path,a=o&&e.getNode(o);if(!a&&(a=e.getNode(n)))return this.merge({path:e.getPath(n)});if(!a){Object(i.a)(!1,"A point's `path` or `key` invalid and was reset!");var s=e.getFirstText();return s?this.merge({key:s.key,offset:0,path:e.getPath(s.key)}):t.create()}if("text"!==a.object){Object(i.a)(!1,"A point should not reference a non-text node!");var c=a.getTextAtOffset(r),u=a.getOffset(c.key);return this.merge({offset:r-u,key:c.key,path:e.getPath(c.key)})}a&&o&&n&&n!==a.key&&Object(i.a)(!1,"A point's `key` did not match its `path`!");var l=this.merge({key:a.key,path:null==o?e.getPath(a.key):o,offset:null==r?0:Math.min(r,a.text.length)});if(l.offset===a.text.length){var d=e.getClosestBlock(l.path).getNextText();d&&(l=l.merge({key:d.key,path:e.getPath(d.key),offset:0}))}return l}},{key:"setKey",value:function(e){return null!=e&&(e=b.create(e)),this.set("key",e)}},{key:"setOffset",value:function(e){return this.set("offset",e)}},{key:"setPath",value:function(e){return null!=e&&(e=z.create(e)),this.set("path",e)}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={object:this.object,key:this.key,offset:this.offset,path:this.path&&this.path.toArray()};return e.preserveKeys||delete t.key,t}},{key:"unset",value:function(){return this.merge({key:null,offset:null,path:null})}},{key:"isSet",get:function(){return null!=this.key&&null!=this.offset&&null!=this.path}},{key:"isUnset",get:function(){return!this.isSet}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isPoint(e))return e;if(a()(e))return t.fromJSON(e);throw new Error("`Point.create` only accepts objects or points, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isPoint(e))return{key:e.key,offset:e.offset,path:e.path};if(a()(e)){var n={};return"key"in e&&(n.key=e.key),"offset"in e&&(n.offset=e.offset),"path"in e&&(n.path=z.create(e.path)),"path"in e&&!("key"in e)&&(n.key=null),"key"in e&&!("path"in e)&&(n.path=null),n}throw new Error("`Point.createProperties` only accepts objects or points, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var n=e.key,r=void 0===n?null:n,o=e.offset,a=void 0===o?null:o,i=e.path,s=void 0===i?null:i;return new t({key:r,offset:a,path:z.create(s)})}}]),t}(Object(r.Record)(J)),q=function(){function e(){O(this,e)}return x(e,null,[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r.Map.isMap(t))return t;if(a()(t))return e.fromJSON(t);throw new Error("`Data.create` only accepts objects or maps, but you passed it: "+t)}},{key:"fromJSON",value:function(e){return new r.Map(e)}}]),e}();q.fromJS=q.fromJSON;var U={data:void 0,type:void 0},V=function(e){function t(){return O(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,e),x(t,[{key:"toJSON",value:function(){return{object:this.object,type:this.type,data:this.data.toJSON()}}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isMark(e))return e;if("string"===typeof e&&(e={type:e}),a()(e))return t.fromJSON(e);throw new Error("`Mark.create` only accepts objects, strings or marks, but you passed it: "+e)}},{key:"createSet",value:function(e){if(r.Set.isSet(e)||Array.isArray(e))return new r.Set(e.map(t.create));if(null==e)return Object(r.Set)();throw new Error("`Mark.createSet` only accepts sets, arrays or null, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isMark(e))return{data:e.data,type:e.type};if("string"===typeof e)return{type:e};if(a()(e)){var n={};return"type"in e&&(n.type=e.type),"data"in e&&(n.data=q.create(e.data)),n}throw new Error("`Mark.createProperties` only accepts objects, strings or marks, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var n=e.data,o=void 0===n?{}:n,a=e.type;if("string"!==typeof a)throw new Error("`Mark.fromJS` requires a `type` string.");return new t({type:a,data:new r.Map(o)})}},{key:"isMarkSet",value:function(e){return r.Set.isSet(e)&&e.every(function(e){return t.isMark(e)})}}]),t}(Object(r.Record)(U)),W={type:void 0,data:void 0,anchor:void 0,focus:void 0},H=function(e){function t(){return O(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,e),x(t,[{key:"setProperties",value:function(e){return e=t.createProperties(e),this.merge(e)}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{object:this.object,type:this.type,data:this.data.toJSON(),anchor:this.anchor.toJSON(e),focus:this.focus.toJSON(e)}}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isDecoration(e))return e;if($.isRange(e))return t.fromJSON($.createProperties(e));if(a()(e))return t.fromJSON(e);throw new Error("`Decoration.create` only accepts objects or decorations, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(r.List.isList(e)||Array.isArray(e))return new r.List(e.map(t.create));throw new Error("`Decoration.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isDecoration(e))return{type:e.type,data:e.data,anchor:K.createProperties(e.anchor),focus:K.createProperties(e.focus),mark:V.create(e.mark)};if(a()(e)){var n={};return"type"in e&&(n.type=e.type),"data"in e&&(n.data=q.create(e.data)),"anchor"in e&&(n.anchor=K.create(e.anchor)),"focus"in e&&(n.focus=K.create(e.focus)),n}throw new Error("`Decoration.createProperties` only accepts objects or decorations, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var n=e.anchor,r=e.focus,o=e.type,a=e.data;if(e.mark&&!o&&(Object(i.a)(!1,"As of slate@0.47 the `decoration.mark` property has been changed to `decoration.type` and `decoration.data` directly."),o=e.mark.type,a=e.mark.data),!o)throw new Error("Decorations must be created with a `type`, but you passed: "+JSON.stringify(e));return new t({type:o,data:q.create(a||{}),anchor:K.fromJSON(n||{}),focus:K.fromJSON(r||{})})}}]),t}(Object(r.Record)(W)),Y={anchor:void 0,focus:void 0,isFocused:void 0,marks:void 0},G=function(e){function t(){return O(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,e),x(t,[{key:"setIsFocused",value:function(e){return this.set("isFocused",e)}},{key:"setMarks",value:function(e){return this.set("marks",e)}},{key:"setProperties",value:function(e){var n=e=t.createProperties(e),r=n.anchor,o=n.focus,a=E(n,["anchor","focus"]);return r&&(a.anchor=K.create(r)),o&&(a.focus=K.create(o)),this.merge(a)}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{object:this.object,anchor:this.anchor.toJSON(e),focus:this.focus.toJSON(e),isFocused:this.isFocused,marks:null==this.marks?null:this.marks.toArray().map(function(e){return e.toJSON()})}}},{key:"isBlurred",get:function(){return!this.isFocused}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isSelection(e))return e;if($.isRange(e))return t.fromJSON($.createProperties(e));if(a()(e))return t.fromJSON(e);throw new Error("`Selection.create` only accepts objects, ranges or selections, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isSelection(e))return{anchor:K.createProperties(e.anchor),focus:K.createProperties(e.focus),isFocused:e.isFocused,marks:e.marks};if($.isRange(e))return{anchor:K.createProperties(e.anchor),focus:K.createProperties(e.focus)};if(a()(e)){var n={};return"anchor"in e&&(n.anchor=K.create(e.anchor)),"focus"in e&&(n.focus=K.create(e.focus)),"isFocused"in e&&(n.isFocused=e.isFocused),"marks"in e&&(n.marks=null==e.marks?null:V.createSet(e.marks)),n}throw new Error("`Selection.createProperties` only accepts objects, ranges or selections, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var n=e.anchor,o=e.focus,a=e.isFocused,i=void 0!==a&&a,s=e.marks,c=void 0===s?null:s;return new t({anchor:K.fromJSON(n||{}),focus:K.fromJSON(o||{}),isFocused:i,marks:null==c?null:new r.Set(c.map(V.fromJSON))})}}]),t}(Object(r.Record)(Y)),X={annotation:"@@__SLATE_ANNOTATION__@@",block:"@@__SLATE_BLOCK__@@",change:"@@__SLATE_CHANGE__@@",decoration:"@@__SLATE_DECORATION__@@",document:"@@__SLATE_DOCUMENT__@@",editor:"@@__SLATE_EDITOR__@@",inline:"@@__SLATE_INLINE__@@",leaf:"@@__SLATE_LEAF__@@",mark:"@@__SLATE_MARK__@@",operation:"@@__SLATE_OPERATION__@@",point:"@@__SLATE_POINT__@@",range:"@@__SLATE_RANGE__@@",selection:"@@__SLATE_SELECTION__@@",text:"@@__SLATE_TEXT__@@",value:"@@__SLATE_VALUE__@@"};function Z(e,t){return!(!t||!t[X[e]])}var Q={anchor:void 0,focus:void 0},$=function(e){function t(){return O(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,e),x(t,[{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{object:this.object,anchor:this.anchor.toJSON(e),focus:this.focus.toJSON(e)}}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isRange(e))return"range"===e.object?e:t.fromJSON(t.createProperties(e));if(a()(e))return t.fromJSON(e);throw new Error("`Range.create` only accepts objects or ranges, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(r.List.isList(e)||Array.isArray(e))return new r.List(e.map(t.create));throw new Error("`Range.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isRange(e))return{anchor:K.createProperties(e.anchor),focus:K.createProperties(e.focus)};if(a()(e)){var n={};return"anchor"in e&&(n.anchor=K.create(e.anchor)),"focus"in e&&(n.focus=K.create(e.focus)),n}throw new Error("`Range.createProperties` only accepts objects, annotations, decorations, ranges or selections, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var n=e.anchor,r=e.focus;return new t({anchor:K.fromJSON(n||{}),focus:K.fromJSON(r||{})})}},{key:"isRange",value:function(e){return Z("range",e)||H.isDecoration(e)||G.isSelection(e)}}]),t}(Object(r.Record)(Q)),ee={key:void 0,type:void 0,data:void 0,anchor:void 0,focus:void 0},te=function(e){function t(){return O(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,e),x(t,[{key:"setProperties",value:function(e){return e=t.createProperties(e),this.merge(e)}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{object:this.object,key:this.key,type:this.type,data:this.data.toJSON(),anchor:this.anchor.toJSON(e),focus:this.focus.toJSON(e)}}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isAnnotation(e))return e;if($.isRange(e))return t.fromJSON($.createProperties(e));if(a()(e))return t.fromJSON(e);throw new Error("`Annotation.create` only accepts objects or annotations, but you passed it: "+e)}},{key:"createMap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(r.Map.isMap(e))return e;if(a()(e)){var n={};for(var o in e){var i=e[o],s=t.create(i);n[o]=s}return Object(r.Map)(n)}throw new Error("`Annotation.createMap` only accepts arrays or lists, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isAnnotation(e))return{key:e.key,type:e.type,data:e.data,anchor:K.createProperties(e.anchor),focus:K.createProperties(e.focus)};if(a()(e)){var n={};return"key"in e&&(n.key=e.key),"type"in e&&(n.type=e.type),"data"in e&&(n.data=q.create(e.data)),"anchor"in e&&(n.anchor=K.create(e.anchor)),"focus"in e&&(n.focus=K.create(e.focus)),n}throw new Error("`Annotation.createProperties` only accepts objects or annotations, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var n=e.key,r=e.type,o=e.data,a=e.anchor,i=e.focus;if(!n)throw new Error("Annotations must be created with a `key`, but you passed: "+JSON.stringify(e));if(!r)throw new Error("Annotations must be created with a `type`, but you passed: "+JSON.stringify(e));return new t({key:n,type:r,data:q.create(o||{}),anchor:K.fromJSON(a||{}),focus:K.fromJSON(i||{})})}}]),t}(Object(r.Record)(ee)),ne={data:void 0,key:void 0,nodes:void 0},re=function(e){function t(){return O(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,e),x(t,[{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={object:this.object,data:this.data.toJSON(),nodes:this.nodes.toArray().map(function(t){return t.toJSON(e)})};return e.preserveKeys&&(t.key=this.key),t}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isDocument(e))return e;if((r.List.isList(e)||Array.isArray(e))&&(e={nodes:e}),a()(e))return t.fromJSON(e);throw new Error("`Document.create` only accepts objects, arrays, lists or documents, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(t.isDocument(e))return e;var n=e.data,o=void 0===n?{}:n,a=e.key,i=void 0===a?b.create():a,s=e.nodes,c=void 0===s?[]:s;return new t({key:i,data:new r.Map(o),nodes:ue.createList(c)})}}]),t}(Object(r.Record)(ne)),oe={data:void 0,key:void 0,nodes:void 0,type:void 0},ae=function(e){function t(){return O(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,e),x(t,[{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={object:this.object,type:this.type,data:this.data.toJSON(),nodes:this.nodes.toArray().map(function(t){return t.toJSON(e)})};return e.preserveKeys&&(t.key=this.key),t}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isInline(e))return e;if("string"===typeof e&&(e={type:e}),a()(e))return t.fromJSON(e);throw new Error("`Inline.create` only accepts objects, strings or inlines, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(r.List.isList(e)||Array.isArray(e))return new r.List(e.map(t.create));throw new Error("`Inline.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(t.isInline(e))return e;var n=e.data,o=void 0===n?{}:n,a=e.key,i=void 0===a?b.create():a,s=e.nodes,c=void 0===s?[]:s,u=e.type;if("string"!==typeof u)throw new Error("`Inline.fromJS` requires a `type` string.");return new t({key:i,type:u,data:new r.Map(o),nodes:ue.createList(c)})}},{key:"isInlineList",value:function(e){return r.List.isList(e)&&e.every(function(e){return t.isInline(e)})}}]),t}(Object(r.Record)(oe)),ie={key:void 0,marks:void 0,text:void 0},se=Object(r.Record)({text:void 0,marks:void 0,annotations:void 0,decorations:void 0}),ce=function(e){function t(){return O(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,e),x(t,[{key:"addMark",value:function(e){e=V.create(e);var t=this.marks.add(e);return this.set("marks",t)}},{key:"addMarks",value:function(e){return e=V.createSet(e),this.set("marks",this.marks.union(e))}},{key:"getLeaves",value:function(e,t){var n=[{text:this.text,marks:this.marks,annotations:[],decorations:[]}],o=function(e,t){return[{text:e.text.slice(0,t),marks:e.marks,annotations:[].concat(P(e.annotations)),decorations:[].concat(P(e.decorations))},{text:e.text.slice(t),marks:e.marks,annotations:[].concat(P(e.annotations)),decorations:[].concat(P(e.decorations))}]},a=function(r){var a="annotations"===r?e.values():t,i=!0,s=!1,c=void 0;try{for(var u,l=a[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var d=u.value,f=d.start,v=d.end,h=[],y=0,p=!0,m=!1,g=void 0;try{for(var k,b=n[Symbol.iterator]();!(p=(k=b.next()).done);p=!0){var A=k.value,O=A.text.length,x=y;if(y+=O,f.offset>x+O||v.offset<=x)h.push(A);else if(f.offset<=x&&v.offset>=x+O)A[r].push(d),h.push(A);else{var w=A,T=void 0,N=void 0;if(v.offset<x+O){var E=o(w,v.offset-x),S=B(E,2);w=S[0],N=S[1]}if(f.offset>x){var P=o(w,f.offset-x),j=B(P,2);T=j[0],w=j[1]}w[r].push(d),T&&h.push(T),h.push(w),N&&h.push(N)}}}catch(_){m=!0,g=_}finally{try{!p&&b.return&&b.return()}finally{if(m)throw g}}n=h}}catch(_){s=!0,c=_}finally{try{!i&&l.return&&l.return()}finally{if(s)throw c}}};return a("annotations"),a("decorations"),n=n.map(function(e){return new se(T({},e,{annotations:Object(r.List)(e.annotations),decorations:Object(r.List)(e.decorations)}))}),Object(r.List)(n)}},{key:"insertText",value:function(e,t){var n=this.text,r=n.slice(0,e)+t+n.slice(e);return this.set("text",r)}},{key:"removeMark",value:function(e){e=V.create(e);var t=this.marks.remove(e);return this.set("marks",t)}},{key:"removeText",value:function(e,t){var n=this.text,r=n.slice(0,e)+n.slice(e+t);return this.set("text",r)}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={object:this.object,text:this.text,marks:this.marks.toArray().map(function(e){return e.toJSON()})};return e.preserveKeys&&(t.key=this.key),t}},{key:"setMark",value:function(e,t){var n=this.marks,r=V.create(e),o=r.merge(t),a=n.remove(r).add(o);return this.set("marks",a)}},{key:"splitText",value:function(e){var t=this.text;return[this.set("text",t.slice(0,e)),this.set("text",t.slice(e)).regenerateKey()]}},{key:"mergeText",value:function(e){var t=this.text+e.text;return this.set("text",t)}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t.isText(e))return e;if("string"===typeof e&&(e={text:e}),a()(e))return t.fromJSON(e);throw new Error("`Text.create` only accepts objects, arrays, strings or texts, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(r.List.isList(e)||Array.isArray(e))return new r.List(e.map(t.create));throw new Error("`Text.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(t.isText(e))return e;Object(s.a)(null==e.leaves,"As of slate@0.46, the `leaves` property of text nodes has been removed! Each individual leaf should be created as a text node instead.");var n=e.text,r=void 0===n?"":n,o=e.marks,a=void 0===o?[]:o,i=e.key;return new t({key:void 0===i?b.create():i,text:r,marks:V.createSet(a)})}},{key:"isTextList",value:function(e){return r.List.isList(e)&&e.every(function(e){return t.isText(e)})}}]),t}(Object(r.Record)(ie)),ue=function(){function e(){O(this,e)}return x(e,null,[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.isNode(t))return t;if(a()(t)){var n=t.object;switch(!n&&t.kind&&(Object(i.a)(!1,"As of slate@0.32.0, the `kind` property of Slate objects has been renamed to `object`."),n=t.kind),n){case"block":return de.create(t);case"document":return re.create(t);case"inline":return ae.create(t);case"text":return ce.create(t);default:throw new Error("`Node.create` requires a `object` string.")}}throw new Error("`Node.create` only accepts objects or nodes but you passed it: "+t)}},{key:"createList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(r.List.isList(t)||Array.isArray(t)){var n=[];return t.forEach(function(t){if(t&&"text"===t.object&&t.leaves&&Array.isArray(t.leaves)){Object(i.a)(!1,"As of slate@0.46, the `leaves` property of Text nodes has been removed. Instead, each text node contains a string of text and a unique set of marks and leaves are unnecessary.");var r=ce.createList(t.leaves).toArray();n=n.concat(r)}else{var o=e.create(t);n.push(o)}}),Object(r.List)(n)}throw new Error("`Node.createList` only accepts lists or arrays, but you passed it: "+t)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(de.isBlock(e)||ae.isInline(e))return{data:e.data,type:e.type};if("string"===typeof e)return{type:e};if(a()(e)){var t={};return"type"in e&&(t.type=e.type),"data"in e&&(t.data=q.create(e.data)),t}throw new Error("`Node.createProperties` only accepts objects, strings, blocks or inlines, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var t=e.object;switch(!t&&e.kind&&(Object(i.a)(!1,"As of slate@0.32.0, the `kind` property of Slate objects has been renamed to `object`."),t=e.kind),t){case"block":return de.fromJSON(e);case"document":return re.fromJSON(e);case"inline":return ae.fromJSON(e);case"text":return ce.fromJSON(e);default:throw new Error("`Node.fromJSON` requires an `object` of either 'block', 'document', 'inline' or 'text', but you passed: "+e)}}},{key:"isNode",value:function(e){return de.isBlock(e)||re.isDocument(e)||ae.isInline(e)||ce.isText(e)}},{key:"isNodeList",value:function(t){return r.List.isList(t)&&t.every(function(t){return e.isNode(t)})}}]),e}(),le={data:void 0,key:void 0,nodes:void 0,type:void 0},de=function(e){function t(){return O(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,e),x(t,[{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={object:this.object,type:this.type,data:this.data.toJSON(),nodes:this.nodes.toArray().map(function(t){return t.toJSON(e)})};return e.preserveKeys&&(t.key=this.key),t}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isBlock(e))return e;if("string"===typeof e&&(e={type:e}),a()(e))return t.fromJSON(e);throw new Error("`Block.create` only accepts objects, strings or blocks, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(r.List.isList(e)||Array.isArray(e))return new r.List(e.map(t.create));throw new Error("`Block.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(t.isBlock(e))return e;var n=e.data,o=void 0===n?{}:n,a=e.key,i=void 0===a?b.create():a,s=e.nodes,c=void 0===s?[]:s,u=e.type;if("string"!==typeof u)throw new Error("`Block.fromJSON` requires a `type` string.");return new t({key:i,type:u,data:Object(r.Map)(o),nodes:ue.createList(c)})}},{key:"isBlockList",value:function(e){return r.List.isList(e)&&e.every(function(e){return t.isBlock(e)})}}]),t}(Object(r.Record)(le)),fe={annotations:void 0,data:void 0,document:void 0,selection:void 0},ve=function(e){function t(){return O(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,e),x(t,[{key:"addAnnotation",value:function(e){e=te.create(e);var t=this,n=t.annotations,r=e.key;return n=n.set(r,e),t=t.set("annotations",n)}},{key:"addMark",value:function(e,t){t=V.create(t);var n=this,r=n.document;return r=r.addMark(e,t),n=n.set("document",r)}},{key:"insertNode",value:function(e,t){var n=this,r=n.document;return r=r.insertNode(e,t),n=(n=n.set("document",r)).mapRanges(function(e){return e.updatePoints(function(e){return e.setPath(null)})})}},{key:"insertText",value:function(e,t,n){var r=this,o=r.document,a=o.assertNode(e);return o=o.insertText(e,t,n),a=o.assertNode(e),r=(r=r.set("document",o)).mapPoints(function(e){return e.key===a.key&&e.offset>=t?e.setOffset(e.offset+n.length):e})}},{key:"mergeNode",value:function(e){var t=this,n=t.document,r=n.mergeNode(e);e=n.resolvePath(e);var o=z.decrement(e),a=n.getNode(o),i=n.getNode(e);return t=(t=t.set("document",r)).mapRanges(function(e){if("text"===i.object){var t=a.text.length;e.anchor.key===i.key&&(e=e.moveAnchorTo(a.key,t+e.anchor.offset)),e.focus.key===i.key&&(e=e.moveFocusTo(a.key,t+e.focus.offset))}return e=e.updatePoints(function(e){return e.setPath(null)})})}},{key:"moveNode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this,o=r.document;return z.isEqual(e,t)?r:(o=o.moveNode(e,t,n),r=(r=r.set("document",o)).mapPoints(function(e){return e.setPath(null)}))}},{key:"removeAnnotation",value:function(e){e=te.create(e);var t=this,n=t.annotations,r=e.key;return n=n.delete(r),t=t.set("annotations",n)}},{key:"removeMark",value:function(e,t){t=V.create(t);var n=this,r=n.document;return r=r.removeMark(e,t),n=n.set("document",r)}},{key:"removeNode",value:function(e){var t=this,n=t.document,r=n.assertNode(e),o="text"===r.object?r:r.getFirstText()||r,a="text"===r.object?r:r.getLastText()||r,i=n.getPreviousText(o.key),s=n.getNextText(a.key);return n=n.removeNode(e),t=(t=t.set("document",n)).mapRanges(function(e){var t=e,n=t.start,o=t.end;return r.hasNode(n.key)&&(e=i?e.moveStartTo(i.key,i.text.length):s?e.moveStartTo(s.key,0):e.unset()),r.hasNode(o.key)&&(e=i?e.moveEndTo(i.key,i.text.length):s?e.moveEndTo(s.key,0):e.unset()),e=e.updatePoints(function(e){return e.setPath(null)})})}},{key:"removeText",value:function(e,t,n){var r=this,o=r.document,a=o.assertNode(e);o=o.removeText(e,t,n),r=r.set("document",o);var i=n.length,s=t,c=t+i;return r=r.mapPoints(function(e){return e.key!==a.key?e:e.offset>=c?e.setOffset(e.offset-i):e.offset>s?e.setOffset(s):e})}},{key:"setAnnotation",value:function(e,t){t=te.createProperties(t);var n=te.create(e),r=n.merge(t),o=this,a=o.annotations,i=n.key;return a=a.set(i,r),o=o.set("annotations",a)}},{key:"setNode",value:function(e,t){var n=this,r=n.document;return r=r.setNode(e,t),n=n.set("document",r)}},{key:"setMark",value:function(e,t,n){var r=this,o=r.document;return o=o.setMark(e,t,n),r=r.set("document",o)}},{key:"setProperties",value:function(e){var t=this,n=t.document,r=e.data,o=e.annotations,a={};return r&&(a.data=r),o&&(a.annotations=o.map(function(e){return e.isSet?e:n.resolveAnnotation(e)})),t=t.merge(a)}},{key:"setSelection",value:function(e){var t=this,n=t,r=n.document,o=n.selection,a=o.setProperties(e);return o=r.resolveSelection(a),t=t.set("selection",o)}},{key:"splitNode",value:function(e,t,n){var r=this,o=r.document,a=o.splitNode(e,t,n),i=o.assertNode(e);return r=(r=r.set("document",a)).mapRanges(function(e){var n=a.getNextText(i.key),r=e,o=r.start,s=r.end;return i.key===o.key&&t<=o.offset&&(e=e.moveStartTo(n.key,o.offset-t)),i.key===s.key&&t<=s.offset&&(e=e.moveEndTo(n.key,s.offset-t)),e=e.updatePoints(function(e){return e.setPath(null)})})}},{key:"mapRanges",value:function(e){var t=this,n=t,r=n.document,o=n.selection,a=n.annotations,i=o.isSet?e(o):o;i||(i=o.unset()),i!==o&&(i=r.createSelection(i)),t=t.set("selection",i);var s=a.map(function(t){var n=t.isSet?e(t):t;return n&&n!==t&&(n=r.createAnnotation(n)),n});return s=s.filter(function(e){return!!e}),t=t.set("annotations",s)}},{key:"mapPoints",value:function(e){return this.mapRanges(function(t){return t.updatePoints(e)})}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={object:this.object,document:this.document.toJSON(e)};return e.preserveData&&(t.data=this.data.toJSON(e)),e.preserveAnnotations&&(t.annotations=this.annotations.map(function(t){return t.toJSON(e)}).toObject()),e.preserveSelection&&(t.selection=this.selection.toJSON(e)),t}},{key:"change",value:function(){Object(s.a)(!1,"As of Slate 0.42.0, value object are no longer schema-aware, and the `value.change()` method is no longer available. Use the `editor.change()` method on the new `Editor` controller instead.")}},{key:"startBlock",get:function(){return this.selection.start.key&&this.document.getClosestBlock(this.selection.start.key)}},{key:"endBlock",get:function(){return this.selection.end.key&&this.document.getClosestBlock(this.selection.end.key)}},{key:"anchorBlock",get:function(){return this.selection.anchor.key&&this.document.getClosestBlock(this.selection.anchor.key)}},{key:"focusBlock",get:function(){return this.selection.focus.key&&this.document.getClosestBlock(this.selection.focus.key)}},{key:"startInline",get:function(){return this.selection.start.key&&this.document.getClosestInline(this.selection.start.key)}},{key:"endInline",get:function(){return this.selection.end.key&&this.document.getClosestInline(this.selection.end.key)}},{key:"anchorInline",get:function(){return this.selection.anchor.key&&this.document.getClosestInline(this.selection.anchor.key)}},{key:"focusInline",get:function(){return this.selection.focus.key&&this.document.getClosestInline(this.selection.focus.key)}},{key:"startText",get:function(){return this.selection.start.key&&this.document.getDescendant(this.selection.start.key)}},{key:"endText",get:function(){return this.selection.end.key&&this.document.getDescendant(this.selection.end.key)}},{key:"anchorText",get:function(){return this.selection.anchor.key&&this.document.getDescendant(this.selection.anchor.key)}},{key:"focusText",get:function(){return this.selection.focus.key&&this.document.getDescendant(this.selection.focus.key)}},{key:"nextBlock",get:function(){return this.selection.end.key&&this.document.getNextBlock(this.selection.end.key)}},{key:"previousBlock",get:function(){return this.selection.start.key&&this.document.getPreviousBlock(this.selection.start.key)}},{key:"nextInline",get:function(){return this.selection.end.key&&this.document.getNextInline(this.selection.end.key)}},{key:"previousInline",get:function(){return this.selection.start.key&&this.document.getPreviousInline(this.selection.start.key)}},{key:"nextText",get:function(){return this.selection.end.key&&this.document.getNextText(this.selection.end.key)}},{key:"previousText",get:function(){return this.selection.start.key&&this.document.getPreviousText(this.selection.start.key)}},{key:"marks",get:function(){return this.selection.isUnset?new r.Set:this.selection.marks||this.document.getMarksAtRange(this.selection)}},{key:"activeMarks",get:function(){return this.selection.isUnset?new r.Set:this.selection.marks||this.document.getActiveMarksAtRange(this.selection)}},{key:"blocks",get:function(){return this.selection.isUnset?new r.List:this.document.getLeafBlocksAtRange(this.selection)}},{key:"fragment",get:function(){return this.selection.isUnset?re.create():this.document.getFragmentAtRange(this.selection)}},{key:"inlines",get:function(){return this.selection.isUnset?new r.List:this.document.getLeafInlinesAtRange(this.selection)}},{key:"texts",get:function(){return this.selection.isUnset?new r.List:this.document.getTextsAtRange(this.selection)}},{key:"history",get:function(){Object(s.a)(!1,"As of Slate 0.42.0, the `value.history` model no longer exists, and the history is stored in `value.data` instead using plugins.")}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.isValue(e))return e;if(a()(e))return t.fromJSON(e,n);throw new Error("`Value.create` only accepts objects or values, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isValue(e))return{annotations:e.annotations,data:e.data};if(a()(e)){var n={};return"annotations"in e&&(n.annotations=te.createList(e.annotations)),"data"in e&&(n.data=q.create(e.data)),n}throw new Error("`Value.createProperties` only accepts objects or values, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var n=e.data,r=void 0===n?{}:n,o=e.annotations,a=void 0===o?{}:o,i=e.document,s=void 0===i?{}:i,c=e.selection,u=void 0===c?{}:c;if(r=q.fromJSON(r),u=(s=re.fromJSON(s)).createSelection(u),a=te.createMap(a),u.isUnset){var l=s.getFirstText();l&&(u=u.moveToStartOfNode(l)),u=s.createSelection(u)}return new t({annotations:a,data:r,document:s,selection:u})}}]),t}(Object(r.Record)(fe)),he=u()("slate:operation:apply");function ye(e,t){var n=(t=be.create(t)).type;switch(he(n,t),n){case"add_annotation":var r=t.annotation;return e.addAnnotation(r);case"add_mark":var o=t,a=o.path,i=o.mark;return e.addMark(a,i);case"insert_node":var s=t,c=s.path,u=s.node;return e.insertNode(c,u);case"insert_text":var l=t,d=l.path,f=l.offset,v=l.text,h=l.marks;return e.insertText(d,f,v,h);case"merge_node":var y=t.path;return e.mergeNode(y);case"move_node":var p=t,m=p.path,g=p.newPath;return e.moveNode(m,g);case"remove_annotation":var k=t.annotation;return e.removeAnnotation(k);case"remove_mark":var b=t,A=b.path,O=b.mark;return e.removeMark(A,O);case"remove_node":var x=t.path;return e.removeNode(x);case"remove_text":var w=t,T=w.path,N=w.offset,E=w.text;return e.removeText(T,N,E);case"set_annotation":var S=t,B=S.properties,P=S.newProperties;return e.setAnnotation(B,P);case"set_mark":var j=t,_=j.path,F=j.properties,C=j.newProperties;return e.setMark(_,F,C);case"set_node":var R=t,D=R.path,L=R.newProperties;return e.setNode(D,L);case"set_selection":var I=t.newProperties;return e.setSelection(I);case"set_value":var M=t.newProperties;return e.setProperties(M);case"split_node":var z=t,J=z.path,K=z.position,q=z.properties;return e.splitNode(J,K,q);default:throw new Error('Unknown operation type: "'+n+'".')}}var pe=u()("slate:operation:invert");function me(e){var t=(e=be.create(e)).type;switch(pe(t,e),t){case"move_node":var n=e,r=n.newPath,o=n.path;if(z.isEqual(r,o))return e;var a=z.transform(o,e).first(),i=z.transform(z.increment(o),e).first();return e.set("path",a).set("newPath",i);case"merge_node":var s=e.path,c=z.decrement(s);return e.set("type","split_node").set("path",c);case"split_node":var u=e.path,l=z.increment(u);return e.set("type","merge_node").set("path",l);case"set_annotation":case"set_node":case"set_value":case"set_selection":case"set_mark":var d=e,f=d.properties,v=d.newProperties;return e.set("properties",v).set("newProperties",f);case"insert_node":case"insert_text":return e.set("type",t.replace("insert_","remove_"));case"remove_node":case"remove_text":return e.set("type",t.replace("remove_","insert_"));case"add_annotation":case"add_mark":return e.set("type",t.replace("add_","remove_"));case"remove_annotation":case"remove_mark":return e.set("type",t.replace("remove_","add_"));default:throw new Error('Unknown operation type: "'+t+'".')}}var ge={add_mark:["path","mark","data"],add_annotation:["annotation","data"],insert_node:["path","node","data"],insert_text:["path","offset","text","data"],merge_node:["path","position","properties","target","data"],move_node:["path","newPath","data"],remove_annotation:["annotation","data"],remove_mark:["path","mark","data"],remove_node:["path","node","data"],remove_text:["path","offset","text","data"],set_annotation:["properties","newProperties","data"],set_mark:["path","properties","newProperties","data"],set_node:["path","properties","newProperties","data"],set_selection:["properties","newProperties","data"],set_value:["properties","newProperties","data"],split_node:["path","position","properties","target","data"]},ke={annotation:void 0,data:void 0,length:void 0,mark:void 0,marks:void 0,newPath:void 0,newProperties:void 0,node:void 0,offset:void 0,path:void 0,position:void 0,properties:void 0,target:void 0,text:void 0,type:void 0},be=function(e){function t(){return O(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,e),x(t,[{key:"apply",value:function(e){return ye(e,this)}},{key:"invert",value:function(){return me(this)}},{key:"toJSON",value:function(){var e=this.object,t=this.type,n={object:e,type:t},r=ge[t],o=!0,a=!1,i=void 0;try{for(var s,c=r[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value,l=this[u];if("annotation"!==u&&"mark"!==u&&"marks"!==u&&"node"!==u&&"path"!==u&&"newPath"!==u||(l=l.toJSON()),"properties"===u&&"merge_node"===t){var d={};"data"in l&&(d.data=l.data.toJS()),"type"in l&&(d.type=l.type),l=d}if(("properties"===u||"newProperties"===u)&&"set_annotation"===t){var f={};"anchor"in l&&(f.anchor=l.anchor.toJS()),"focus"in l&&(f.focus=l.focus.toJS()),"key"in l&&(f.key=l.key),"mark"in l&&(f.mark=l.mark.toJS()),l=f}if(("properties"===u||"newProperties"===u)&&"set_mark"===t){var v={};"data"in l&&(v.data=l.data.toJS()),"type"in l&&(v.type=l.type),l=v}if(("properties"===u||"newProperties"===u)&&"set_node"===t){var h={};"data"in l&&(h.data=l.data.toJS()),"type"in l&&(h.type=l.type),l=h}if(("properties"===u||"newProperties"===u)&&"set_selection"===t){var y={};"anchor"in l&&(y.anchor=l.anchor.toJSON()),"focus"in l&&(y.focus=l.focus.toJSON()),"isFocused"in l&&(y.isFocused=l.isFocused),"marks"in l&&(y.marks=l.marks&&l.marks.toJSON()),l=y}if(("properties"===u||"newProperties"===u)&&"set_value"===t){var p={};"data"in l&&(p.data=l.data.toJS()),l=p}if("properties"===u&&"split_node"===t){var m={};"data"in l&&(m.data=l.data.toJS()),"type"in l&&(m.type=l.type),l=m}"data"===u&&(l=l.toJSON()),n[u]=l}}catch(g){a=!0,i=g}finally{try{!o&&c.return&&c.return()}finally{if(a)throw i}}return n}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isOperation(e))return e;if(a()(e))return t.fromJSON(e);throw new Error("`Operation.create` only accepts objects or operations, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(r.List.isList(e)||Array.isArray(e))return new r.List(e.map(t.create));throw new Error("`Operation.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(t.isOperation(e))return e;var n=e.type,o=ge[n],a={type:n};if(!o)throw new Error('`Operation.fromJSON` was passed an unrecognized operation type: "'+n+'"');var i=!0,s=!1,c=void 0;try{for(var u,l=o[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var d=u.value,f=e[d];if("data"===d&&void 0===f&&(f={}),void 0===f)throw new Error('`Operation.fromJSON` was passed a "'+n+'" operation without the required "'+d+'" attribute.');"annotation"===d&&(f=te.create(f)),"path"!==d&&"newPath"!==d||(f=z.create(f)),"mark"===d&&(f=V.create(f)),"node"===d&&(f=ue.create(f)),"properties"!==d&&"newProperties"!==d||"set_annotation"!==n||(f=te.createProperties(f)),"properties"!==d&&"newProperties"!==d||"set_mark"!==n||(f=V.createProperties(f)),"properties"!==d&&"newProperties"!==d||"set_node"!==n&&"merge_node"!==n&&"split_node"!==n||(f=ue.createProperties(f)),"properties"!==d&&"newProperties"!==d||"set_selection"!==n||(f=G.createProperties(f)),"properties"!==d&&"newProperties"!==d||"set_value"!==n||(f=ve.createProperties(f)),"data"===d&&(f=Object(r.Map)(f)),a[d]=f}}catch(v){s=!0,c=v}finally{try{!i&&l.return&&l.return()}finally{if(s)throw c}}return new t(a)}},{key:"isOperationList",value:function(e){return r.List.isList(e)&&e.every(function(e){return t.isOperation(e)})}}]),t}(Object(r.Record)(ke)),Ae={operations:void 0,value:void 0},Oe=function(e){function t(){return O(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,e),x(t,[{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{object:this.object,value:this.value.toJSON(e),operations:this.operations.toArray().map(function(t){return t.toJSON(e)})}}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isChange(e))return e;if(a()(e))return t.fromJSON(e);throw new Error("`Change.create` only accepts objects or changes, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var n=e.value,r=e.operations,o=void 0===r?[]:r;return new t({value:ve.create(n),operations:be.createList(o)})}}]),t}(Object(r.Record)(Ae));function xe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{onCommand:function(t,n,r){var o=t.type,a=t.args,i=e[o];if(!i)return r();n.command.apply(n,[i].concat(P(a)))},onConstruct:function(t,n){for(var r in e)t.registerCommand(r);return n()}}}var we=55296,Te=57343,Ne=/\s/,Ee=/['\u2018\u2019]/,Se=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/;function Be(e){return we<=e&&e<=Te}function Pe(e,t){if(Ne.test(e))return!1;if(Ee.test(e)){var n=t.charAt(0),r=je(n);if(Pe(n=t.slice(0,r),t.slice(r)))return!0}return!Se.test(e)}function je(e){return Be(e.charCodeAt(0))?2:1}function _e(e){return je(e.charAt(0))}function Fe(e){for(var t=0,n=0,r=!1,o=void 0;o=e.charAt(n);){var a=je(o);if(Pe(o=e.slice(n,n+a),e.slice(n+a)))r=!0,t+=a;else{if(r)break;t+=a}n+=a}return t}var Ce={getCharLength:je,getCharOffset:_e,getCharOffsetBackward:function(e,t){return e=e.slice(0,t),_e(e=Object(l.reverse)(e))},getCharOffsetForward:function(e,t){return _e(e=e.slice(t))},getWordOffset:Fe,getWordOffsetBackward:function(e,t){return e=e.slice(0,t),Fe(e=Object(l.reverse)(e))},getWordOffsetForward:function(e,t){return Fe(e=e.slice(t))},isSurrogate:Be,isWord:Pe};function Re(e,t){t.isExpanded&&e.deleteAtRange(t);var n=e.value.document,r=t,o=r.start,a=r.end;return t=n.hasDescendant(o.path)?t.moveToStart():t.moveTo(a.path,0).normalize(n)}var De={addMarkAtRange:function(e,t,n){if(!t.isCollapsed){var r=e.value.document,o=t.start,a=t.end,i=r.getTextsAtRange(t);e.withoutNormalizing(function(){i.forEach(function(t){var r=t.key,i=0,s=t.text.length;r===o.key&&(i=o.offset),r===a.key&&(s=a.offset),r===o.key&&r===a.key&&(s=a.offset-o.offset),e.addMarkByKey(r,i,s,n)})})}},addMarksAtRange:function(e,t,n){n.forEach(function(n){return e.addMarkAtRange(t,n)})},deleteAtRange:function(e,t){e.snapshotSelection();var n=e.value,r=t.start,o=t.end,a=r.key,i=r.offset,s=o.key,c=o.offset,u=n.document,l=u.hasVoidParent(a,e),d=u.hasVoidParent(s,e),f=u.getClosestBlock(a),v=u.getClosestBlock(s),h=0===i&&0===c&&!1===l&&a===f.getFirstText().key&&s===v.getFirstText().key;if(h&&d){var y=u.getPreviousText(s);s=y.key,c=y.text.length,d=u.hasVoidParent(s,e)}e.withoutNormalizing(function(){for(;l;){var t=u.getClosestVoid(a,e),n=u.getNextText(a);if(e.removeNodeByKey(t.key),a===s)return;if(!n)return;u=e.value.document,a=n.key,i=0,l=u.hasVoidParent(a,e)}for(;d;){var r=u.getClosestVoid(s,e),o=u.getPreviousText(s);e.removeNodeByKey(r.key),u=e.value.document,s=o.key,c=o.text.length,d=u.hasVoidParent(s,e)}if(a===s&&h)e.removeNodeByKey(f.key);else if(a!==s){f=u.getClosestBlock(a),v=u.getClosestBlock(s);var y=u.getNode(a),p=u.getNode(s),m=y.text.length-i,g=c,k=u.getCommonAncestor(a,s),b=k.getFurthestChild(a),A=k.getFurthestChild(s),O=u.getParent(f.key),x=O.nodes.indexOf(f),w=O.nodes.indexOf(v),T=void 0;for(T=y;T.key!==b.key;){var N=u.getParent(T.key),E=N.nodes.indexOf(T);N.nodes.slice(E+1).reverse().forEach(function(t){e.removeNodeByKey(t.key)}),T=N}var S=k.nodes.indexOf(b),P=k.nodes.indexOf(A);for(k.nodes.slice(S+1,P).reverse().forEach(function(t){e.removeNodeByKey(t.key)}),T=p;T.key!==A.key;){var j=u.getParent(T.key),_=j.nodes.indexOf(T);j.nodes.slice(0,_).reverse().forEach(function(t){e.removeNodeByKey(t.key)}),T=j}if(0!==m&&e.removeTextByKey(a,i,m),0!==g&&e.removeTextByKey(s,0,c),f.key!==v.key){u=e.value.document;var F=void 0,C=!0,R=!1,D=void 0;try{for(var L,I=u.ancestors(v.key)[Symbol.iterator]();!(C=(L=I.next()).done);C=!0){var M=L.value,z=B(M,1)[0];if(z.nodes.size>1)break;F=z}}catch(q){R=!0,D=q}finally{try{!C&&I.return&&I.return()}finally{if(R)throw D}}w!==x+1&&e.moveNodeByKey(v.key,O.key,x+1),h?e.removeNodeByKey(f.key):e.mergeNodeByKey(v.key),F&&e.removeNodeByKey(F.key)}}else{var J=i,K=c-i;e.removeTextByKey(a,J,K)}})},deleteBackwardAtRange:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(0!==n){var r=e.value.document,o=t,a=o.start,i=o.focus;if(t.isExpanded)e.deleteAtRange(t);else{var s=r.getClosestVoid(a.path,e);if(s)e.removeNodeByKey(s.key);else if(!a.isAtStartOfNode(r)){var c=r.getClosestBlock(a.path);if(1!==r.nodes.size&&c&&""===c.text&&1===c.nodes.size)e.removeNodeByKey(c.key);else{var u=r.getDescendant(a.path);if(a.isAtStartOfNode(u)){var l=r.getPreviousText(u.key);r.getClosestInline(u.key)&&""===l.text&&(l=r.getPreviousText(l.key));var d=r.getClosestBlock(l.key),f=r.getClosestVoid(l.key,e);if(f)return void e.removeNodeByKey(f.key);if(1===n&&d!==c)return t=t.moveAnchorTo(l.key,l.text.length),void e.deleteAtRange(t)}if(n<i.offset)return t=t.moveFocusBackward(n),void e.deleteAtRange(t);for(var v=u,h=0,y=i.offset;n>y;){var p=y+(v=r.getPreviousText(v.key)).text.length;if(n<=p){h=p-n;break}y=p}t=t.moveAnchorTo(v.key,h),e.deleteAtRange(t)}}}}},deleteCharBackwardAtRange:function(e,t){if(t.isExpanded)e.deleteAtRange(t);else{var n=e.value.document,r=t.start,o=n.getClosestBlock(r.path),a=o.getOffset(r.key)+r.offset,i=o.text,s=Ce.getCharOffsetBackward(i,a);e.deleteBackwardAtRange(t,s)}},deleteCharForwardAtRange:function(e,t){if(t.isExpanded)e.deleteAtRange(t);else{var n=e.value.document,r=t.start,o=n.getClosestBlock(r.path),a=o.getOffset(r.key)+r.offset,i=o.text,s=Ce.getCharOffsetForward(i,a);e.deleteForwardAtRange(t,s)}},deleteForwardAtRange:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(0!==n){var r=e.value.document,o=t,a=o.start,i=o.focus;if(t.isExpanded)e.deleteAtRange(t);else{var s=r.getClosestVoid(a.path,e);if(s)e.removeNodeByKey(s.key);else{var c=r.getClosestBlock(a.path);if(c&&!e.isVoid(c)&&""===c.text&&1!==r.nodes.size){var u=r.getNextBlock(c.key);return e.removeNodeByKey(c.key),void(u&&u.key&&e.moveToStartOfNode(u))}if(!a.isAtEndOfNode(r)){var l=r.getDescendant(a.path);if(a.isAtEndOfNode(l)){var d=r.getNextText(l.key),f=r.getClosestBlock(d.key),v=r.getClosestVoid(d.key,e);if(v)return void e.removeNodeByKey(v.key);if(1===n&&f!==c)return t=t.moveFocusTo(d.key,0),void e.deleteAtRange(t)}if(n<=l.text.length-i.offset)return t=t.moveFocusForward(n),void e.deleteAtRange(t);for(var h=l,y=i.offset,p=l.text.length-i.offset;n>p;){var m=p+(h=r.getNextText(h.key)).text.length;if(n<=m){y=n-p;break}p=m}t=t.moveFocusTo(h.key,y),e.deleteAtRange(t)}}}}},deleteLineBackwardAtRange:function(e,t){if(t.isExpanded)e.deleteAtRange(t);else{var n=e.value.document,r=t.start,o=n.getClosestBlock(r.path).getOffset(r.key)+r.offset;e.deleteBackwardAtRange(t,o)}},deleteLineForwardAtRange:function(e,t){if(t.isExpanded)e.deleteAtRange(t);else{var n=e.value.document,r=t.start,o=n.getClosestBlock(r.path),a=o.getOffset(r.key)+r.offset;e.deleteForwardAtRange(t,o.text.length-a)}},deleteWordBackwardAtRange:function(e,t){if(t.isExpanded)e.deleteAtRange(t);else{var n=e.value.document,r=t.start,o=n.getClosestBlock(r.path),a=o.getOffset(r.key)+r.offset,i=o.text,s=0===a?1:Ce.getWordOffsetBackward(i,a);e.deleteBackwardAtRange(t,s)}},deleteWordForwardAtRange:function(e,t){if(t.isExpanded)e.deleteAtRange(t);else{var n=e.value.document,r=t.start,o=n.getClosestBlock(r.path),a=o.getOffset(r.key)+r.offset,i=o.text,s=Ce.getWordOffsetForward(i,a),c=0===s?1:s;e.deleteForwardAtRange(t,c)}},insertBlockAtRange:function(e,t,n){t=Re(e,t),n=de.create(n);var r=e.value.document,o=t.start,a=o.key,i=o.offset,s=r.getClosestBlock(a),c=r.getClosestInline(a),u=r.getParent(s.key),l=u.nodes.indexOf(s);if(e.isVoid(s)){var d=o.isAtEndOfNode(s)?1:0;e.insertNodeByKey(u.key,l+d,n)}else if(c||""!==s.text)if(o.isAtStartOfNode(s))e.insertNodeByKey(u.key,l,n);else if(o.isAtEndOfNode(s))e.insertNodeByKey(u.key,l+1,n);else{if(c&&e.isVoid(c)){var f=o.isAtEndOfNode(c),v=f?r.getNextText(a):r.getPreviousText(a),h=f?t.moveToStartOfNode(v):t.moveToEndOfNode(v);a=h.start.key,i=h.start.offset}e.withoutNormalizing(function(){e.splitDescendantsByKey(s.key,a,i),e.insertNodeByKey(u.key,l+1,n)})}else e.insertNodeByKey(u.key,l+1,n)},insertFragmentAtRange:function(e,t,n){e.withoutNormalizing(function(){if(t=Re(e,t),n.nodes.size){n=n.mapDescendants(function(e){return e.regenerateKey()});var o=t.start,a=e.value.document,i=a.getDescendant(o.path),s=a.getClosestBlock(i.key),c=s.getFurthestChild(i.key),u=o.isAtStartOfNode(s),l=a.getParent(s.key),d=l.nodes.indexOf(s),f=n.getBlocks(),v=n.nodes.first(),h=n.nodes.last(),y=f.first(),p=f.last(),m=Le(n,a,s.key);if(y===p&&e.isVoid(y))e.insertBlockAtRange(t,y);else if(m!==n||!v.hasBlockChildren()&&!h.hasBlockChildren()){if(y!==p){var g=m.getFurthest(y.key,function(e){return 1===e.nodes.size})||y,k=l.nodes.indexOf(s);m.removeNode(g.key).nodes.forEach(function(t,n){var r=k+n+1;e.insertNodeByKey(l.key,r,t)})}if(0!==o.offset&&e.splitDescendantsByKey(c.key,o.key,o.offset),i=(a=e.value.document).getDescendant(o.key),c=(s=a.getClosestBlock(o.key)).getFurthestChild(i.key),y!==p){var b=u?c:s.getNextSibling(c.key),A=b?s.nodes.skipUntil(function(e){return e.key===b.key}):Object(r.List)(),O=p.nodes.size;A.forEach(function(t,n){var r=O+n;e.moveNodeByKey(t.key,p.key,r)})}if(e.isVoid(s)||""!==s.text||s.findDescendant(function(t){return e.isVoid(t)})){var x=s.getFurthestChild(i.key),w=s.nodes.indexOf(x);y.nodes.forEach(function(t,n){var r=0===o.offset?0:1,a=w+n+r;e.insertNodeByKey(s.key,a,t)})}else e.removeNodeByKey(s.key),e.insertNodeByKey(l.key,d,y)}else n.nodes.reverse().forEach(function(n){e.insertBlockAtRange(t,n)})}})}},Le=function(e,t,n){var r=function(e){if(e&&"text"!==e.object)return 1===e.nodes.size},o=function(e){return e&&e.nodes.first()},a=e;if(r(e)){var i=o(e),s=t.getFurthest(n,function(e){return e.type===i.type});for(s===t.getParent(n)&&(a=i);r(i)&&r(s)&&(i=o(i),s=o(s),i.type===s.type);)a=i}return a};De.insertInlineAtRange=function(e,t,n){n=ae.create(n),e.withoutNormalizing(function(){t=Re(e,t);var r=e.value.document,o=t.start,a=r.getParent(o.path),i=r.assertDescendant(o.path),s=a.nodes.indexOf(i);e.isVoid(a)||(e.splitNodeByPath(o.path,o.offset),e.insertNodeByKey(a.key,s+1,n))})},De.insertTextAtRange=function(e,t,n,r){e.withoutNormalizing(function(){t=Re(e,t);var o=e.value.document,a=t.start,i=a.offset,s=o.getParent(a.path);e.isVoid(s)||e.insertTextByPath(a.path,i,n,r)})},De.removeMarkAtRange=function(e,t,n){if(!t.isCollapsed){var r=e.value.document.getTextsAtRange(t),o=t.start,a=t.end;e.withoutNormalizing(function(){r.forEach(function(t){var r=t.key,i=0,s=t.text.length;r===o.key&&(i=o.offset),r===a.key&&(s=a.offset),r===o.key&&r===a.key&&(s=a.offset-o.offset),e.removeMarkByKey(r,i,s,n)})})}},De.setBlocksAtRange=function(e,t,n){var r=e.value.document,o=r.getLeafBlocksAtRange(t),a=t.start,i=t.end,s=t.isCollapsed,c=r.hasVoidParent(a.path,e),u=r.getClosestBlock(a.path),l=r.getClosestBlock(i.key),d=!1===s&&0===a.offset&&0===i.offset&&!1===c&&a.key===u.getFirstText().key&&i.key===l.getFirstText().key?o.slice(0,-1):o;e.withoutNormalizing(function(){d.forEach(function(t){e.setNodeByKey(t.key,n)})})},De.setInlinesAtRange=function(e,t,n){var r=e.value.document.getLeafInlinesAtRange(t);e.withoutNormalizing(function(){r.forEach(function(t){e.setNodeByKey(t.key,n)})})},De.splitBlockAtRange=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=t=Re(e,t),o=r.start,a=r.end,i=e.value,s=i.document,c=s.assertDescendant(o.path),u=s.getClosestBlock(c.key),l=0;u&&"block"===u.object&&l<n;)c=u,u=s.getClosestBlock(u.key),l++;e.withoutNormalizing(function(){if(e.splitDescendantsByKey(c.key,o.path,o.offset),i=e.value,s=i.document,t.isExpanded){t.isBackward&&(t=t.flip());var n=s.getNextBlock(c.key);t=(t=t.moveAnchorToStartOfNode(n)).setFocus(t.focus.setPath(null)),o.path.equals(a.path)&&(t=t.moveFocusTo(t.anchor.key,a.offset-o.offset)),t=s.resolveRange(t),e.deleteAtRange(t)}})},De.splitInlineAtRange=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=(t=Re(e,t)).start,o=e.value.document,a=o.assertDescendant(r.path),i=o.getClosestInline(a.key),s=0;i&&"inline"===i.object&&s<n;)a=i,i=o.getClosestInline(i.key),s++;e.splitDescendantsByKey(a.key,r.path,r.offset)},De.toggleMarkAtRange=function(e,t,n){t.isCollapsed||(n=V.create(n),e.value.document.getActiveMarksAtRange(t).some(function(e){return e.equals(n)})?e.removeMarkAtRange(t,n):e.addMarkAtRange(t,n))},De.unwrapBlockAtRange=function(e,t,n){n=ue.createProperties(n);var r=e.value.document,o=r.getLeafBlocksAtRange(t),a=o.map(function(e){return r.getClosest(e.key,function(e){return"block"===e.object&&((null==n.type||e.type===n.type)&&!(null!=n.data&&!e.data.isSuperset(n.data)))})}).filter(function(e){return e}).toOrderedSet().toList();e.withoutNormalizing(function(){a.forEach(function(t){var n=t.nodes.first(),a=t.nodes.last(),i=e.value.document.getParent(t.key),s=i.nodes.indexOf(t),c=t.nodes.filter(function(e){return o.some(function(t){return e===t||e.hasDescendant(t.key)})}),u=c.first(),l=c.last();if(n===u&&a===l)t.nodes.forEach(function(t,n){e.moveNodeByKey(t.key,i.key,s+n)}),e.removeNodeByKey(t.key);else if(a===l)t.nodes.skipUntil(function(e){return e===u}).forEach(function(t,n){e.moveNodeByKey(t.key,i.key,s+1+n)});else if(n===u)t.nodes.takeUntil(function(e){return e===l}).push(l).forEach(function(t,n){e.moveNodeByKey(t.key,i.key,s+n)});else{var d=u.getFirstText();e.splitDescendantsByKey(t.key,d.key,0),r=e.value.document,c.forEach(function(t,n){if(0===n){var o=t;t=r.getNextBlock(t.key),e.removeNodeByKey(o.key)}e.moveNodeByKey(t.key,i.key,s+1+n)})}})})},De.unwrapInlineAtRange=function(e,t,n){n=ue.createProperties(n);var r=e.value.document,o=r.getTextsAtRange(t).map(function(e){return r.getClosest(e.key,function(e){return"inline"===e.object&&((null==n.type||e.type===n.type)&&!(null!=n.data&&!e.data.isSuperset(n.data)))})}).filter(function(e){return e}).toOrderedSet().toList();e.withoutNormalizing(function(){o.forEach(function(t){var n=e.value.document.getParent(t.key),r=n.nodes.indexOf(t);t.nodes.forEach(function(t,o){e.moveNodeByKey(t.key,n.key,r+o)}),e.removeNodeByKey(t.key)})})},De.wrapBlockAtRange=function(e,t,n){n=(n=de.create(n)).set("nodes",n.nodes.clear());var r=e.value.document,o=r.getLeafBlocksAtRange(t),a=o.first(),i=o.last(),s=void 0,c=void 0,u=void 0;if(1===o.length?(s=r.getParent(a.key),c=o):s=r.getClosest(a.key,function(e){return!!r.getClosest(i.key,function(t){return e===t})}),null==s&&(s=r),null==c){var l=s.nodes.reduce(function(e,t,n){return(t===a||t.hasDescendant(a.key))&&(e[0]=n),(t===i||t.hasDescendant(i.key))&&(e[1]=n),e},[]);u=l[0],c=s.nodes.slice(l[0],l[1]+1)}null==u&&(u=s.nodes.indexOf(c.first())),e.withoutNormalizing(function(){e.insertNodeByKey(s.key,u,n),c.forEach(function(t,r){e.moveNodeByKey(t.key,n.key,r)})})},De.wrapInlineAtRange=function(e,t,n){var r=e.value.document,o=t.start,a=t.end;if(t.isCollapsed){var i=r.getClosestInline(o.path);if(!i)return;if(!e.isVoid(i))return;return e.wrapInlineByKey(i.key,n)}n=(n=ae.create(n)).set("nodes",n.nodes.clear());var s=r.getLeafBlocksAtRange(t),c=r.getClosestBlock(o.path),u=r.getClosestBlock(a.path),l=r.getClosestInline(o.path),d=r.getClosestInline(a.path),f=c.getFurthestChild(o.key),v=u.getFurthestChild(a.key);e.withoutNormalizing(function(){l&&l===d||(e.splitDescendantsByKey(v.key,a.key,a.offset),e.splitDescendantsByKey(f.key,o.key,o.offset)),r=e.value.document,c=r.getDescendant(c.key),u=r.getDescendant(u.key),f=c.getFurthestChild(o.key),v=u.getFurthestChild(a.key);var i=c.nodes.indexOf(f),h=u.nodes.indexOf(v);if(l&&l===d){var y=c.getTextsAtRange(t).map(function(e){return o.key===e.key&&a.key===e.key?e.splitText(o.offset)[1].splitText(a.offset-o.offset)[0].regenerateKey():o.key===e.key?e.splitText(o.offset)[1].regenerateKey():a.key===e.key?e.splitText(a.offset)[0].regenerateKey():e.regenerateKey()});n=n.set("nodes",y),e.insertInlineAtRange(t,n)}else if(c===u){r=e.value.document,c=r.getClosestBlock(o.key),f=c.getFurthestChild(o.key);var p=r.getNextSibling(f.key),m=c.nodes.indexOf(p),g=o.key===a.key?p:c.getFurthestChild(a.key),k=c.nodes.skipUntil(function(e){return e===p}).takeUntil(function(e){return e===g}).push(g),b=n.regenerateKey();e.insertNodeByKey(c.key,m,b),k.forEach(function(t,n){e.moveNodeByKey(t.key,b.key,n)})}else{var A=c.nodes.slice(i+1),O=u.nodes.slice(0,h+1),x=n.regenerateKey(),w=n.regenerateKey();e.insertNodeByKey(c.key,i+1,x),e.insertNodeByKey(u.key,h,w),A.forEach(function(t,n){e.moveNodeByKey(t.key,x.key,n)}),O.forEach(function(t,n){e.moveNodeByKey(t.key,w.key,n)}),s.slice(1,-1).forEach(function(t){var r=n.regenerateKey();e.insertNodeByKey(t.key,0,r),t.nodes.forEach(function(t,n){e.moveNodeByKey(t.key,r.key,n)})})}})},De.wrapTextAtRange=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n,o=t.start,a=t.end,i=t.moveToStart(),s=t.moveToEnd();o.path.equals(a.path)&&(s=s.moveForward(n.length)),e.withoutNormalizing(function(){e.insertTextAtRange(i,n),e.insertTextAtRange(s,r)})};var Ie={addMarkByPath:function(e,t,n,r,o){o=V.create(o),e.addMarksByPath(t,n,r,[o])},addMarksByPath:function(e,t,n,r,o){if((o=V.createSet(o)).size){var a=e.value.document.assertNode(t);e.withoutNormalizing(function(){n+r<a.text.length&&e.splitNodeByPath(t,n+r),n>0&&(e.splitNodeByPath(t,n),t=z.increment(t),n=0),o.forEach(function(n){e.applyOperation({type:"add_mark",path:t,mark:V.create(n)})})})}},insertFragmentByPath:function(e,t,n,r){r.nodes.forEach(function(r,o){e.insertNodeByPath(t,n+o,r)})},insertNodeByPath:function(e,t,n,r){e.applyOperation({type:"insert_node",path:t.concat(n),node:r})},insertTextByPath:function(e,t,n,r,o){o=V.createSet(o);var a=e.value,i=a.annotations;a.document.assertNode(t),e.withoutNormalizing(function(){var a=!0,s=!1,c=void 0;try{for(var u,l=i.values()[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var d=u.value,f=d.start,v=d.end;e.isAtomic(d)&&(f.path.equals(t)&&f.offset<n&&(!v.path.equals(t)||v.offset>n)&&e.removeAnnotation(d))}}catch(h){s=!0,c=h}finally{try{!a&&l.return&&l.return()}finally{if(s)throw c}}e.applyOperation({type:"insert_text",path:t,offset:n,text:r}),o.size&&e.addMarksByPath(t,n,r.length,o)})},mergeNodeByPath:function(e,t){var n=e.value.document,r=n.getDescendant(t),o=n.getPreviousSibling(t);if(!o)throw new Error('Unable to merge node with path "'+t+'", because it has no previous sibling.');var a="text"===o.object?o.text.length:o.nodes.size;e.applyOperation({type:"merge_node",path:t,position:a,properties:{type:r.type,data:r.data},target:null})},moveNodeByPath:function(e,t,n,r){if(z.isEqual(t,n))return e;var o=n.concat(r);if(z.isEqual(t,o))return e;e.applyOperation({type:"move_node",path:t,newPath:o})},removeMarkByPath:function(e,t,n,r,o){o=V.create(o),e.removeMarksByPath(t,n,r,[o])},removeMarksByPath:function(e,t,n,r,o){if((o=V.createSet(o)).size){var a=e.value.document.assertNode(t);e.withoutNormalizing(function(){n+r<a.text.length&&e.splitNodeByPath(t,n+r),n>0&&(e.splitNodeByPath(t,n),t=z.increment(t),n=0),o.forEach(function(o){e.applyOperation({type:"remove_mark",path:t,offset:n,length:r,mark:o})})})}},removeAllMarksByPath:function(e,t){var n=e.state.document.assertNode(t);e.withoutNormalizing(function(){if("text"!==n.object){var r=!0,o=!1,a=void 0;try{for(var i,s=n.texts()[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var c=i.value,u=B(c,2),l=u[0],d=u[1],f=t.concat(d);e.removeMarksByPath(f,0,l.text.length,l.marks)}}catch(v){o=!0,a=v}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}}else e.removeMarksByPath(t,0,n.text.length,n.marks)})},removeNodeByPath:function(e,t){var n=e.value.document.assertNode(t);e.applyOperation({type:"remove_node",path:t,node:n})},removeTextByPath:function(e,t,n,r){var o=e.value,a=o.document,i=o.annotations,s=a.assertNode(t).text.slice(n,n+r);e.withoutNormalizing(function(){var r=!0,o=!1,a=void 0;try{for(var c,u=i.values()[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var l=c.value,d=l.start,f=l.end;e.isAtomic(l)&&(d.path.equals(t)&&d.offset<n&&(!f.path.equals(t)||f.offset>n)&&e.removeAnnotation(l))}}catch(v){o=!0,a=v}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}e.applyOperation({type:"remove_text",path:t,offset:n,text:s})})},replaceNodeByPath:function(e,t,n){n=ue.create(n);var r=t.last(),o=z.lift(t);e.withoutNormalizing(function(){e.removeNodeByPath(t),e.insertNodeByPath(o,r,n)})},replaceTextByPath:function(e,t,n,r,o,a){e.withoutNormalizing(function(){e.removeTextByPath(t,n,r),e.insertTextByPath(t,n,o,a)})},setMarkByPath:function(e,t,n,r,o,a){o=V.create(o),a=V.createProperties(a);var i=e.value.document.assertNode(t);e.withoutNormalizing(function(){n+r<i.text.length&&e.splitNodeByPath(t,n+r),n>0&&(e.splitNodeByPath(t,n),t=z.increment(t),n=0),e.applyOperation({type:"set_mark",path:t,properties:o,newProperties:a})})},setNodeByPath:function(e,t,n){var r=e.value.document.assertNode(t);n=ue.createProperties(n);var o=f()(r,Object.keys(n));e.applyOperation({type:"set_node",path:t,properties:o,newProperties:n})},setTextByPath:function(e,t,n,r){var o=e.value.document.assertNode(t).text.length;e.replaceTextByPath(t,0,o,n,r)},splitNodeByPath:function(e,t,n){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).target,o=void 0===r?null:r,a=e.value.document.getDescendant(t);e.applyOperation({type:"split_node",path:t,position:n,target:o,properties:{type:a.type,data:a.data}})},splitDescendantsByPath:function(e,t,n,r){if(t.equals(n))e.splitNodeByPath(n,r);else{var o=e.value.document,a=r,i=n;e.withoutNormalizing(function(){e.splitNodeByKey(n,r);var s=!0,c=!1,u=void 0;try{for(var l,d=o.ancestors(n)[Symbol.iterator]();!(s=(l=d.next()).done);s=!0){var f=l.value,v=B(f,2)[1],h=a;if(a=i.last()+1,i=v,e.splitNodeByPath(v,a,{target:h}),v.equals(t))break}}catch(y){c=!0,u=y}finally{try{!s&&d.return&&d.return()}finally{if(c)throw u}}})}},unwrapInlineByPath:function(e,t,n){var r=e.value,o=r.document,a=r.selection,i=o.assertNode(t),s=i.getFirstText(),c=i.getLastText(),u=a.moveToRangeOfNode(s,c);e.unwrapInlineAtRange(u,n)},unwrapBlockByPath:function(e,t,n){var r=e.value,o=r.document,a=r.selection,i=o.assertNode(t),s=i.getFirstText(),c=i.getLastText(),u=a.moveToRangeOfNode(s,c);e.unwrapBlockAtRange(u,n)},unwrapNodeByPath:function(e,t){var n=e.value.document;n.assertNode(t);var r=z.lift(t),o=n.assertNode(r),a=t.last(),i=r.last(),s=z.lift(r),c=0===a,u=a===o.nodes.size-1;e.withoutNormalizing(function(){if(1===o.nodes.size)e.moveNodeByPath(t,s,i+1),e.removeNodeByPath(r);else if(c)e.moveNodeByPath(t,s,i);else if(u)e.moveNodeByPath(t,s,i+1);else{var n=z.increment(t,1,r.size-1);n=n.set(n.size-1,0),e.splitNodeByPath(r,a),e.moveNodeByPath(n,s,i+1)}})},unwrapChildrenByPath:function(e,t){t=z.create(t);var n=e.value.document.assertNode(t),r=z.lift(t),o=t.last(),a=n.nodes;e.withoutNormalizing(function(){a.reverse().forEach(function(n,i){var s=a.size-i-1,c=t.push(s);e.moveNodeByPath(c,r,o+1)}),e.removeNodeByPath(t)})},wrapBlockByPath:function(e,t,n){n=(n=de.create(n)).set("nodes",n.nodes.clear());var r=z.lift(t),o=t.last(),a=z.increment(t);e.withoutNormalizing(function(){e.insertNodeByPath(r,o,n),e.moveNodeByPath(a,t,0)})},wrapInlineByPath:function(e,t,n){n=(n=ae.create(n)).set("nodes",n.nodes.clear());var r=z.lift(t),o=t.last(),a=z.increment(t);e.withoutNormalizing(function(){e.insertNodeByPath(r,o,n),e.moveNodeByPath(a,t,0)})},wrapNodeByPath:function(e,t,n){"block"===(n=ue.create(n)).object?e.wrapBlockByPath(t,n):"inline"===n.object&&e.wrapInlineByPath(t,n)}},Me=function(e){Ie[e+"ByKey"]=function(t,n){for(var r=arguments.length,o=Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];var i=t.value.document.assertPath(n);t[e+"ByPath"].apply(t,[i].concat(o))}},ze=!0,Je=!1,Ke=void 0;try{for(var qe,Ue=["addMark","insertFragment","insertNode","insertText","mergeNode","removeAllMarks","removeMark","removeNode","removeText","replaceNode","replaceText","setMark","setNode","setText","splitNode","unwrapBlock","unwrapChildren","unwrapInline","unwrapNode","wrapBlock","wrapInline","wrapNode"][Symbol.iterator]();!(ze=(qe=Ue.next()).done);ze=!0){Me(qe.value)}}catch(Lt){Je=!0,Ke=Lt}finally{try{!ze&&Ue.return&&Ue.return()}finally{if(Je)throw Ke}}Ie.moveNodeByKey=function(e,t,n){for(var r=arguments.length,o=Array(r>3?r-3:0),a=3;a<r;a++)o[a-3]=arguments[a];var i=e.value.document,s=i.assertPath(t),c=i.assertPath(n);e.moveNodeByPath.apply(e,[s,c].concat(o))},Ie.splitDescendantsByKey=function(e,t,n){for(var r=arguments.length,o=Array(r>3?r-3:0),a=3;a<r;a++)o[a-3]=arguments[a];var i=e.value.document,s=i.assertPath(t),c=i.assertPath(n);e.splitDescendantsByPath.apply(e,[s,c].concat(o))};var Ve={};Ve.save=function(e,t){var n=e.operations,o=e.value.data,a=e.tmp,i=a.save,s=a.merge;if(!1!==i){var c,u,l=o.get("undos")||Object(r.List)(),d=l.last(),f=d&&d.last();if(null==s&&(0!==n.size?s=!0:(c=t,s=!!(u=f)&&("set_selection"===c.type&&"set_selection"===u.type||"insert_text"===c.type&&"insert_text"===u.type&&c.offset===u.offset+u.text.length&&c.path.equals(u.path)||"remove_text"===c.type&&"remove_text"===u.type&&c.offset+c.text.length===u.offset&&c.path.equals(u.path)))),s&&d){var v=d.push(t);l=(l=l.pop()).push(v)}else{var h=Object(r.List)([t]);l=l.push(h)}l.size>100&&(l=l.takeLast(100)),e.withoutSaving(function(){var t=Object(r.List)(),n=o.set("undos",l).set("redos",t);e.setData(n)})}},Ve.redo=function(e){var t=e.value.data,n=t.get("redos")||Object(r.List)(),o=t.get("undos")||Object(r.List)(),a=n.last();a&&e.withoutSaving(function(){e.withoutNormalizing(function(){a.forEach(function(t){var n=t,r=n.type,o=n.properties;"set_selection"===r&&(t=t.set("properties",h()(o,"isFocused"))),e.applyOperation(t)}),n=n.pop(),o=o.push(a);var r=t.set("undos",o).set("redos",n);e.setData(r)})})},Ve.undo=function(e){var t=e.value.data,n=t.get("redos")||Object(r.List)(),o=t.get("undos")||Object(r.List)(),a=o.last();a&&e.withoutSaving(function(){e.withoutNormalizing(function(){a.slice().reverse().map(function(e){return e.invert()}).forEach(function(t){var n=t,r=n.type,o=n.properties;"set_selection"===r&&(t=t.set("properties",h()(o,"isFocused"))),e.applyOperation(t)}),n=n.push(a),o=o.pop();var r=t.set("undos",o).set("redos",n);e.setData(r)})})},Ve.withoutMerging=function(e,t){var n=e.tmp.merge;e.tmp.merge=!1,t(e),e.tmp.merge=n},Ve.withoutSaving=function(e,t){var n=e.tmp.save;e.tmp.save=!1,t(e),e.tmp.save=n};var We={};function He(e,t){for(var n,r=arguments.length,o=Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];var i=(n=e.value.selection)[t].apply(n,o);e.select(i)}function Ye(e,t,n,r){var o=t.slice(0,1).toUpperCase()+t.slice(1),a=n.slice(0,1).toUpperCase()+n.slice(1),i=r.slice(0,1).toUpperCase()+r.slice(1),s="move"+o+"To"+a+"OfNode",c="text"===r?"getNode":"getClosest"+i,u=e.value,l=u.document,d=u.selection[t],f=l[c](d.key);f&&e[s](f)}function Ge(e,t,n,r,o){var a=t.slice(0,1).toUpperCase()+t.slice(1),i=n.slice(0,1).toUpperCase()+n.slice(1),s=r.slice(0,1).toUpperCase()+r.slice(1),c=o.slice(0,1).toUpperCase()+o.slice(1),u="move"+a+"To"+i+"OfNode",l="text"===o?"getNode":"getClosest"+c,d="get"+s+c,f=e.value,v=f.document,h=f.selection[t],y=v[l](h.key);if(y){var p=v[d](y.key);p&&e[u](p)}}function Xe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(0!==n){if(n<0)return Ze(e,t,-n);var r=t.slice(0,1).toUpperCase()+t.slice(1),o=e.value,a=o.document,i=o.selection,s=i[t],c=a.hasVoidParent(s.path,e);if(!c&&s.offset-n>=0){var u=i["move"+r+"Backward"](n);e.select(u)}else{var l=a.getPreviousText(s.path);if(l){var d=a.getClosestBlock(s.path).hasNode(l.key),f=l&&a.hasVoidParent(l.key,e);if(e["move"+r+"ToEndOfNode"](l),!c&&!f&&d){var v=e.value.selection["move"+r+"Backward"](n);e.select(v)}}}}}function Ze(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(0!==n){if(n<0)return Xe(e,t,-n);var r=t.slice(0,1).toUpperCase()+t.slice(1),o=e.value,a=o.document,i=o.selection,s=i[t],c=a.getNode(s.path),u=a.hasVoidParent(s.path,e);if(!u&&s.offset+n<=c.text.length){var l=i["move"+r+"Forward"](n);e.select(l)}else{var d=a.getNextText(s.path);if(d){var f=a.getClosestBlock(s.path).hasNode(d.key),v=a.hasVoidParent(d.key,e);if(e["move"+r+"ToStartOfNode"](d),!u&&!v&&f){var h=e.value.selection["move"+r+"Forward"](n);e.select(h)}}}}}function Qe(e,t){var n=e.value,r=n.document,o=n.selection[t],a=r.getClosestBlock(o.key),i=a.getOffset(o.key)+o.offset,s=a.text,c=Ce.getWordOffsetBackward(s,i);e.command(Xe,t,c>0?c:1)}function $e(e,t){var n=e.value,r=n.document,o=n.selection[t],a=r.getClosestBlock(o.key),i=a.getOffset(o.key)+o.offset,s=a.text,c=Ce.getWordOffsetForward(s,i);e.command(Ze,t,c>0?c:1)}We.blur=function(e){e.select({isFocused:!1})},We.deselect=function(e){var t=G.create();e.select(t)},We.focus=function(e){e.select({isFocused:!0})},We.flip=function(e){e.command(He,"flip")},We.moveAnchorBackward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Xe,"anchor"].concat(n))},We.moveAnchorWordBackward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Qe,"anchor"].concat(n))},We.moveAnchorForward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Ze,"anchor"].concat(n))},We.moveAnchorWordForward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[$e,"anchor"].concat(n))},We.moveAnchorTo=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[He,"moveAnchorTo"].concat(n))},We.moveAnchorToEndOfBlock=function(e){e.command(Ye,"anchor","end","block")},We.moveAnchorToEndOfInline=function(e){e.command(Ye,"anchor","end","inline")},We.moveAnchorToEndOfDocument=function(e){e.moveAnchorToEndOfNode(e.value.document).moveToAnchor()},We.moveAnchorToEndOfNextBlock=function(e){e.command(Ge,"anchor","end","next","block")},We.moveAnchorToEndOfNextInline=function(e){e.command(Ge,"anchor","end","next","inline")},We.moveAnchorToEndOfNextText=function(e){e.command(Ge,"anchor","end","next","text")},We.moveAnchorToEndOfNode=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[He,"moveAnchorToEndOfNode"].concat(n))},We.moveAnchorToEndOfPreviousBlock=function(e){e.command(Ge,"anchor","end","previous","block")},We.moveAnchorToEndOfPreviousInline=function(e){e.command(Ge,"anchor","end","previous","inline")},We.moveAnchorToEndOfPreviousText=function(e){e.command(Ge,"anchor","end","previous","text")},We.moveAnchorToEndOfText=function(e){e.command(Ye,"anchor","end","text")},We.moveAnchorToStartOfBlock=function(e){e.command(Ye,"anchor","start","block")},We.moveAnchorToStartOfDocument=function(e){e.moveAnchorToStartOfNode(e.value.document).moveToAnchor()},We.moveAnchorToStartOfInline=function(e){e.command(Ye,"anchor","start","inline")},We.moveAnchorToStartOfNextBlock=function(e){e.command(Ge,"anchor","start","next","block")},We.moveAnchorToStartOfNextInline=function(e){e.command(Ge,"anchor","start","next","inline")},We.moveAnchorToStartOfNextText=function(e){e.command(Ge,"anchor","start","next","text")},We.moveAnchorToStartOfNode=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[He,"moveAnchorToStartOfNode"].concat(n))},We.moveAnchorToStartOfPreviousBlock=function(e){e.command(Ge,"anchor","start","previous","block")},We.moveAnchorToStartOfPreviousInline=function(e){e.command(Ge,"anchor","start","previous","inline")},We.moveAnchorToStartOfPreviousText=function(e){e.command(Ge,"anchor","start","previous","text")},We.moveAnchorToStartOfText=function(e){e.command(Ye,"anchor","start","text")},We.moveBackward=function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=e.moveAnchorBackward.apply(e,r)).moveFocusBackward.apply(t,r)},We.moveWordBackward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.moveFocusWordBackward.apply(e,n).moveToFocus()},We.moveEndBackward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Xe,"end"].concat(n))},We.moveEndWordBackward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Qe,"end"].concat(n))},We.moveEndForward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Ze,"end"].concat(n))},We.moveEndWordForward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[$e,"end"].concat(n))},We.moveEndTo=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[He,"moveEndTo"].concat(n))},We.moveEndToEndOfBlock=function(e){e.command(Ye,"end","end","block")},We.moveEndToEndOfDocument=function(e){e.moveEndToEndOfNode(e.value.document).moveToEnd()},We.moveEndToEndOfInline=function(e){e.command(Ye,"end","end","inline")},We.moveEndToEndOfNextBlock=function(e){e.command(Ge,"end","end","next","block")},We.moveEndToEndOfNextInline=function(e){e.command(Ge,"end","end","next","inline")},We.moveEndToEndOfNextText=function(e){e.command(Ge,"end","end","next","text")},We.moveEndToEndOfNode=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[He,"moveEndToEndOfNode"].concat(n))},We.moveEndToEndOfPreviousBlock=function(e){e.command(Ge,"end","end","previous","block")},We.moveEndToEndOfPreviousInline=function(e){e.command(Ge,"end","end","previous","inline")},We.moveEndToEndOfPreviousText=function(e){e.command(Ge,"end","end","previous","text")},We.moveEndToEndOfText=function(e){e.command(Ye,"end","end","text")},We.moveEndToStartOfBlock=function(e){e.command(Ye,"end","start","block")},We.moveEndToStartOfDocument=function(e){e.moveEndToStartOfNode(e.value.document).moveToEnd()},We.moveEndToStartOfInline=function(e){e.command(Ye,"end","start","inline")},We.moveEndToStartOfNextBlock=function(e){e.command(Ge,"end","start","next","block")},We.moveEndToStartOfNextInline=function(e){e.command(Ge,"end","start","next","inline")},We.moveEndToStartOfNextText=function(e){e.command(Ge,"end","start","next","text")},We.moveEndToStartOfNode=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[He,"moveEndToStartOfNode"].concat(n))},We.moveEndToStartOfPreviousBlock=function(e){e.command(Ge,"end","start","previous","block")},We.moveEndToStartOfPreviousInline=function(e){e.command(Ge,"end","start","previous","inline")},We.moveEndToStartOfPreviousText=function(e){e.command(Ge,"end","start","previous","text")},We.moveEndToStartOfText=function(e){e.command(Ye,"end","start","text")},We.moveFocusBackward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Xe,"focus"].concat(n))},We.moveFocusWordBackward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Qe,"focus"].concat(n))},We.moveFocusForward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Ze,"focus"].concat(n))},We.moveFocusWordForward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[$e,"focus"].concat(n))},We.moveFocusTo=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[He,"moveFocusTo"].concat(n))},We.moveFocusToEndOfBlock=function(e){e.command(Ye,"focus","end","block")},We.moveFocusToEndOfDocument=function(e){e.moveFocusToEndOfNode(e.value.document).moveToFocus()},We.moveFocusToEndOfInline=function(e){e.command(Ye,"focus","end","inline")},We.moveFocusToEndOfNextBlock=function(e){e.command(Ge,"focus","end","next","block")},We.moveFocusToEndOfNextInline=function(e){e.command(Ge,"focus","end","next","inline")},We.moveFocusToEndOfNextText=function(e){e.command(Ge,"focus","end","next","text")},We.moveFocusToEndOfNode=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[He,"moveFocusToEndOfNode"].concat(n))},We.moveFocusToEndOfPreviousBlock=function(e){e.command(Ge,"focus","end","previous","block")},We.moveFocusToEndOfPreviousInline=function(e){e.command(Ge,"focus","end","previous","inline")},We.moveFocusToEndOfPreviousText=function(e){e.command(Ge,"focus","end","previous","text")},We.moveFocusToEndOfText=function(e){e.command(Ye,"focus","end","text")},We.moveFocusToStartOfBlock=function(e){e.command(Ye,"focus","start","block")},We.moveFocusToStartOfDocument=function(e){e.moveFocusToStartOfNode(e.value.document).moveToFocus()},We.moveFocusToStartOfInline=function(e){e.command(Ye,"focus","start","inline")},We.moveFocusToStartOfNextBlock=function(e){e.command(Ge,"focus","start","next","block")},We.moveFocusToStartOfNextInline=function(e){e.command(Ge,"focus","start","next","inline")},We.moveFocusToStartOfNextText=function(e){e.command(Ge,"focus","start","next","text")},We.moveFocusToStartOfNode=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[He,"moveFocusToStartOfNode"].concat(n))},We.moveFocusToStartOfPreviousBlock=function(e){e.command(Ge,"focus","start","previous","block")},We.moveFocusToStartOfPreviousInline=function(e){e.command(Ge,"focus","start","previous","inline")},We.moveFocusToStartOfPreviousText=function(e){e.command(Ge,"focus","start","previous","text")},We.moveFocusToStartOfText=function(e){e.command(Ye,"focus","start","text")},We.moveForward=function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=e.moveAnchorForward.apply(e,r)).moveFocusForward.apply(t,r)},We.moveWordForward=function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=e.moveFocusWordForward.apply(e,r)).moveToFocus.apply(t,r)},We.moveStartBackward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Xe,"start"].concat(n))},We.moveStartWordBackward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Qe,"start"].concat(n))},We.moveStartForward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Ze,"start"].concat(n))},We.moveStartWordForward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[$e,"start"].concat(n))},We.moveStartTo=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[He,"moveStartTo"].concat(n))},We.moveStartToEndOfBlock=function(e){e.command(Ye,"start","end","block")},We.moveStartToEndOfDocument=function(e){e.moveStartToEndOfNode(e.value.document).moveToStart()},We.moveStartToEndOfInline=function(e){e.command(Ye,"start","end","inline")},We.moveStartToEndOfNextBlock=function(e){e.command(Ge,"start","end","next","block")},We.moveStartToEndOfNextInline=function(e){e.command(Ge,"start","end","next","inline")},We.moveStartToEndOfNextText=function(e){e.command(Ge,"start","end","next","text")},We.moveStartToEndOfNode=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[He,"moveStartToEndOfNode"].concat(n))},We.moveStartToEndOfPreviousBlock=function(e){e.command(Ge,"start","end","previous","block")},We.moveStartToEndOfPreviousInline=function(e){e.command(Ge,"start","end","previous","inline")},We.moveStartToEndOfPreviousText=function(e){e.command(Ge,"start","end","previous","text")},We.moveStartToEndOfText=function(e){e.command(Ye,"start","end","text")},We.moveStartToStartOfBlock=function(e){e.command(Ye,"start","start","block")},We.moveStartToStartOfDocument=function(e){e.moveStartToStartOfNode(e.value.document).moveToStart()},We.moveStartToStartOfInline=function(e){e.command(Ye,"start","start","inline")},We.moveStartToStartOfNextBlock=function(e){e.command(Ge,"start","start","next","block")},We.moveStartToStartOfNextInline=function(e){e.command(Ge,"start","start","next","inline")},We.moveStartToStartOfNextText=function(e){e.command(Ge,"start","start","next","text")},We.moveStartToStartOfNode=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[He,"moveStartToStartOfNode"].concat(n))},We.moveStartToStartOfPreviousBlock=function(e){e.command(Ge,"start","start","previous","block")},We.moveStartToStartOfPreviousInline=function(e){e.command(Ge,"start","start","previous","inline")},We.moveStartToStartOfPreviousText=function(e){e.command(Ge,"start","start","previous","text")},We.moveStartToStartOfText=function(e){e.command(Ye,"start","start","text")},We.moveTo=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[He,"moveTo"].concat(n))},We.moveToAnchor=function(e){e.command(He,"moveToAnchor")},We.moveToEnd=function(e){e.command(He,"moveToEnd")},We.moveToEndOfBlock=function(e){e.moveEndToEndOfBlock().moveToEnd()},We.moveToEndOfDocument=function(e){e.moveEndToEndOfNode(e.value.document).moveToEnd()},We.moveToEndOfInline=function(e){e.moveEndToEndOfInline().moveToEnd()},We.moveToEndOfNextBlock=function(e){e.moveEndToEndOfNextBlock().moveToEnd()},We.moveToEndOfNextInline=function(e){e.moveEndToEndOfNextInline().moveToEnd()},We.moveToEndOfNextText=function(e){e.moveEndToEndOfNextText().moveToEnd()},We.moveToEndOfNode=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[He,"moveToEndOfNode"].concat(n))},We.moveToEndOfPreviousBlock=function(e){e.moveStartToEndOfPreviousBlock().moveToStart()},We.moveToEndOfPreviousInline=function(e){e.moveStartToEndOfPreviousInline().moveToStart()},We.moveToEndOfPreviousText=function(e){e.moveStartToEndOfPreviousText().moveToStart()},We.moveToEndOfText=function(e){e.moveEndToEndOfText().moveToEnd()},We.moveToFocus=function(e){e.command(He,"moveToFocus")},We.moveToRangeOfDocument=function(e){e.moveToRangeOfNode(e.value.document)},We.moveToRangeOfNode=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[He,"moveToRangeOfNode"].concat(n))},We.moveToStart=function(e){e.command(He,"moveToStart")},We.moveToStartOfBlock=function(e){e.moveStartToStartOfBlock().moveToStart()},We.moveToStartOfDocument=function(e){e.moveStartToStartOfNode(e.value.document).moveToStart()},We.moveToStartOfInline=function(e){e.moveStartToStartOfInline().moveToStart()},We.moveToStartOfNextBlock=function(e){e.moveEndToStartOfNextBlock().moveToEnd()},We.moveToStartOfNextInline=function(e){e.moveEndToStartOfNextInline().moveToEnd()},We.moveToStartOfNextText=function(e){e.moveEndToStartOfNextText().moveToEnd()},We.moveToStartOfNode=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[He,"moveToStartOfNode"].concat(n))},We.moveToStartOfPreviousBlock=function(e){e.moveStartToStartOfPreviousBlock().moveToStart()},We.moveToStartOfPreviousInline=function(e){e.moveStartToStartOfPreviousInline().moveToStart()},We.moveToStartOfPreviousText=function(e){e.moveStartToStartOfPreviousText().moveToStart()},We.moveToStartOfText=function(e){e.moveStartToStartOfText().moveToStart()},We.select=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=G.createProperties(t);var o=n.snapshot,a=void 0!==o&&o,i=e.value,s=i.document,c=i.selection,u={},l=c.setProperties(t);for(var d in l=s.resolveSelection(l),t=f()(l,Object.keys(t)))!0!==a&&Object(r.is)(t[d],c[d])||(u[d]=t[d]);if(c.marks&&!u.marks&&(u.anchor||u.focus)&&(u.marks=null),0!==Object.keys(u).length){var v=f()(c.toJSON(),Object.keys(u));e.applyOperation({type:"set_selection",value:i,properties:v,newProperties:u},a?{skip:!1,merge:!1}:{})}},We.setAnchor=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[He,"setAnchor"].concat(n))},We.setEnd=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[He,"setEnd"].concat(n))},We.setFocus=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[He,"setFocus"].concat(n))},We.setStart=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[He,"setStart"].concat(n))},We.snapshotSelection=function(e){e.withoutMerging(function(){e.select(e.value.selection,{snapshot:!0})})};var et={};function tt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{onConstruct:function(t,n){for(var r in e)t.registerQuery(r);return n()},onQuery:function(t,n,r){var o=t.type,a=t.args,i=e[o];if(!i)return r();var s=i.apply(void 0,[n].concat(P(a)));return void 0===s?r():s}}}et.setData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.value,r=ve.createProperties({data:t}),o=f()(n,Object.keys(r));e.applyOperation({type:"set_value",properties:o,newProperties:r})},et.addAnnotation=function(e,t){t=te.create(t),e.applyOperation({type:"add_annotation",annotation:t})},et.removeAnnotation=function(e,t){t=te.create(t),e.applyOperation({type:"remove_annotation",annotation:t})},et.setAnnotation=function(e,t,n){t=te.create(t),n=te.createProperties(n),e.applyOperation({type:"set_annotation",properties:t,newProperties:n})};var nt=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};O(this,t);var r=S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));for(var o in r.code=e,n)r[o]=n[o];return Error.captureStackTrace?Error.captureStackTrace(r,r.constructor):r.stack=(new Error).stack,r}return N(t,e),t}(Error);function rt(e){var t=e.rules,n=e.document,r=e.blocks,o=e.inlines,a=e.marks,i=e.annotations,s=e.decorations,c=[];if(t&&(c=c.concat(t)),n&&c.push(T({match:[{object:"document"}]},n)),r)for(var u in r)c.push(T({match:[{object:"block",type:u}]},r[u]));if(o)for(var l in o)c.push(T({match:[{object:"inline",type:l}]},o[l]));if(a)for(var d in a)c.push(T({match:[{object:"mark",type:d}]},a[d]));if(i)for(var f in i)c.push(T({match:[{object:"annotation",type:f}]},i[f]));if(s)for(var v in s)c.push(T({match:[{object:"decoration",type:v}]},s[v]));function h(e,t,n){var r=c.filter(function(t){return ot(e,t.match)}),o=at(e,r,c,{every:!0});return o?new nt(o.code,o):n()}return[{normalizeNode:function(e,t,n){var r=h(e,0,function(){});return r?function(){var e=r.rule,n=t.operations.size;e.normalize&&e.normalize(t,r),t.operations.size===n&&function(e,t){var n=t.code,r=t.node,o=t.child,a=t.next,i=t.previous,s=t.key,c=t.mark;switch(n){case"child_max_invalid":case"child_object_invalid":case"child_type_invalid":case"child_unknown":case"first_child_object_invalid":case"first_child_type_invalid":case"last_child_object_invalid":case"last_child_type_invalid":return"text"===o.object&&"block"===r.object&&1===r.nodes.size?e.removeNodeByKey(r.key):e.removeNodeByKey(o.key);case"previous_sibling_object_invalid":case"previous_sibling_type_invalid":return"text"===i.object&&"block"===r.object&&1===r.nodes.size?e.removeNodeByKey(r.key):e.removeNodeByKey(i.key);case"next_sibling_object_invalid":case"next_sibling_type_invalid":return"text"===a.object&&"block"===r.object&&1===r.nodes.size?e.removeNodeByKey(r.key):e.removeNodeByKey(a.key);case"child_min_invalid":case"node_text_invalid":case"parent_object_invalid":case"parent_type_invalid":return"document"===r.object?r.nodes.forEach(function(t){return e.removeNodeByKey(t.key)}):e.removeNodeByKey(r.key);case"node_data_invalid":return void 0===r.data.get(s)&&"document"!==r.object?e.removeNodeByKey(r.key):e.setNodeByKey(r.key,{data:r.data.delete(s)});case"node_mark_invalid":return r.getTexts().forEach(function(t){return e.removeMarkByKey(t.key,0,t.text.length,c)});default:e.removeNodeByKey(r.key)}}(t,r)}:n()},validateNode:h},tt({isAtomic:function(e,t){var n=c.find(function(e){return"isAtomic"in e&&ot(t,e.match)});return n&&n.isAtomic},isVoid:function(e,t){var n=c.find(function(e){return"isVoid"in e&&ot(t,e.match)});return n&&n.isVoid}})]}function ot(e,t){return!at(e,t)}function at(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.every,a=void 0!==o&&o,i=r.match;if("function"===typeof t)return t(e,void 0===i?null:i)?null:ut("node_invalid",{rule:t,node:e});if(Array.isArray(t)){var s=t.length?t:[{}],c=void 0,u=!0,l=!1,d=void 0;try{for(var f,v=s[Symbol.iterator]();!(u=(f=v.next()).done);u=!0){var h=at(e,f.value,n);if(c=c||h,a&&h)return h;if(!a&&!h)return}}catch(Lt){l=!0,d=Lt}finally{try{!u&&v.return&&v.return()}finally{if(l)throw d}}return c}return function(e,t){if(null==t.object)return;if(t.object===e.object)return;if("function"===typeof t.object&&t.object(e.object))return;return ut("node_object_invalid",{rule:t,node:e})}(e,t)||function(e,t){if(null==t.type)return;if(t.type===e.type)return;if("function"===typeof t.type&&t.type(e.type))return;return ut("node_type_invalid",{rule:t,node:e})}(e,t)||function(e,t){if(null==t.data)return;if(null==e.data)return;if("function"===typeof t.data){if(t.data(e.data))return;return ut("node_data_invalid",{rule:t,node:e})}for(var n in t.data){var r=t.data[n],o=e.data&&e.data.get(n),a="function"===typeof r?r(o):r===o;if(!a)return ut("node_data_invalid",{rule:t,node:e,key:n,value:o})}}(e,t)||function(e,t){if(null==t.marks)return;var n="text"===e.object?e.marks.toArray():e.getMarks().toArray(),r=function(n){var r=t.marks.some(function(e){return"function"===typeof e.type?e.type(n.type):e.type===n.type});return r?"continue":{v:ut("node_mark_invalid",{rule:t,node:e,mark:n})}},o=!0,a=!1,i=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value,l=r(u);switch(l){case"continue":continue;default:if("object"===("undefined"===typeof l?"undefined":A(l)))return l.v}}}catch(Lt){a=!0,i=Lt}finally{try{!o&&c.return&&c.return()}finally{if(a)throw i}}}(e,t)||function(e,t){if(null==t.text)return;var n=e.text;if("function"===typeof t.text?t.text(n):t.text.test(n))return;return ut("node_text_invalid",{rule:t,node:e,text:n})}(e,t)||function(e,t){if(null==t.first)return;var n=e.nodes.first();if(!n)return;var r=at(n,t.first);if(!r)return;return r.rule=t,r.node=e,r.child=n,r.code=r.code.replace("node_","first_child_"),r}(e,t)||function(e,t){if(null==t.last)return;var n=e.nodes.last();if(!n)return;var r=at(n,t.last);if(!r)return;return r.rule=t,r.node=e,r.child=n,r.code=r.code.replace("node_","last_child_"),r}(e,t)||function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(null==e.nodes)return;var r=e.nodes,o=null!=t.nodes?t.nodes.slice():[],a=0,i=0,s=null,c=-1,u=null,l=null,d=null,f=null,v=null;function h(){return 0!==o.length&&(u=o.shift(),i=a,a=0,s=u.min||null,l=u.max||null,!0)}function y(){return f=(c+=1)?r.get(c-1):null,d=r.get(c),v=r.get(c+1),!!d&&(i=a,a+=1,!0)}function p(){c>0&&(c-=1,a=i)}null!=t.nodes&&h();for(;y();){var m=it(e,d,n)||st(e,d,f,c,n)||ct(e,d,v,c,n);if(m)return m;if(null!=t.nodes){if(!u)return ut("child_unknown",{rule:t,node:e,child:d,index:c});if(u.match){var g=at(d,u.match);if(g){if(null!=l&&a-1>l)return p(),ut("child_max_invalid",{rule:t,node:e,index:c,child:r.get(c),count:a,limit:l});var k=s;if(h()){if(i-1>=k){c-=1;continue}return null==at(d,u.match)?(p(),ut("child_min_invalid",{rule:t,node:e,index:c,count:i-1,limit:k})):(g.rule=t,g.node=e,g.child=d,g.index=c,g.code=g.code.replace("node_","child_"),g)}return null!=l&&a>l?ut("child_unknown",{rule:t,node:e,child:d,index:c}):(g.rule=t,g.node=e,g.child=d,g.index=c,g.code=g.code.replace("node_","child_"),g)}}}}if(null!=l&&a>l)return ut("child_max_invalid",{rule:t,node:e,index:c-1,count:a,child:r.get(c-1),limit:l});if(null!=t.nodes)do{if(a<s)return ut("child_min_invalid",{rule:t,node:e,index:c,count:a,limit:s})}while(h())}(e,t,n)}function it(e,t,n){var r=!0,o=!1,a=void 0;try{for(var i,s=n[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var c=i.value;if(null!=c.parent&&ot(t,c.match)){var u=at(e,c.parent);if(u)return u.rule=c,u.parent=e,u.node=t,u.code=u.code.replace("node_","parent_"),u}}}catch(Lt){o=!0,a=Lt}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}}function st(e,t,n,r,o){if(n){var a=!0,i=!1,s=void 0;try{for(var c,u=o[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value;if(null!=l.previous&&ot(t,l.match)){var d=at(n,l.previous);if(d)return d.rule=l,d.node=e,d.child=t,d.index=r,d.previous=n,d.code=d.code.replace("node_","previous_sibling_"),d}}}catch(Lt){i=!0,s=Lt}finally{try{!a&&u.return&&u.return()}finally{if(i)throw s}}}}function ct(e,t,n,r,o){if(n){var a=!0,i=!1,s=void 0;try{for(var c,u=o[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value;if(null!=l.next&&ot(t,l.match)){var d=at(n,l.next,[],{match:t});if(d)return d.rule=l,d.node=e,d.child=t,d.index=r,d.next=n,d.code=d.code.replace("node_","next_sibling_"),d}}}catch(Lt){i=!0,s=Lt}finally{try{!a&&u.return&&u.return()}finally{if(i)throw s}}}}function ut(e,t){return T({code:e},t)}function lt(e){e.value.selection.isExpanded&&e.delete()}var dt={};dt.addMark=function(e,t){t=V.create(t);var n=e.value,r=n.document,o=n.selection;if(o.isExpanded)e.addMarkAtRange(o,t);else if(o.marks){var a=o.marks.add(t),i=o.set("marks",a);e.select(i)}else{var s=r.getActiveMarksAtRange(o).add(t),c=o.set("marks",s);e.select(c)}},dt.addMarks=function(e,t){t.forEach(function(t){return e.addMark(t)})},dt.delete=function(e){var t=e.value.selection;e.deleteAtRange(t),e.moveToFocus()},dt.deleteBackward=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.value.selection;n.isExpanded?e.delete():e.deleteBackwardAtRange(n,t)},dt.deleteCharBackward=function(e){var t=e.value.selection;t.isExpanded?e.delete():e.deleteCharBackwardAtRange(t)},dt.deleteLineBackward=function(e){var t=e.value.selection;t.isExpanded?e.delete():e.deleteLineBackwardAtRange(t)},dt.deleteWordBackward=function(e){var t=e.value.selection;t.isExpanded?e.delete():e.deleteWordBackwardAtRange(t)},dt.deleteForward=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.value.selection;n.isExpanded?e.delete():e.deleteForwardAtRange(n,t)},dt.deleteCharForward=function(e){var t=e.value.selection;t.isExpanded?e.delete():e.deleteCharForwardAtRange(t)},dt.deleteLineForward=function(e){var t=e.value.selection;t.isExpanded?e.delete():e.deleteLineForwardAtRange(t)},dt.deleteWordForward=function(e){var t=e.value.selection;t.isExpanded?e.delete():e.deleteWordForwardAtRange(t)},dt.insertBlock=function(e,t){lt(e),t=de.create(t);var n=e.value.selection;e.insertBlockAtRange(n,t);var r=e.value.document.getNode(t.key);r&&e.moveToEndOfNode(r)},dt.insertFragment=function(e,t){if(t.nodes.size){lt(e);var n=e.value,r=n,o=r.document,a=r.selection,i=a.start,s=a.end,c=n,u=c.startText,l=c.endText,d=c.startInline,f=t.getLastText(),v=t.getClosestInline(f.key),h=t.getClosestBlock(f.key),y=t.nodes.first(),p=t.nodes.last(),m=Array.from(o.texts(),function(e){return B(e,1)[0].key}),g=!d||i.isAtStartOfNode(u)||s.isAtStartOfNode(u)||i.isAtEndOfNode(l)||s.isAtEndOfNode(l),k=y.hasBlockChildren()||p.hasBlockChildren();e.insertFragmentAtRange(a,t);var b=(o=(n=e.value).document).getTexts().filter(function(e){return!m.includes(e.key)}),A=g?b.last():b.takeLast(2).first();if(A&&(v||k))e.moveToEndOfNode(A);else if(A){var O=h.nodes,x=O.findLastIndex(function(e){return e&&"inline"===e.object}),w=O.takeLast(O.size-x-1).reduce(function(e,t){return e+t.text.length},0);e.moveToStartOfNode(A).moveForward(w)}}},dt.insertInline=function(e,t){lt(e),t=ae.create(t);var n=e.value.selection;e.insertInlineAtRange(n,t);var r=e.value.document.getNode(t.key);r&&e.moveToEndOfNode(r)},dt.insertText=function(e,t,n){lt(e);var r=e.value,o=r.document,a=r.selection;n=n||a.marks||o.getInsertMarksAtRange(a),e.withoutNormalizing(function(){e.insertTextAtRange(a,t,n),a.marks&&o!==e.value.document&&e.select({marks:null})})},dt.removeMark=function(e,t){t=V.create(t);var n=e.value,r=n.document,o=n.selection;if(o.isExpanded)e.removeMarkAtRange(o,t);else if(o.marks){var a=o.marks.remove(t),i=o.set("marks",a);e.select(i)}else{var s=r.getActiveMarksAtRange(o).remove(t),c=o.set("marks",s);e.select(c)}},dt.replaceMark=function(e,t,n){e.removeMark(t),e.addMark(n)},dt.setBlocks=function(e,t){var n=e.value.selection;e.setBlocksAtRange(n,t)},dt.setInlines=function(e,t){var n=e.value.selection;e.setInlinesAtRange(n,t)},dt.splitBlock=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;lt(e);var n=e.value,r=n.selection,o=n.document,a=r.marks||o.getInsertMarksAtRange(r);e.splitBlockAtRange(r,t).moveToEnd(),a&&0!==a.size&&e.select({marks:a})},dt.splitInline=function(e,t){lt(e);var n=e.value.selection;e.splitInlineAtRange(n,t)},dt.toggleMark=function(e,t){t=V.create(t),e.value.activeMarks.has(t)?e.removeMark(t):e.addMark(t)},dt.unwrapBlock=function(e,t){var n=e.value.selection;e.unwrapBlockAtRange(n,t)},dt.unwrapInline=function(e,t){var n=e.value.selection;e.unwrapInlineAtRange(n,t)},dt.wrapBlock=function(e,t){var n=e.value.selection;e.wrapBlockAtRange(n,t)},dt.wrapInline=function(e,t){var n=e.value.selection;e.wrapInlineAtRange(n,t)},dt.wrapText=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=e.value.selection;e.wrapTextAtRange(r,t,n),r.isCollapsed&&e.moveStartBackward(t.length),e.moveEndBackward(n.length),r.isForward!==e.value.selection.isForward&&e.flip()};var ft=u()("slate:editor"),vt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};O(this,e);var o=n.controller,a=void 0===o?this:o,i=n.construct,s=void 0===i||i,c=t.onChange,u=void 0===c?function(){}:c,l=t.plugins,d=void 0===l?[]:l,f=t.readOnly,v=void 0!==f&&f,h=t.value,y=void 0===h?ve.create():h;this.controller=a,this.middleware={},this.onChange=u,this.operations=Object(r.List)(),this.readOnly=null,this.value=null,this.tmp={dirty:[],flushing:!1,merge:null,normalize:!0,save:!0},function e(t,n){if(Array.isArray(n))return void n.forEach(function(n){return e(t,n)});if(null==n)return;var r=n.commands,o=n.queries,a=n.schema,i=E(n,["commands","queries","schema"]);if(r){var s=xe(r);e(t,s)}if(o){var c=tt(o);e(t,c)}if(a){var u=rt(a);e(t,u)}for(var l in i){var d=i[l],f=t.middleware[l]=t.middleware[l]||[];f.push(d)}}(this,function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).plugins,t=void 0===e?[]:e,n=xe(T({},De,Ie,Ve,We,et,dt)),r=tt({isAtomic:function(){return!1},isVoid:function(){return!1}});return[rt({rules:[{match:{object:"document"},nodes:[{match:{object:"block"}}]},{match:{object:"block",first:{object:"block"}},nodes:[{match:{object:"block"}}]},{match:{object:"block",first:[{object:"inline"},{object:"text"}]},nodes:[{match:[{object:"inline"},{object:"text"}]}]},{match:{object:"inline"},nodes:[{match:[{object:"inline"},{object:"text"}]}]},{match:[{object:"block"},{object:"inline"}],nodes:[{min:1}],normalize:function(e,t){var n=t.code,r=t.node;"child_min_invalid"===n&&r.nodes.isEmpty()&&e.insertNodeByKey(r.key,0,ce.create())}},{match:{object:"block"},first:[{object:"block"},{object:"text"}],last:[{object:"block"},{object:"text"}],normalize:function(e,t){var n=t.code,r=t.node,o=ce.create(),a=void 0;if("first_child_object_invalid"===n)a=0;else{if("last_child_object_invalid"!==n)return;a=r.nodes.size}e.insertNodeByKey(r.key,a,o)}},{match:{object:"inline"},first:[{object:"block"},{object:"text"}],last:[{object:"block"},{object:"text"}],previous:[{object:"block"},{object:"text"}],next:[{object:"block"},{object:"text"}],normalize:function(e,t){var n=t.code,r=t.node,o=t.index,a=ce.create(),i=void 0;if("first_child_object_invalid"===n)i=0;else if("last_child_object_invalid"===n)i=r.nodes.size;else if("previous_sibling_object_invalid"===n)i=o;else{if("next_sibling_object_invalid"!==n)return;i=o+1}e.insertNodeByKey(r.key,i,a)}},{match:{object:"text"},next:function(e,t){return"text"!==e.object||!t.marks.equals(e.marks)},normalize:function(e,t){var n=t.code,r=t.next;"next_sibling_invalid"===n&&e.mergeNodeByKey(r.key)}},{match:{object:"text"},previous:function(e){return"text"!==e.object||""!==e.text},next:function(e){return"text"!==e.object||""!==e.text},normalize:function(e,t){var n=t.code,r=t.next,o=t.previous;"next_sibling_invalid"===n?e.removeNodeByKey(r.key):"previous_sibling_invalid"===n&&e.removeNodeByKey(o.key)}}]})].concat(P(t),[n,r])}({plugins:d})),s&&(this.run("onConstruct"),this.setReadOnly(v),this.setValue(y,n))}return x(e,[{key:"applyOperation",value:function(e){var t=this,n=this.operations,r=this.controller,o=this.value;a()(e)&&(e=T({},e,{value:o})),e=be.create(e),this.withoutNormalizing(function(){r.save(e),o=t.value}),ft("apply",{operation:e}),this.value=e.apply(o),this.operations=n.push(e);var i=function(e){var t=e.type,n=e.node,r=e.path,o=e.newPath;switch(t){case"add_mark":case"insert_text":case"remove_mark":case"remove_text":case"set_mark":case"set_node":var a=z.getAncestors(r).toArray();return[].concat(P(a),[r]);case"insert_node":var i=n.getKeysToPathsTable(),s=Object.values(i).map(function(e){return r.concat(e)}),c=z.getAncestors(r).toArray();return[].concat(P(c),[r],P(s));case"split_node":var u=z.getAncestors(r).toArray(),l=z.increment(r);return[].concat(P(u),[r,l]);case"merge_node":var d=z.getAncestors(r).toArray(),f=z.decrement(r);return[].concat(P(d),[f]);case"move_node":if(z.isEqual(r,o))return[];var v=z.getAncestors(r).reduce(function(t,n){return t.push.apply(t,P(z.transform(n,e).toArray())),t},[]),h=z.getAncestors(o).reduce(function(t,n){return t.push.apply(t,P(z.transform(n,e).toArray())),t},[]);return[].concat(P(v),P(h));case"remove_node":var y=z.getAncestors(r).toArray();return[].concat(P(y));default:return[]}}(e),s=this.tmp.dirty.reduce(function(t,n){n=z.create(n);var r=z.transform(n,e);return t=t.concat(r.toArray())},i);return this.tmp.dirty=s,this.tmp.flushing||(this.tmp.flushing=!0,Promise.resolve().then(function(){return t.flush()})),r}},{key:"flush",value:function(){this.run("onChange");var e=this.value,t=this.operations,n=this.controller,o={value:e,operations:t};return this.operations=Object(r.List)(),this.tmp.flushing=!1,this.onChange(o),n}},{key:"command",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=this.controller;if("function"===typeof e)return e.apply(void 0,[o].concat(n)),ht(this),o;ft("command",{type:e,args:n});var a={type:e,args:n};return this.run("onCommand",a),ht(this),o}},{key:"hasCommand",value:function(e){var t=this.controller;return e in t&&t[e].__command}},{key:"hasQuery",value:function(e){var t=this.controller;return e in t&&t[e].__query}},{key:"normalize",value:function(){var e=this.value,t=this.controller,n=e.document,r=n.getKeysToPathsTable(),o=Object.values(r).map(z.create);this.tmp.dirty=this.tmp.dirty.concat(o),ht(this);var a=e.selection;return n=e.document,a.isUnset&&n.nodes.size&&t.moveToStartOfDocument(),t}},{key:"query",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=this.controller;if("function"===typeof e)return e.apply(void 0,[o].concat(n));ft("query",{type:e,args:n});var a={type:e,args:n};return this.run("onQuery",a)}},{key:"registerCommand",value:function(e){var t=this,n=this.controller;if(e in n&&n[e].__command)return n;Object(s.a)(!(e in n),"You cannot register a `"+e+"` command because it would overwrite an existing property of the `Editor`.");var r=function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.command.apply(t,[e].concat(r))};return n[e]=r,r.__command=!0,n}},{key:"registerQuery",value:function(e){var t=this,n=this.controller;if(e in n&&n[e].__query)return n;Object(s.a)(!(e in n),"You cannot register a `"+e+"` query because it would overwrite an existing property of the `Editor`.");var r=function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.query.apply(t,[e].concat(r))};return n[e]=r,r.__query=!0,n}},{key:"run",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=this.controller,a=this.middleware[e]||[],i=0;function c(){var e=a[i++];if(e){for(var t=arguments.length,r=Array(t),s=0;s<t;s++)r[s]=arguments[s];return r.length&&(n=r),e.apply(void 0,P(n).concat([o,c]))}}return Object.defineProperty(c,"change",{get:function(){Object(s.a)(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}}),Object.defineProperty(c,"onChange",{get:function(){Object(s.a)(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}}),Object.defineProperty(c,"props",{get:function(){Object(s.a)(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}}),Object.defineProperty(c,"schema",{get:function(){Object(s.a)(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}}),Object.defineProperty(c,"stack",{get:function(){Object(s.a)(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}}),c()}},{key:"setReadOnly",value:function(e){return this.readOnly=e,this}},{key:"setValue",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).normalize,n=void 0===t?e!==this.value:t;return this.value=e,n&&this.normalize(),this}},{key:"withoutNormalizing",value:function(e){var t=this.controller,n=this.tmp.normalize;return this.tmp.normalize=!1,e(t),this.tmp.normalize=n,ht(this),t}},{key:"change",value:function(e){Object(i.a)(!1,"As of Slate 0.43 the `change` object has been replaced with `editor`, so the `editor.change()` method is deprecated.`");for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.apply(void 0,[this.controller].concat(n))}},{key:"call",value:function(e){Object(i.a)(!1,"As of Slate 0.43 the `editor.call(fn)` method has been deprecated, please use `editor.command(fn)` instead.");for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,[this.controller].concat(n)),this.controller}},{key:"applyOperations",value:function(e){var t=this;return Object(i.a)(!1,"As of Slate 0.43 the `applyOperations` method is deprecated, please apply each operation in a loop instead."),e.forEach(function(e){return t.applyOperation(e)}),this.controller}},{key:"setOperationFlag",value:function(e,t){return Object(i.a)(!1,"As of slate@0.41 the `change.setOperationFlag` method has been deprecated."),this.tmp[e]=t,this}},{key:"getFlag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.a)(!1,"As of slate@0.41 the `change.getFlag` method has been deprecated."),void 0!==t[e]?t[e]:this.tmp[e]}},{key:"unsetOperationFlag",value:function(e){return Object(i.a)(!1,"As of slate@0.41 the `change.unsetOperationFlag` method has been deprecated."),delete this.tmp[e],this}},{key:"withoutNormalization",value:function(e){return Object(i.a)(!1,"As of slate@0.41 the `change.withoutNormalization` helper has been renamed to `change.withoutNormalizing`."),this.withoutNormalizing(e)}},{key:"editor",get:function(){return Object(i.a)(!1,"As of Slate 0.43 the `change` object has been replaced with `editor`, so you don't need to access `change.editor`."),this.controller}}]),e}();function ht(e){e.tmp.normalize&&e.tmp.dirty.length&&e.withoutNormalizing(function(){for(;e.tmp.dirty.length;){var t=e.tmp.dirty.pop();yt(e,t)}})}function yt(e,t){for(var n=e.controller,r=e.value,o=r.document,a=o.assertNode(t),i=0,s=100+("text"===a.object?1:a.nodes.size);a;){var c=a.normalize(n);if(!c)break;c(n),o=(r=e.value).document;var u=a.key,l=o.getDescendant(t);if(l&&l.key===u)a=l;else{if(!(l=o.getDescendant(u)))break;a=l,t=o.getPath(u)}if(++i>s)throw new Error("A schema rule could not be normalized after sufficient iterations. This is usually due to a `rule.normalize` or `plugin.normalizeNode` function of a schema being incorrectly written, causing an infinite loop.")}}var pt={marks:void 0,text:void 0},mt=function(e){function t(){return O(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,e),x(t,[{key:"updateMark",value:function(e,t){var n=this.marks;if(t.equals(e))return this;if(!n.has(e))return this;var r=n.withMutations(function(n){n.remove(e).add(t)});return this.set("marks",r)}},{key:"addMark",value:function(e){var t=this.marks;return this.set("marks",t.add(e))}},{key:"addMarks",value:function(e){var t=this.marks;return this.set("marks",t.union(e))}},{key:"insertText",value:function(e,t){var n=this.text,r=n.slice(0,e)+t+n.slice(e);return this.set("text",r)}},{key:"removeMark",value:function(e){var t=this.marks;return this.set("marks",t.remove(e))}},{key:"toJSON",value:function(){return{object:this.object,text:this.text,marks:this.marks.toArray().map(function(e){return e.toJSON()})}}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(i.a)(!1,"As of slate@0.47 the `Leaf` model is deprecated."),t.isLeaf(e))return e;if("string"===typeof e&&(e={text:e}),a()(e))return t.fromJSON(e);throw new Error("`Leaf.create` only accepts objects, strings or leaves, but you passed it: "+e)}},{key:"createLeaves",value:function(e){if(e.size<=1)return e;var t=!1,n=Object(r.List)().withMutations(function(n){e.findLast(function(e,r){var o=n.first();if(o){if(o.marks.equals(e.marks))return t=!0,void n.set(0,o.set("text",""+e.text+o.text));if(""===o.text)return t=!0,void n.set(0,e);if(""===e.text)return void(t=!0)}n.unshift(e)})});return t?n:e}},{key:"splitLeaves",value:function(e,t){if(t<0)return[Object(r.List)(),e];if(0===e.size)return[Object(r.List)(),Object(r.List)()];var n=0,o=-1,a=void 0,i=void 0;return e.find(function(e){o++;var r=n,s=e.text;if((n+=s.length)<t)return!1;if(r>t)return!1;var c=t-r;return a=e.set("text",s.slice(0,c)),i=e.set("text",s.slice(c)),!0}),a?""===a.text?0===o?[r.List.of(a),e]:[e.take(o),e.skip(o)]:""===i.text?o===e.size-1?[e,r.List.of(i)]:[e.take(o+1),e.skip(o+1)]:[e.take(o).push(a),e.skip(o+1).unshift(i)]:[e,Object(r.List)()]}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(r.List.isList(e)||Array.isArray(e))return new r.List(e.map(t.create));throw new Error("`Leaf.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var n=e.text,o=void 0===n?"":n,a=e.marks,i=void 0===a?[]:a;return new t({text:o,marks:Object(r.Set)(i.map(V.fromJSON))})}},{key:"isLeafList",value:function(e){return r.List.isList(e)&&e.every(function(e){return t.isLeaf(e)})}}]),t}(Object(r.Record)(pt));function gt(e,t){var n=!0,r=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value,c=!0,u=!1,l=void 0;try{for(var d,f=Object.getOwnPropertyNames(e)[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var v=d.value;if(!s.hasOwnProperty(v)){var h=Object.getOwnPropertyDescriptor(e,v);Object.defineProperty(s,v,h)}}}catch(Lt){u=!0,l=Lt}finally{try{!c&&f.return&&f.return()}finally{if(u)throw l}}var y=!0,p=!1,m=void 0;try{for(var g,k=Object.getOwnPropertyNames(e.prototype)[Symbol.iterator]();!(y=(g=k.next()).done);y=!0){var b=g.value;if(!s.prototype.hasOwnProperty(b)){h=Object.getOwnPropertyDescriptor(e.prototype,b);Object.defineProperty(s.prototype,b,h)}}}catch(Lt){p=!0,m=Lt}finally{try{!y&&k.return&&k.return()}finally{if(p)throw m}}}}catch(Lt){r=!0,o=Lt}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}}Object.entries({Annotation:te,Block:de,Change:Oe,Decoration:H,Document:re,Editor:vt,Inline:ae,Leaf:mt,Mark:V,Node:ue,Operation:be,Point:K,Range:$,Selection:G,Text:ce,Value:ve}).forEach(function(e){var t=B(e,2),n=t[0],r=t[1];return gt(function(e){var t=X[e],n="is"+e.charAt(0).toUpperCase()+e.slice(1),r=function(){function t(){O(this,t)}return x(t,[{key:"object",get:function(){return e}}]),t}();return r[n]=Z.bind(null,e),r.prototype[t]=!0,r}(n.toLowerCase()),[r])}),gt(function(){function e(){O(this,e)}return x(e,[{key:"toJS",value:function(){return this.toJSON.apply(this,arguments)}}],[{key:"fromJS",value:function(){return this.fromJSON.apply(this,arguments)}}]),e}(),[te,de,H,re,ae,mt,V,ue,be,K,$,G,ce,ve]);var kt=!0,bt=Symbol("LEAF"),At=Symbol("STORE_KEY"),Ot=Symbol("undefined"),xt=Symbol("null"),wt=void 0,Tt=new WeakMap;function Nt(e,t){var n=function(t){var n=e[t];if(!n)throw new Error('Object does not have a property named "'+t+'".');e[t]=function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];if(!kt)return n.apply(this,r);Tt.has(this)||Tt.set(this,{noArgs:{},hasArgs:{}});var a=Tt.get(this),i=a.noArgs,s=a.hasArgs,c=0!==r.length,u=void 0,l=void 0;if((u=c?function(e,t){var n=!0,r=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value;if(void 0===s?s=Ot:null==s&&(s=xt),(e="object"===("undefined"===typeof s?"undefined":A(s))?e[At]&&e[At].get(s):e[s])===wt)return wt}}catch(Lt){r=!0,o=Lt}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return e[bt]}(s,l=[t].concat(r)):i[t])!==wt)return u===Ot?void 0:u;var d=n.apply(this,r),f=void 0===d?Ot:d;return c?function(e,t,n){var r=e,o=!0,a=!1,i=void 0;try{for(var s,c=t[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;if(void 0===u?u=Ot:null==u&&(u=xt),"object"===("undefined"===typeof u?"undefined":A(u)))if(r[At]||(r[At]=new WeakMap),r[At].has(u))r=r[At].get(u);else{var l={};r[At].set(u,l),r=l}else r[u]||(r[u]={}),r=r[u]}}catch(Lt){a=!0,i=Lt}finally{try{!o&&c.return&&c.return()}finally{if(a)throw i}}r[bt]=n}(s,l,f):i[t]=f,d}},r=!0,o=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){n(i.value)}}catch(Lt){o=!0,a=Lt}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}}var Et=function(){function e(){O(this,e)}return x(e,[{key:"getFirstText",value:function(){if("text"===this.object)return this;var e=null,t=this.nodes.find(function(t){return"text"===t.object||!!(e=t.getFirstText())});return e||t}},{key:"getKeysToPathsTable",value:function(){var e=w({},this.key,[]);return this.nodes&&this.nodes.forEach(function(t,n){var r=t.getKeysToPathsTable();for(var o in r){var a=r[o];Object(i.a)(!(o in e),'A node with a duplicate key of "'+o+'" was found! Duplicate keys are not allowed, you should use `node.regenerateKey` before inserting if you are reusing an existing node.'),e[o]=[n].concat(P(a))}}),e}},{key:"getLastText",value:function(){if("text"===this.object)return this;var e=null,t=this.nodes.findLast(function(t){return"text"===t.object||(e=t.getLastText())});return e||t}},{key:"getNode",value:function(e){return(e=this.resolvePath(e))?"text"===this.object&&e.size?null:e.size?this.getDescendant(e):this:null}},{key:"getPath",value:function(e){if(r.List.isList(e))return e;if(ue.isNode(e)&&this.descendants){var t=!0,n=!1,o=void 0;try{for(var a,i=this.descendants()[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var s=a.value,c=B(s,2),u=c[0],l=c[1];if(e===u)return l}}catch(Lt){n=!0,o=Lt}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}}var d=this.getKeysToPathsTable()[e];return d?Object(r.List)(d):null}},{key:"getText",value:function(){return"text"===this.object?this.text:this.nodes.reduce(function(e,t){return e+t.text},"")}},{key:"hasNode",value:function(e){return!!this.getNode(e)}},{key:"normalize",value:function(e){return e.run("normalizeNode",this)}},{key:"regenerateKey",value:function(){var e=b.create();return this.set("key",e)}},{key:"resolvePath",value:function(e,t){return"string"===typeof e?(e=this.getPath(e),null!=t&&(e=e.concat(t))):e=z.create(e),e}},{key:"validate",value:function(e){return e.run("validateNode",this)}}]),e}();Nt(Et.prototype,["getFirstText","getKeysToPathsTable","getLastText","getText","normalize","validate"]),gt(Et,[de,re,ae,ce]);var St="undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};function Bt(){return!0}var Pt=function(){function e(){O(this,e)}return x(e,[{key:"addMark",value:function(e,t){e=this.resolvePath(e);var n=this.assertDescendant(e);return n=n.addMark(t),this.replaceNode(e,n)}},{key:"ancestors",value:function(e){return this.createIterable({path:e,direction:null,downward:!1,includeTargetAncestors:!0,includeRoot:!0})}},{key:"blocks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onlyLeaves,n=e.onlyRoots,r=e.onlyTypes,o=e.match,a=E(e,["onlyLeaves","onlyRoots","onlyTypes","match"]);return this.descendants(T({includeDocument:!1,includeInlines:!1,includeTexts:!1},a,{match:function(e,a){return!(r&&!r.includes(e.type))&&((!n||1===a.size)&&(!(t&&!e.isLeafBlock())&&!(o&&!o(e,a))))}}))}},{key:"createAnnotation",value:function(e){return e=te.createProperties(e),this.resolveAnnotation(e)}},{key:"createDecoration",value:function(e){return e=H.createProperties(e),this.resolveDecoration(e)}},{key:"createIterable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.direction,n=void 0===t?"forward":t,r=e.downward,o=void 0===r||r,a=e.upward,i=void 0===a||a,s=e.includeBlocks,c=void 0===s||s,u=e.includeDocument,l=void 0===u||u,d=e.includeInlines,f=void 0===d||d,v=e.includeRoot,h=void 0!==v&&v,y=e.includeTarget,p=void 0===y?!!e.range:y,m=e.includeTargetAncestors,g=void 0!==m&&m,k=e.includeTexts,b=void 0===k||k,A=e.match,O=void 0===A?null:A,x=this,T=null,N=null;e.range?(N=x.resolveRange(e.range),T=x.resolvePath(N.start.path)):e.path&&(T=x.resolvePath(e.path));var E=T&&x.assertNode(T),S="undefined"===typeof window?St.Set:window.Set;return w({},Symbol.iterator,function(){var e=new S,t=N&&N.start.path,r=N&&N.end.path,a=T,s=E,u=!1,d=!1,v=!1,y=function(){return a&&s?(h||s!==x)&&(c||"block"!==s.object)&&(l||"document"!==s.object)&&(f||"inline"!==s.object)&&(b||"text"!==s.object)?O&&!O(s,a)?m():{value:[s,a],done:!1}:m():{done:!0}},m=function c(){if(!a||!s)return y();if(t&&!d)return v?a.size===t.size-1?(d=!0,a=T,s=E,c()):(a=t.slice(0,a.size+1),s=x.assertNode(a),y()):(v=!0,a=z.create([]),s=x,y());if(p&&!u)return u=!0,y();if(r&&a.equals(r))return s=null,a=null,c();if(o&&s.nodes&&s.nodes.size&&!e.has(s)){e.add(s);var l="forward"===n?0:s.nodes.size-1;return a=a.push(l),s=x.assertNode(a),y()}if("forward"===n){var f=z.increment(a),h=x.getNode(f);if(h)return a=f,s=h,y()}if("backward"===n&&0!==a.last()){var m=z.decrement(a),k=x.getNode(m);if(k)return a=m,s=k,y()}return i&&a.size?(a=z.lift(a),s=x.assertNode(a),e.has(s)?c():(e.add(s),g?y():c())):(a=null,s=null,c())};return{next:m}})}},{key:"createPoint",value:function(e){return e=K.createProperties(e),this.resolvePoint(e)}},{key:"createRange",value:function(e){return e=$.createProperties(e),this.resolveRange(e)}},{key:"createSelection",value:function(e){return e=G.createProperties(e),this.resolveSelection(e)}},{key:"descendants",value:function(e){return this.createIterable(T({path:[]},e))}},{key:"filterDescendants",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,t=[],n=!0,o=!1,a=void 0;try{for(var i,s=this.descendants()[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var c=i.value,u=B(c,2),l=u[0];e(l,u[1])&&t.push(l)}}catch(Lt){o=!0,a=Lt}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}return Object(r.List)(t)}},{key:"findDescendant",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,t=!0,n=!1,r=void 0;try{for(var o,a=this.descendants()[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value,s=B(i,2),c=s[0];if(e(c,s[1]))return c}}catch(Lt){n=!0,r=Lt}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}return null}},{key:"forEachDescendant",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,t=!0,n=!1,r=void 0;try{for(var o,a=this.descendants()[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;if(!1===e.apply(void 0,P(i)))return}}catch(Lt){n=!0,r=Lt}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}}},{key:"getActiveMarksAtRange",value:function(e){if((e=this.resolveRange(e)).isUnset)return Object(r.Set)();if(e.isCollapsed){var t=e.start;return this.getInsertMarksAtPoint(t)}var n=e,o=n.start,a=n.end,i=o.path,s=o.offset,c=a.path,u=a.offset,l=this.getDescendant(i),d=this.getDescendant(c);if(!i.equals(c)){for(;!i.equals(c)&&0===u;){var f=this.texts({path:c,direction:"backward"}),v=B(f,1),h=B(v[0],2);d=h[0],c=h[1],u=d.text.length}for(;!i.equals(c)&&s===l.text.length;){var y=this.texts({path:i}),p=B(y,1),m=B(p[0],2);l=m[0],i=m[1],s=0}}if(i.equals(c))return l.marks;var g=l.marks;if(0===g.size)return Object(r.Set)();var k=d.marks,b=g.intersect(k);if(0===b.size)return b;var A=this.texts({path:i}),O=B(A,1),x=B(O[0],2);for(l=x[0],i=x[1];!i.equals(c);){if(0!==l.text.length&&0===(b=b.intersect(l.marks)).size)return Object(r.Set)();var w=this.texts({path:i}),T=B(w,1),N=B(T[0],2);l=N[0],i=N[1]}return b}},{key:"getAncestors",value:function(e){var t=this.ancestors(e),n=Array.from(t,function(e){return B(e,1)[0]}).reverse();return Object(r.List)(n)}},{key:"getBlocks",value:function(){var e=this.blocks({onlyLeaves:!0}),t=Array.from(e,function(e){return B(e,1)[0]});return Object(r.List)(t)}},{key:"getBlocksByType",value:function(e){var t=this.blocks({onlyLeaves:!0,onlyTypes:[e]}),n=Array.from(t,function(e){return B(e,1)[0]});return Object(r.List)(n)}},{key:"getChild",value:function(e){return!(e=this.resolvePath(e))||e.size>1?null:this.nodes.get(e.first())}},{key:"getClosest",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var a,i=this.ancestors(e)[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value,c=B(s,2),u=c[0];if(t(u,c[1]))return u}}catch(Lt){r=!0,o=Lt}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return null}},{key:"getClosestBlock",value:function(e){return this.getClosest(e,function(e){return"block"===e.object})}},{key:"getClosestInline",value:function(e){return this.getClosest(e,function(e){return"inline"===e.object})}},{key:"getClosestVoid",value:function(e,t){return Object(s.a)(!ve.isValue(t),"As of Slate 0.42.0, the `node.getClosestVoid` method takes an `editor` instead of a `value`."),this.getClosest(e,function(e){return t.isVoid(e)})}},{key:"getCommonAncestor",value:function(e,t){if(e=this.resolvePath(e),t=this.resolvePath(t),!e||!t)return null;var n=z.relate(e,t);return this.getNode(n)}},{key:"getDecorations",value:function(e){var t=e.run("decorateNode",this);return t=H.createList(t)}},{key:"getDepth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(e=this.resolvePath(e))&&this.getNode(e)?e.size-1+t:null}},{key:"getDescendant",value:function(e){if(!(e=this.resolvePath(e))||!e.size)return null;var t=this;return e.forEach(function(e){return!!(t=t.getIn(["nodes",e]))}),t}},{key:"getDescendantsAtRange",value:function(e){var t=this.descendants({range:e}),n=Array.from(t,function(e){return B(e,1)[0]});return Object(r.List)(n)}},{key:"getFragmentAtRange",value:function(e){if((e=this.resolveRange(e)).isUnset)return re.create();for(var t=e,n=t.start,r=t.end,o=this,a=r.path,i=r.offset,s="end";a.size;){var c=a.last();o=o.splitNode(a,i),i=c+1,(a=z.lift(a)).size||"end"!==s||(a=n.path,i=n.offset,s="start")}var u=n.path.first()+1,l=r.path.first()+2,d=o.nodes.slice(u,l);return re.create({nodes:d})}},{key:"getFurthest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bt,n=this.ancestors(e),r=Array.from(n).reverse(),o=!0,a=!1,i=void 0;try{for(var s,c=r[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value,l=B(u,2),d=l[0];if(t(d,l[1]))return d}}catch(Lt){a=!0,i=Lt}finally{try{!o&&c.return&&c.return()}finally{if(a)throw i}}return null}},{key:"getFurthestBlock",value:function(e){return this.getFurthest(e,function(e){return"block"===e.object})}},{key:"getFurthestChild",value:function(e){return(e=this.resolvePath(e))&&e.size?this.nodes.get(e.first()):null}},{key:"getFurthestInline",value:function(e){return this.getFurthest(e,function(e){return"inline"===e.object})}},{key:"getInlines",value:function(){var e=this.inlines({onlyLeaves:!0}),t=Array.from(e,function(e){return B(e,1)[0]});return Object(r.List)(t)}},{key:"getInlinesByType",value:function(e){var t=this.inlines({onlyLeaves:!0,onlyTypes:[e]}),n=Array.from(t,function(e){return B(e,1)[0]});return Object(r.List)(n)}},{key:"getInsertMarksAtPoint",value:function(e){var t=e=this.resolvePoint(e),n=t.path,r=t.offset,o=this.getDescendant(n);if(0!==r)return o.marks;var a=void 0,i=void 0,s=!0,c=!1,u=void 0;try{for(var l,d=this.ancestors(n)[Symbol.iterator]();!(s=(l=d.next()).done);s=!0){var f=l.value,v=B(f,2),h=v[0],y=v[1];"block"===h.object&&(a=h,i=y)}}catch(Lt){c=!0,u=Lt}finally{try{!s&&d.return&&d.return()}finally{if(c)throw u}}var p=z.drop(n,i.size),m=a.texts({path:p,direction:"backward"}),g=B(m,1)[0];return g?B(g,1)[0].marks:o.marks}},{key:"getInsertMarksAtRange",value:function(e){var t=(e=this.resolveRange(e)).start;return e.isUnset?Object(r.Set)():e.isCollapsed?this.getInsertMarksAtPoint(t):this.getDescendant(t.path).marks}},{key:"getLeafBlocksAtRange",value:function(e){var t=this.blocks({range:e,onlyLeaves:!0}),n=Array.from(t,function(e){return B(e,1)[0]});return Object(r.List)(n)}},{key:"getLeafInlinesAtRange",value:function(e){var t=this.inlines({range:e,onlyLeaves:!0}),n=Array.from(t,function(e){return B(e,1)[0]});return Object(r.List)(n)}},{key:"getNodesToPathsMap",value:function(){var e="undefined"===typeof window?new St.Map:new window.Map;return e.set(this,z.create([])),this.forEachDescendant(function(t,n){e.set(t,n)}),e}},{key:"getMarks",value:function(){var e=this.marks(),t=Array.from(e,function(e){return B(e,1)[0]});return Object(r.OrderedSet)(t)}},{key:"getMarksAtRange",value:function(e){var t=this.marks({range:e}),n=Array.from(t,function(e){return B(e,1)[0]});return Object(r.OrderedSet)(n)}},{key:"getMarksByType",value:function(e){var t=this.marks({onlyTypes:[e]}),n=Array.from(t,function(e){return B(e,1)[0]});return Object(r.OrderedSet)(n)}},{key:"getNextBlock",value:function(e){var t=this.blocks({path:e,onlyLeaves:!0}),n=B(t,1)[0];return n?n[0]:null}},{key:"getNextNode",value:function(e){var t=this.createIterable({path:e,downward:!1}),n=B(t,1)[0];return n?n[0]:null}},{key:"getNextSibling",value:function(e){var t=this.siblings(e),n=B(t,1)[0];return n?n[0]:null}},{key:"getNextText",value:function(e){var t=this.texts({path:e}),n=B(t,1)[0];return n?n[0]:null}},{key:"getOffset",value:function(e){e=this.resolvePath(e),this.assertDescendant(e);var t=e.first(),n=this.nodes.slice(0,t).reduce(function(e,t){return e+t.text.length},0);return 1===e.size?n:n+this.nodes.get(t).getOffset(z.drop(e))}},{key:"getOffsetAtRange",value:function(e){if((e=this.resolveRange(e)).isUnset)throw new Error("The range cannot be unset to calculcate its offset.");if(e.isExpanded)throw new Error("The range must be collapsed to calculcate its offset.");var t=e.start;return this.getOffset(t.path)+t.offset}},{key:"getParent",value:function(e){if(!(e=this.resolvePath(e)))return null;if(!e.size)return null;var t=z.lift(e);return this.getNode(t)}},{key:"getPreviousBlock",value:function(e){var t=this.blocks({path:e,onlyLeaves:!0,direction:"backward"}),n=B(t,1)[0];return n?n[0]:null}},{key:"getPreviousNode",value:function(e){var t=this.createIterable({path:e,downward:!1,direction:"backward"}),n=B(t,1)[0];return n?n[0]:null}},{key:"getPreviousSibling",value:function(e){var t=this.siblings(e,{direction:"backward"}),n=B(t,1)[0];return n?n[0]:null}},{key:"getPreviousText",value:function(e){var t=this.texts({path:e,direction:"backward"}),n=B(t,1)[0];return n?n[0]:null}},{key:"getRootBlocksAtRange",value:function(e){var t=this.blocks({range:e,onlyRoots:!0}),n=Array.from(t,function(e){return B(e,1)[0]});return Object(r.List)(n)}},{key:"getRootInlinesAtRange",value:function(e){var t=this.inlines({range:e,onlyRoots:!0}),n=Array.from(t,function(e){return B(e,1)[0]});return Object(r.List)(n)}},{key:"getTextAtOffset",value:function(e){if(0===e)return this.getFirstText();if(e===this.text.length)return this.getLastText();if(e<0||e>this.text.length)return null;var t=0,n=!0,r=!1,o=void 0;try{for(var a,i=this.texts()[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value,c=B(s,1)[0];if((t+=c.text.length)>e)return c}}catch(Lt){r=!0,o=Lt}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return null}},{key:"getTextDirection",value:function(){var e=p()(this.text);return"neutral"===e?null:e}},{key:"getTexts",value:function(){var e=this.texts(),t=Array.from(e,function(e){return B(e,1)[0]});return Object(r.List)(t)}},{key:"getTextsAtRange",value:function(e){var t=this.texts({range:e}),n=Array.from(t,function(e){return B(e,1)[0]});return Object(r.List)(n)}},{key:"hasBlockChildren",value:function(){return!(!this.nodes||!this.nodes.find(function(e){return"block"===e.object}))}},{key:"hasChild",value:function(e){return!!this.getChild(e)}},{key:"hasInlineChildren",value:function(){return!(!this.nodes||!this.nodes.find(function(e){return"inline"===e.object||"text"===e.object}))}},{key:"hasDescendant",value:function(e){return!!this.getDescendant(e)}},{key:"hasVoidParent",value:function(e,t){return Object(s.a)(!ve.isValue(t),"As of Slate 0.42.0, the `node.hasVoidParent` method takes an `editor` instead of a `value`."),!!this.getClosestVoid(e,t)}},{key:"inlines",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.onlyLeaves,r=t.onlyRoots,o=t.onlyTypes,a=t.match,i=E(t,["onlyLeaves","onlyRoots","onlyTypes","match"]);return this.descendants(T({includeBlocks:!1,includeTexts:!1,includeDocument:!1},i,{match:function(t,i){return!(o&&!o.includes(t.type))&&(!(n&&!t.isLeafInline())&&((!r||"block"===e.getParent(i).object)&&!(a&&!a(t,i))))}}))}},{key:"insertNode",value:function(e,t){var n=(e=this.resolvePath(e)).last(),r=z.lift(e),o=this.assertNode(r),a=o.nodes.splice(n,0,t);return o=o.set("nodes",a),this.replaceNode(r,o)}},{key:"insertText",value:function(e,t,n){e=this.resolvePath(e);var r=this.assertDescendant(e);return r=r.insertText(t,n),this.replaceNode(e,r)}},{key:"isLeafBlock",value:function(){return"block"===this.object&&!this.nodes.some(function(e){return"block"===e.object})}},{key:"isLeafInline",value:function(){return"inline"===this.object&&!this.nodes.some(function(e){return"inline"===e.object})}},{key:"isInRange",value:function(e,t){if(e=this.resolvePath(e),(t=this.resolveRange(t)).isUnset)return!1;var n=z.compare(e,t.start.path),r=z.compare(e,t.end.path),o=-1!==n&&1!==r;return o}},{key:"mapChildren",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,n=this.nodes;return n.forEach(function(r,o){var a=t(r,o,e.nodes);a!==r&&(n=n.set(a.key,a))}),this.set("nodes",n)}},{key:"mapDescendants",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,n=this.nodes;return n.forEach(function(r,o){var a=r;"text"!==a.object&&(a=a.mapDescendants(t)),(a=t(a,o,e.nodes))!==r&&(n=n.set(o,a))}),this.set("nodes",n)}},{key:"marks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onlyTypes,n=void 0===t?null:t,r=e.match,o=E(e,["onlyTypes","match"]),a=this.texts(o);return w({},Symbol.iterator,function(){var e=a[Symbol.iterator](),t=null,o=null,i=[];return{next:function a(){if(i.length){var s=i.shift();return n&&!n.includes(s.type)?a():r&&!r(s,t,o)?a():{value:[s,t,o],done:!1}}var c=e.next(),u=c.value;if(c.done)return{done:!0};var l=B(u,2);return t=l[0],o=l[1],i=t.marks.toArray(),a()}}})}},{key:"mergeNode",value:function(e){var t=this.assertNode(e);if(0===(e=this.resolvePath(e)).last())throw new Error("Unable to merge node because it has no previous sibling: "+t);var n=z.decrement(e),r=this.assertNode(n);if(r.object!==t.object)throw new Error("Unable to merge two different kinds of nodes: "+r+" and "+t);var o="text"===r.object?r.mergeText(t):r.set("nodes",r.nodes.concat(t.nodes)),a=this;return a=(a=(a=a.removeNode(e)).removeNode(n)).insertNode(n,o)}},{key:"moveNode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.assertNode(e);e=this.resolvePath(e),t=this.resolvePath(t,n);var o=z.lift(t);this.assertNode(o);var a=be.create({type:"move_node",path:e,newPath:t});t=z.transform(e,a).first();var i=this;return i=(i=i.removeNode(e)).insertNode(t,r)}},{key:"removeMark",value:function(e,t){e=this.resolvePath(e);var n=this.assertDescendant(e);return n=n.removeMark(t),this.replaceNode(e,n)}},{key:"removeNode",value:function(e){this.assertDescendant(e);var t=(e=this.resolvePath(e)).flatMap(function(e){return["nodes",e]});return this.deleteIn(t)}},{key:"removeText",value:function(e,t,n){var r=this.assertDescendant(e);return r=r.removeText(t,n.length),this.replaceNode(e,r)}},{key:"replaceNode",value:function(e,t){if(!(e=this.resolvePath(e)))throw new Error("Unable to replace a node because it could not be found in the first place: "+e);if(!e.size)return t;this.assertNode(e);var n=e.flatMap(function(e){return["nodes",e]});return this.setIn(n,t)}},{key:"resolveAnnotation",value:function(e){return e=(e=te.create(e)).normalize(this)}},{key:"resolveDecoration",value:function(e){return e=(e=H.create(e)).normalize(this)}},{key:"resolvePoint",value:function(e){return e=(e=K.create(e)).normalize(this)}},{key:"resolveRange",value:function(e){return e=(e=$.create(e)).normalize(this)}},{key:"resolveSelection",value:function(e){return e=(e=G.create(e)).normalize(this)}},{key:"setNode",value:function(e,t){var n=this.assertNode(e);return n=n.merge(t),this.replaceNode(e,n)}},{key:"setMark",value:function(e,t,n){e=this.resolvePath(e);var r=this.assertDescendant(e);return r=r.setMark(t,n),this.replaceNode(e,r)}},{key:"siblings",value:function(e,t){return this.createIterable(T({path:e,upward:!1,downward:!1},t))}},{key:"splitNode",value:function(e,t,n){var r=this.assertNode(e);e=this.resolvePath(e);var o=void 0,a=void 0;if("text"===r.object){var i=r.splitText(t),s=B(i,2);o=s[0],a=s[1]}else{var c=r.nodes.take(t),u=r.nodes.skip(t);o=r.set("nodes",c),a=r.set("nodes",u).regenerateKey()}n&&"text"!==r.object&&(a=a.merge(n));var l=this;return l=(l=(l=l.removeNode(e)).insertNode(e,a)).insertNode(e,o)}},{key:"texts",value:function(e){return this.descendants(T({includeBlocks:!1,includeInlines:!1,includeDocument:!1},e))}},{key:"getBlocksAtRange",value:function(e){return Object(i.a)(!1,"As of slate@0.44 the `node.getBlocksAtRange` method has been renamed to `getLeafBlocksAtRange`."),this.getLeafBlocksAtRange(e)}},{key:"getBlocksAtRangeAsArray",value:function(e){return Object(i.a)(!1,"As of slate@0.44 the `node.getBlocksAtRangeAsArray` method has been renamed to `getLeafBlocksAtRangeAsArray`."),this.getLeafBlocksAtRangeAsArray(e)}},{key:"getInlinesAtRange",value:function(e){return Object(i.a)(!1,"As of slate@0.44 the `node.getInlinesAtRange` method has been renamed to `getLeafInlinesAtRange`."),this.getLeafInlinesAtRange(e)}},{key:"getInlinesAtRangeAsArray",value:function(e){return Object(i.a)(!1,"As of slate@0.44 the `node.getInlinesAtRangeAsArray` method has been renamed to `getLeafInlinesAtRangeAsArray`."),this.getLeafInlinesAtRangeAsArray(e)}},{key:"getNextTextAndPath",value:function(e){return Object(i.a)(!1,"As of slate@0.47, the `getNextTextAndPath` method has been renamed to `getNextTextEntry`."),this.getNextTextEntry(e)}},{key:"getNextDeepMatchingNodeAndPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};Object(i.a)(!1,"As of slate@0.47, the `getNextDeepMatchingNodeAndPath` method is deprecated.");var n=this.getNextMatchingNodeAndPath(e);if(!n)return null;for(var r=B(n,2),o=r[0],a=r[1],s=void 0;s="text"!==o.object&&o.findFirstDescendantAndPath(t,a);){var c=B(s,2);o=c[0],a=c[1]}return o?t(o)?[o,a]:this.getNextDeepMatchingNodeAndPath(n[1],t):null}},{key:"getPreviousTextAndPath",value:function(e){return Object(i.a)(!1,"As of slate@0.47, the `getPreviousTextAndPath` method has been renamed to `getPreviousTextEntry`."),this.getPreviousTextEntry(e)}},{key:"findFirstDescendantAndPath",value:function(e,t){return Object(i.a)(!1,"As of slate@0.47, the `findFirstDescendantAndPath` method is deprecated."),this.findDescendantAndPath(e,t,!1)}},{key:"getPreviousMatchingNodeAndPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};if(Object(i.a)(!1,"As of slate@0.47, the `getPreviousMatchingNodeAndPath` method is deprecated."),!e)return null;for(var n=e.size;n>0;n--){var r=e.slice(0,n);if(0!==r.last()){for(var o=z.decrement(r),a=this.getNode(o);a&&!t(a);)o=z.decrement(o),a=this.getNode(o);if(a)return[a,o]}}return null}},{key:"getPreviousDeepMatchingNodeAndPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};Object(i.a)(!1,"As of slate@0.47, the `getPreviousDeepMatchingNodeAndPath` method is deprecated.");var n=this.getPreviousMatchingNodeAndPath(e);if(!n)return null;for(var r=B(n,2),o=r[0],a=r[1],s=void 0;s="text"!==o.object&&o.findLastDescendantAndPath(t,a);){var c=B(s,2);o=c[0],a=c[1]}return o?t(o)?[o,a]:this.getPreviousDeepMatchingNodeAndPath(n[1],t):null}},{key:"findLastDescendantAndPath",value:function(e,t){return Object(i.a)(!1,"As of slate@0.47, the `findLastDescendantAndPath` method is deprecated."),this.findDescendantAndPath(e,t,!0)}},{key:"findDescendantAndPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.create([]),n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(i.a)(!1,"As of slate@0.47, the `findDescendantAndPath` method is deprecated.");var r=void 0,o=void 0;return this.forEachDescendantWithPath(function(t,n,a){if(e(t,n,a))return r=t,o=n,!1},t,n),r?[r,o]:null}},{key:"forEachDescendantWithPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.create([]),n=arguments[2];Object(i.a)(!1,"As of slate@0.47, the `forEachDescendantWithPath` method is deprecated.");var r=this.nodes,o=void 0;return n&&(r=r.reverse()),r.forEach(function(a,i){var s=t.concat(i);return!1===e(a,s,r)?(o=!1,!1):"text"!==a.object?o=a.forEachDescendantWithPath(e,s,n):void 0}),o}},{key:"getNextMatchingNodeAndPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};if(Object(i.a)(!1,"As of slate@0.47, the `getNextMatchingNodeAndPath` method is deprecated."),!e)return null;for(var n=e.size;n>0;n--){for(var r=e.slice(0,n),o=z.increment(r),a=this.getNode(o);a&&!t(a);)o=z.increment(o),a=this.getNode(o);if(a)return[a,o]}return null}},{key:"getSelectionIndexes",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(i.a)(!1,"As of slate@0.47, the `getSelectionIndexes` method is deprecated.");var n=e.start,r=e.end;if(!t)return null;if(e.isUnset)return null;if(n.path.equals(r.path)){var o=this.getFurthestAncestor(n.path),a=o?this.nodes.indexOf(o):null;return{start:a,end:a+1}}var s=null,c=null;return this.nodes.forEach(function(e,t){return"text"===e.object?(null==s&&e.key===n.key&&(s=t),null==c&&e.key===r.key&&(c=t+1)):(null==s&&e.hasDescendant(n.key)&&(s=t),null==c&&e.hasDescendant(r.key)&&(c=t+1)),null==s||null==c}),t&&null==s&&(s=0),t&&null==c&&(c=this.nodes.size),null==s?null:{start:s,end:c}}},{key:"getTextsBetweenPositionsAsArray",value:function(e,t){return Object(i.a)(!1,"As of slate@0.47, the `getTextsBetweenPositionsAsArray` method is deprecated."),e=this.resolvePath(e),t=this.resolvePath(t),this.getTextsBetweenPathPositionsAsArray(e,t)}},{key:"getOrderedMarksBetweenPositions",value:function(e,t,n,o){Object(i.a)(!1,"As of slate@0.47, the `getOrderedMarksBetweenPositions` method is deprecated."),e=this.resolvePath(e),n=this.resolvePath(n);var a=this.getDescendant(e);if(z.isEqual(e,n))return a.marks;var s=this.getTextsBetweenPathPositionsAsArray(e,n);return Object(r.OrderedSet)().withMutations(function(e){s.forEach(function(t){e.union(t.marks)})})}},{key:"getTextsBetweenPathPositionsAsArray",value:function(e,t){if(Object(i.a)(!1,"As of slate@0.47, the `getTextsBetweenPathPositionsAsArray` method is deprecated."),e&&t&&z.isEqual(e,t))return[this.getDescendant(e)];if(!e&&!t)return this.getTextsAsArray();var n=e?e.get(0,0):0,r=t?t.get(0,this.nodes.size-1):this.nodes.size-1,o=[];return this.nodes.slice(n,r+1).forEach(function(a,i){if("text"===a.object)o.push(a);else{var s=e&&0===i?z.drop(e):null,c=t&&i===r-n?z.drop(t):null;o=o.concat(a.getTextsBetweenPathPositionsAsArray(s,c))}}),o}},{key:"getFurthestAncestor",value:function(e){return Object(i.a)(!1,"As of slate@0.47, the `getFurthestAncestor` method has been renamed to `getFurthestChild`."),this.getFurthestChild(e)}},{key:"getLeafBlocksAtRangeAsArray",value:function(e){if(Object(i.a)(!1,"As of slate@0.47, the `getLeafBlocksAtRangeAsArray` method is deprecated."),(e=this.resolveRange(e)).isUnset)return[];var t=e,n=t.start,r=t.end;return this.getLeafBlocksBetweenPathPositionsAsArray(n.path,r.path)}},{key:"getLeafBlocksBetweenPathPositionsAsArray",value:function(e,t){if(Object(i.a)(!1,"As of slate@0.47, the `getLeafBlocksBetweenPathPositionsAsArray` method is deprecated."),e&&t&&z.isEqual(e,t))return[this.getClosestBlock(e)];if(!e&&!t)return this.getBlocksAsArray();var n=e?e.get(0,0):0,r=t?t.get(0,this.nodes.size-1):this.nodes.size-1,o=[];return this.nodes.slice(n,r+1).forEach(function(a,i){if("block"===a.object)if(a.isLeafBlock())o.push(a);else{var s=e&&0===i?z.drop(e):null,c=t&&i===r-n?z.drop(t):null;o=o.concat(a.getLeafBlocksBetweenPathPositionsAsArray(s,c))}}),o}},{key:"getBlocksAsArray",value:function(){Object(i.a)(!1,"As of slate@0.47, the `getBlocksAsArray` method is deprecated.");var e=this.blocks({onlyLeaves:!0});return Array.from(e,function(e){return B(e,1)[0]})}},{key:"getBlocksByTypeAsArray",value:function(e){Object(i.a)(!1,"As of slate@0.47, the `getBlocksByTypeAsArray` method is deprecated.");var t=this.blocks({onlyLeaves:!0,onlyTypes:[e]});return Array.from(t,function(e){return B(e,1)[0]})}},{key:"getFurthestOnlyChildAncestor",value:function(e){Object(i.a)(!1,"As of slate@0.47, the `getFurthestOnlyChildAncestor` method is deprecated.");var t=this.getAncestors(e);return t&&t.rest().reverse().takeUntil(function(e){return e.nodes.size>1}).last()||null}},{key:"getInlinesAsArray",value:function(){return Object(i.a)(!1,"As of slate@0.47, the `getInlinesAsArray` method is deprecated."),Array.from(this.inlines({onlyLeaves:!0}),function(e){return B(e,1)[0]})}},{key:"getInlinesByTypeAsArray",value:function(e){return Object(i.a)(!1,"As of slate@0.47, the `getInlinesByTypeAsArray` method is deprecated."),Array.from(this.inlines({onlyLeaves:!0,onlyTypes:[e]}),function(e){return B(e,1)[0]})}},{key:"getLeafInlinesAtRangeAsArray",value:function(e){var t=this;return Object(i.a)(!1,"As of slate@0.47, the `getLeafInlinesAtRangeAsArray` method is deprecated."),(e=this.resolveRange(e)).isUnset?[]:this.getTextsAtRangeAsArray(e).map(function(e){return t.getClosestInline(e.key)}).filter(function(e){return e})}},{key:"getOrderedMarks",value:function(){return Object(i.a)(!1,"As of slate@0.47, the `getOrderedMarks` method has been folded into `getMarks`, which will now return an ordered set."),this.getMarks()}},{key:"getOrderedMarksAtRange",value:function(e){return Object(i.a)(!1,"As of slate@0.47, the `getOrderedMarksAtRange` method has been folded into `getMarksAtRange`, which will now return an ordered set."),this.getMarksAtRange(e)}},{key:"getOrderedMarksByType",value:function(e){return Object(i.a)(!1,"As of slate@0.47, the `getOrderedMarksByType` method has been folded into `getMarksByType`, which will now return an ordered set."),this.getMarksByType(e)}},{key:"getMarksByTypeAsArray",value:function(e){return Object(i.a)(!1,"As of slate@0.47, the `getMarksByTypeAsArray` method is deprecated."),this.nodes.reduce(function(t,n){return"text"===n.object?t.concat(n.marks.filter(function(t){return t.type===e})):t.concat(n.getMarksByTypeAsArray(e))},[])}},{key:"getMarksAsArray",value:function(){var e;Object(i.a)(!1,"As of slate@0.47, the `getMarksAsArray` method is deprecated.");var t=[],n=!0,r=!1,o=void 0;try{for(var a,s=this.texts()[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=a.value,u=B(c,1)[0];t.push(u.marks.toArray())}}catch(Lt){r=!0,o=Lt}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return(e=[]).concat.apply(e,t)}},{key:"getRootInlinesAtRangeAsArray",value:function(e){var t=this;return Object(i.a)(!1,"As of slate@0.47, the `getRootInlinesAtRangeAsArray` method is deprecated."),(e=this.resolveRange(e)).isUnset?Object(r.List)():this.getTextsAtRangeAsArray(e).map(function(e){return t.getFurthestInline(e.key)}).filter(function(e){return e})}},{key:"getTextsAsArray",value:function(){Object(i.a)(!1,"As of slate@0.47, the `getTextsAsArray` method is deprecated.");var e=this.texts();return Array.from(e,function(e){return B(e,1)[0]})}},{key:"getTextsAtRangeAsArray",value:function(e){Object(i.a)(!1,"As of slate@0.47, the `getTextsAtRangeAsArray` method is deprecated.");var t=this.texts({range:e});return Array.from(t,function(e){return B(e,1)[0]})}},{key:"getMarksAtPosition",value:function(e,t){Object(i.a)(!1,"As of slate@0.47, the `getMarksAtPosition` method is deprecated."),e=this.resolvePath(e);var n=this.getDescendant(e).marks;if(0!==t)return Object(r.OrderedSet)(n);var o=this.getClosestBlock(e);if(""===o.text)return Object(r.OrderedSet)(n);var a=this.texts({path:e,direction:"backward"}),s=B(a,1)[0];if(!s)return Object(r.OrderedSet)();var c=B(s,2),u=c[0],l=c[1];return o.hasDescendant(l)?Object(r.OrderedSet)(u.marks):Object(r.OrderedSet)(n)}},{key:"getNodesAtRange",value:function(e){Object(i.a)(!1,"As of slate@0.47, the `getNodesAtRange` method has been renamed to `getDescendantsAtRange`.");var t=this.descendants({range:e}),n=Array.from(t,function(e){return B(e,1)[0]});return Object(r.List)(n)}},{key:"isNodeInRange",value:function(e,t){return Object(i.a)(!1,"As of slate@0.47, the `isNodeInRange` method has been renamed to `isInRange`."),this.isInRange(e,t)}},{key:"text",get:function(){return this.getText()}}]),e}(),jt=function(e){Pt.prototype["assert"+e]=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=this["get"+e].apply(this,[t].concat(r));if(null==a)throw new Error("`Node.assert"+e+"` could not find node with path or key: "+t);return a}},_t=!0,Ft=!1,Ct=void 0;try{for(var Rt,Dt=["Child","Depth","Descendant","Node","Parent","Path"][Symbol.iterator]();!(_t=(Rt=Dt.next()).done);_t=!0){jt(Rt.value)}}catch(Lt){Ft=!0,Ct=Lt}finally{try{!_t&&Dt.return&&Dt.return()}finally{if(Ft)throw Ct}}Nt(Pt.prototype,["getBlocksAsArray","getBlocksByTypeAsArray","getDecorations","getFragmentAtRange","getInlinesAsArray","getInlinesByTypeAsArray","getInsertMarksAtRange","getLeafBlocksAtRangeAsArray","getLeafBlocksAtRangeAsArray","getLeafInlinesAtRangeAsArray","getMarksAsArray","getMarksAtPosition","getMarksByTypeAsArray","getNextBlock","getNodesAtRange","getNodesToPathsMap","getOffset","getOffsetAtRange","getOrderedMarksBetweenPositions","getPreviousBlock","getRootBlocksAtRange","getRootInlinesAtRangeAsArray","getTextAtOffset","getTextDirection","getTextsAsArray","getTextsBetweenPathPositionsAsArray"]),gt(Pt,[de,re,ae]),gt(function(){function e(){O(this,e)}return x(e,[{key:"flip",value:function(){return this.setPoints([this.focus,this.anchor])}},{key:"moveForward",value:function(e){return this.updatePoints(function(t){return t.moveForward(e)})}},{key:"moveBackward",value:function(e){return this.updatePoints(function(t){return t.moveBackward(e)})}},{key:"moveAnchorBackward",value:function(e){return this.setAnchor(this.anchor.moveBackward(e))}},{key:"moveAnchorForward",value:function(e){return this.setAnchor(this.anchor.moveForward(e))}},{key:"moveAnchorTo",value:function(e,t){return this.setAnchor(this.anchor.moveTo(e,t))}},{key:"moveAnchorToStartOfNode",value:function(e){return this.setAnchor(this.anchor.moveToStartOfNode(e))}},{key:"moveAnchorToEndOfNode",value:function(e){return this.setAnchor(this.anchor.moveToEndOfNode(e))}},{key:"moveEndBackward",value:function(e){return this.setEnd(this.end.moveBackward(e))}},{key:"moveEndForward",value:function(e){return this.setEnd(this.end.moveForward(e))}},{key:"moveEndTo",value:function(e,t){return this.setEnd(this.end.moveTo(e,t))}},{key:"moveEndToStartOfNode",value:function(e){return this.setEnd(this.end.moveToStartOfNode(e))}},{key:"moveEndToEndOfNode",value:function(e){return this.setEnd(this.end.moveToEndOfNode(e))}},{key:"moveFocusBackward",value:function(e){return this.setFocus(this.focus.moveBackward(e))}},{key:"moveFocusForward",value:function(e){return this.setFocus(this.focus.moveForward(e))}},{key:"moveFocusTo",value:function(e,t){return this.setFocus(this.focus.moveTo(e,t))}},{key:"moveFocusToStartOfNode",value:function(e){return this.setFocus(this.focus.moveToStartOfNode(e))}},{key:"moveFocusToEndOfNode",value:function(e){return this.setFocus(this.focus.moveToEndOfNode(e))}},{key:"moveStartBackward",value:function(e){return this.setStart(this.start.moveBackward(e))}},{key:"moveStartForward",value:function(e){return this.setStart(this.start.moveForward(e))}},{key:"moveStartTo",value:function(e,t){return this.setStart(this.start.moveTo(e,t))}},{key:"moveStartToStartOfNode",value:function(e){return this.setStart(this.start.moveToStartOfNode(e))}},{key:"moveStartToEndOfNode",value:function(e){return this.setStart(this.start.moveToEndOfNode(e))}},{key:"moveTo",value:function(e,t){return this.updatePoints(function(n){return n.moveTo(e,t)})}},{key:"moveToAnchor",value:function(){return this.setFocus(this.anchor)}},{key:"moveToEnd",value:function(){return this.setStart(this.end)}},{key:"moveToEndOfNode",value:function(e){return this.updatePoints(function(t){return t.moveToEndOfNode(e)})}},{key:"moveToFocus",value:function(){return this.setAnchor(this.focus)}},{key:"moveToRangeOfNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return this.setPoints([this.anchor.moveToStartOfNode(e),this.focus.moveToEndOfNode(t)])}},{key:"moveToStart",value:function(){return this.setEnd(this.start)}},{key:"moveToStartOfNode",value:function(e){return this.updatePoints(function(t){return t.moveToStartOfNode(e)})}},{key:"normalize",value:function(e){return this.updatePoints(function(t){return t.normalize(e)})}},{key:"setAnchor",value:function(e){return this.set("anchor",e)}},{key:"setEnd",value:function(e){return this.isBackward?this.setAnchor(e):this.setFocus(e)}},{key:"setFocus",value:function(e){return this.set("focus",e)}},{key:"setPoints",value:function(e){var t=B(e,2),n=t[0],r=t[1];return this.set("anchor",n).set("focus",r)}},{key:"updatePoints",value:function(e){var t=this.anchor,n=this.focus;return t=e(t),n=e(n),this.merge({anchor:t,focus:n})}},{key:"setStart",value:function(e){return this.isBackward?this.setFocus(e):this.setAnchor(e)}},{key:"setProperties",value:function(e){var t=e=$.createProperties(e),n=t.anchor,r=t.focus,o=E(t,["anchor","focus"]);return n&&(o.anchor=K.create(n)),r&&(o.focus=K.create(r)),this.merge(o)}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{object:this.object,anchor:this.anchor.toJSON(e),focus:this.focus.toJSON(e)}}},{key:"toRange",value:function(){var e=$.createProperties(this);return $.create(e)}},{key:"unset",value:function(){return this.updatePoints(function(e){return e.unset()})}},{key:"isCollapsed",get:function(){return this.anchor===this.focus||this.anchor.key===this.focus.key&&this.anchor.offset===this.focus.offset}},{key:"isExpanded",get:function(){return!this.isCollapsed}},{key:"isBackward",get:function(){var e=this.isUnset,t=this.anchor,n=this.focus;return e?null:t.key===n.key?t.offset>n.offset:z.isBefore(n.path,t.path)}},{key:"isForward",get:function(){var e=this.isBackward;return null==e?null:!e}},{key:"isUnset",get:function(){var e=this.anchor,t=this.focus;return e.isUnset||t.isUnset}},{key:"isSet",get:function(){return!this.isUnset}},{key:"start",get:function(){return this.isBackward?this.focus:this.anchor}},{key:"end",get:function(){return this.isBackward?this.anchor:this.focus}}]),e}(),[te,H,$,G])}).call(this,n(13))},475:function(e,t){},478:function(e,t,n){"use strict";n.r(t);var r=n(12),o=n.n(r),a=n(166),i=n.n(a),s=(n(185),n(178)),c=n(167),u=n(168),l=n(177),d=n(169),f=n(179),v=n(170),h=n(5),y=n.n(h),p=n(6),m=n.n(p),g=n(4);function k(e,t){function n(n,r,o,a,i){var s=r[o];return null!=s||n?null==s&&n?new Error("The "+i+" `"+o+"` is marked as required in `"+a+"`, but it was not supplied."):t(s)?null:new Error("Invalid "+i+" `"+o+"` supplied to `"+a+"`, expected a Slate `"+e+"` but received: "+s):null}function r(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(void 0,[!1].concat(t))}return r.isRequired=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(void 0,[!0].concat(t))},r}var b={block:k("Block",function(e){return g.a.isBlock(e)}),blocks:k("List<Block>",function(e){return g.a.isBlockList(e)}),change:k("Change",function(e){return g.b.isChange(e)}),data:k("Data",function(e){return g.c.isData(e)}),document:k("Document",function(e){return g.d.isDocument(e)}),inline:k("Inline",function(e){return g.f.isInline(e)}),inlines:k("Inline",function(e){return g.f.isInlineList(e)}),leaf:k("Leaf",function(e){return g.g.isLeaf(e)}),leaves:k("List<Leaf>",function(e){return g.g.isLeafList(e)}),mark:k("Mark",function(e){return g.h.isMark(e)}),marks:k("Set<Mark>",function(e){return g.h.isMarkSet(e)}),node:k("Node",function(e){return g.i.isNode(e)}),nodes:k("List<Node>",function(e){return g.i.isNodeList(e)}),range:k("Range",function(e){return g.k.isRange(e)}),ranges:k("List<Range>",function(e){return g.k.isRangeList(e)}),selection:k("Selection",function(e){return g.l.isSelection(e)}),value:k("Value",function(e){return g.n.isValue(e)}),text:k("Text",function(e){return g.m.isText(e)}),texts:k("List<Text>",function(e){return g.m.isTextList(e)})},A=n(23),O=n.n(A),x=n(16),w=n.n(x),T=n(2),N=n(7),E=n.n(N),S=n(173),B=n.n(S),P=n(65),j=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){o=!0,a=c}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_=void 0;if(P.a){var F=!0,C=!1,R=void 0;try{for(var D,L=[["edge",/Edge\/([0-9\._]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+)\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["android",/Android\s([0-9\.]+)/],["safari",/Version\/([0-9\._]+).*Safari/]][Symbol.iterator]();!(F=(D=L.next()).done);F=!0){var I=D.value,M=j(I,2),z=M[0];if(M[1].test(window.navigator.userAgent)){_=z;break}}}catch(pn){C=!0,R=pn}finally{try{!F&&L.return&&L.return()}finally{if(C)throw R}}}var J=void 0;if(P.a){var K=!0,q=!1,U=void 0;try{for(var V,W=[["ios",/os ([\.\_\d]+) like mac os/i],["macos",/mac os x/i],["android",/android/i],["firefoxos",/mozilla\/[a-z\.\_\d]+ \((?:mobile)|(?:tablet)/i],["windows",/windows\s*(?:nt)?\s*([\.\_\d]+)/i]][Symbol.iterator]();!(K=(V=W.next()).done);K=!0){var H=V.value,Y=j(H,2),G=Y[0];if(Y[1].test(window.navigator.userAgent)){J=G;break}}}catch(pn){q=!0,U=pn}finally{try{!K&&W.return&&W.return()}finally{if(q)throw U}}}var X=[];if(P.a){var Z=!0,Q=!1,$=void 0;try{for(var ee,te=[["inputeventslevel1",function(e){return"inputType"in(e.InputEvent?new e.InputEvent("input"):{})}],["inputeventslevel2",function(e){var t=e.document.createElement("div");return t.contentEditable=!0,"onbeforeinput"in t}]][Symbol.iterator]();!(Z=(ee=te.next()).done);Z=!0){var ne=ee.value,re=j(ne,2),oe=re[0];(0,re[1])(window)&&X.push(oe)}}catch(pn){Q=!0,$=pn}finally{try{!Z&&te.return&&te.return()}finally{if(Q)throw $}}}var ae=[[/^9([.]0|)/,28],[/^8[.]1/,27],[/^8([.]0|)/,26],[/^7[.]1/,25],[/^7([.]0|)/,24],[/^6([.]0|)/,23],[/^5[.]1/,22],[/^5([.]0|)/,21],[/^4[.]4/,20]];var ie="firefox"===_,se="safari"===_,ce="ie"===_,ue="edge"===_,le="android"===J,de="ios"===J,fe="macos"===J,ve=function(){if("android"!==J)return null;var e=window.navigator.userAgent.match(/Android\s([0-9\.]+)/);if(null==e)return null;var t=e[1],n=!0,r=!1,o=void 0;try{for(var a,i=ae[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value,c=j(s,2),u=c[0],l=c[1];if(t.match(u))return l}}catch(pn){r=!0,o=pn}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return null}(),he=(X.includes("inputeventslevel1"),X.includes("inputeventslevel2")||le&&(28===ve||null===ve)),ye=n(174),pe=n.n(ye),me=n(0),ge=n(10),ke=n(66),be=n.n(ke),Ae=n(108);function Oe(e){var t=JSON.stringify(e);return Object(Ae.btoa)(encodeURIComponent(t))}function xe(e){var t=decodeURIComponent(Object(Ae.atob)(e));return JSON.parse(t)}var we={deserialize:function(e,t){var n=xe(e);return g.n.fromJSON(n,t)},deserializeNode:function(e,t){var n=xe(e);return g.i.fromJSON(n,t)},serialize:function(e,t){return Oe(e.toJSON(t))},serializeNode:function(e,t){return Oe(e.toJSON(t))}},Te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function Ne(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).delimiter,n=void 0===t?"\n":t;return"document"===e.object||"block"===e.object&&g.a.isBlockList(e.nodes)?e.nodes.map(Ne).join(n):e.text}var Ee={deserialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.defaultBlock,r=void 0===n?"line":n,o=t.defaultMarks,a=void 0===o?[]:o,i=t.delimiter,s=void 0===i?"\n":i,c=t.toJSON,u=void 0!==c&&c;me.Set.isSet(a)&&(a=a.toArray()),r=g.i.createProperties(r),a=a.map(g.h.createProperties);var l={object:"value",document:{object:"document",data:{},nodes:e.split(s).map(function(e){return Te({},r,{object:"block",data:{},nodes:[{object:"text",text:e,marks:a}]})})}};return u?l:g.n.fromJSON(l)},serialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ne(e.document,t)}},Se=n(67),Be={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},Pe={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},je={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:"ctrl+y"},_e={},Fe=de||fe,Ce=!Fe;[].concat(Object.keys(Be)).concat(Object.keys(Pe)).concat(Object.keys(je)).forEach(function(e){var t="is"+e[0].toUpperCase()+e.slice(1);if(!_e[t]){var n=Be[e],r=Pe[e],o=je[e],a=n&&Object(Se.isKeyHotkey)(n),i=r&&Object(Se.isKeyHotkey)(r),s=o&&Object(Se.isKeyHotkey)(o);_e[t]=function(e){return!(!a||!a(e))||(!!(Fe&&i&&i(e))||!!(Ce&&s&&s(e)))}}});var Re=_e,De=function(e,t){if(!e)throw new Error("Invariant failed: "+(t||""))},Le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ie=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(pn){o=!0,a=pn}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Me=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},ze=0;var Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ze++,n=e.placeholder,r=e.when,o=e.style,a=void 0===o?{}:o;return De("string"===typeof n,"You must pass `SlateReactPlaceholder` an `options.placeholder` string."),De("string"===typeof r||"function"===typeof r,"You must pass `SlateReactPlaceholder` an `options.when` query."),{decorateNode:function(e,n,o){if(!n.query(r,e))return o();var a=o(),i=e.texts(),s=Ie(i,1)[0],c=e.texts({direction:"backward"}),u=Ie(c,1)[0],l=Ie(s,2),d=l[0],f=l[1],v=Ie(u,2),h=v[0],y=v[1],p={type:"placeholder",data:{key:t},anchor:{key:d.key,offset:0,path:f},focus:{key:h.key,offset:h.text.length,path:y}};return[].concat(Me(a),[p])},renderMark:function(e,r,o){var i=e.children,s=e.mark;if("placeholder"===s.type&&s.data.get("key")===t){var c=Le({pointerEvents:"none",display:"inline-block",width:"0",maxWidth:"100%",whiteSpace:"nowrap",opacity:"0.333"},a);return y.a.createElement("span",null,y.a.createElement("span",{contentEditable:!1,style:c},n),i)}return o()}}},Ke=n(175),qe=["onBeforeInput","onBlur","onClick","onContextMenu","onCompositionEnd","onCompositionStart","onCopy","onCut","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onInput","onFocus","onKeyDown","onKeyUp","onMouseDown","onMouseUp","onPaste","onSelect"],Ue={EDITOR:"data-slate-editor",FRAGMENT:"data-slate-fragment",KEY:"data-key",LEAF:"data-slate-leaf",LENGTH:"data-slate-length",OBJECT:"data-slate-object",OFFSET_KEY:"data-offset-key",SPACER:"data-slate-spacer",STRING:"data-slate-string",TEXT:"data-slate-object",VOID:"data-slate-void",ZERO_WIDTH:"data-slate-zero-width"},Ve={BLOCK:"["+Ue.OBJECT+'="block"]',EDITOR:"["+Ue.EDITOR+"]",INLINE:"["+Ue.OBJECT+'="inline"]',KEY:"["+Ue.KEY+"]",LEAF:"["+Ue.LEAF+"]",OBJECT:"["+Ue.OBJECT+"]",STRING:"["+Ue.STRING+"]",TEXT:"["+Ue.OBJECT+'="text"]',VOID:"["+Ue.VOID+"]",ZERO_WIDTH:"["+Ue.ZERO_WIDTH+"]",ANNOTATION:"["+Ue.OBJECT+'="annotation"]'},We=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},He=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ye=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},Ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xe=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Ze=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t},Qe=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(pn){o=!0,a=pn}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),$e=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},et=/^([\w-]+)(?::(\d+))?$/;var tt={parse:function(e){var t=et.exec(e);if(!t)throw new Error('Invalid offset key string "'+e+'".');var n=Qe(t,3),r=(n[0],n[1]),o=n[2];return{key:r,index:parseInt(o,10)}},stringify:function(e){return e.key+":"+e.index}},nt=function(e){var t=e.text,n=void 0===t?"":t,r=e.isTrailing,o=void 0!==r&&r;return y.a.createElement("span",Ye({},Ue.STRING,!0),n,o?"\n":null)},rt=function(e){var t,n=e.length,r=void 0===n?0:n,o=e.isLineBreak,a=void 0!==o&&o;return y.a.createElement("span",(Ye(t={},Ue.ZERO_WIDTH,a?"n":"z"),Ye(t,Ue.LENGTH,r),t),"\ufeff",a?y.a.createElement("br",null):null)},ot=function(e){var t,n=e.marks,r=e.annotations,o=e.decorations,a=e.node,i=e.index,s=e.offset,c=e.text,u=e.editor,l=e.parent,d=e.block,f=e.leaves,v=tt.stringify({key:a.key,index:i}),h=void 0;if(u.query("isVoid",l))h=y.a.createElement(rt,{length:l.text.length});else if(""===c&&"block"===l.object&&""===l.text&&l.nodes.last()===a)h=y.a.createElement(rt,{isLineBreak:!0});else if(""===c)h=y.a.createElement(rt,null);else{var p=d.getLastText(),m=c.charAt(c.length-1),g=a===p,k=i===f.size-1;h=g&&k&&"\n"===m?y.a.createElement(nt,{isTrailing:!0,text:c}):y.a.createElement(nt,{text:c})}var b={editor:u,marks:n,annotations:r,decorations:o,node:a,offset:s,text:c},A=!0,O=!1,x=void 0;try{for(var w,T=n[Symbol.iterator]();!(A=(w=T.next()).done);A=!0){var N=w.value;(I=u.run("renderMark",Ge({},b,{mark:N,children:h,attributes:Ye({},Ue.OBJECT,"mark")})))&&(h=I)}}catch(pn){O=!0,x=pn}finally{try{!A&&T.return&&T.return()}finally{if(O)throw x}}var E=!0,S=!1,B=void 0;try{for(var P,j=o[Symbol.iterator]();!(E=(P=j.next()).done);E=!0){var _=P.value;(I=u.run("renderDecoration",Ge({},b,{decoration:_,children:h,attributes:Ye({},Ue.OBJECT,"decoration")})))&&(h=I)}}catch(pn){S=!0,B=pn}finally{try{!E&&j.return&&j.return()}finally{if(S)throw B}}var F=!0,C=!1,R=void 0;try{for(var D,L=r[Symbol.iterator]();!(F=(D=L.next()).done);F=!0){var I,M=D.value;(I=u.run("renderAnnotation",Ge({},b,{annotation:M,children:h,attributes:Ye({},Ue.OBJECT,"annotation")})))&&(h=I)}}catch(pn){C=!0,R=pn}finally{try{!F&&L.return&&L.return()}finally{if(C)throw R}}var z=(Ye(t={},Ue.LEAF,!0),Ye(t,Ue.OFFSET_KEY,v),t);return y.a.createElement("span",z,h)};ot.propTypes={annotations:O.a.list.isRequired,block:b.block.isRequired,decorations:O.a.list.isRequired,editor:m.a.object.isRequired,index:m.a.number.isRequired,leaves:m.a.object.isRequired,marks:b.marks.isRequired,node:b.node.isRequired,offset:m.a.number.isRequired,parent:b.node.isRequired,text:m.a.string.isRequired};var at=y.a.memo(ot,function(e,t){return t.index===e.index&&t.marks===e.marks&&t.parent===e.parent&&t.block===e.block&&t.annotations.equals(e.annotations)&&t.decorations.equals(e.decorations)&&t.text===e.text}),it=y.a.forwardRef(function(e,t){var n,r=e.annotations,o=e.block,a=e.decorations,i=e.node,s=e.parent,c=e.editor,u=e.style,l=i.key,d=i.getLeaves(r,a),f=0;return y.a.createElement("span",Ge({ref:t,style:u},(Ye(n={},Ue.OBJECT,i.object),Ye(n,Ue.KEY,l),n)),d.map(function(e,t){var n=e.text,r=f;return f+=n.length,y.a.createElement(at,{key:i.key+"-"+t,block:o,editor:c,index:t,annotations:e.annotations,decorations:e.decorations,marks:e.marks,node:i,offset:r,parent:s,leaves:d,text:n})}))});it.propTypes={annotations:O.a.map.isRequired,block:b.block,decorations:O.a.list.isRequired,editor:m.a.object.isRequired,node:b.node.isRequired,parent:b.node.isRequired,style:m.a.object};var st=y.a.memo(it,function(e,t){return t.node===e.node&&"block"===t.parent.object&&e.parent.nodes.last()===e.node&&t.parent.nodes.last()!==t.node&&t.annotations.equals(e.annotations)&&t.decorations.equals(e.decorations)}),ct=w()("slate:void"),ut=function(e){function t(){var e,n,r;We(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=Ze(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),lt.call(r),Ze(r,n)}return Xe(t,e),He(t,[{key:"render",value:function(){var e,t=this.props,n=t.children,r=t.node,o=t.readOnly,a="block"===r.object?"div":"span",i=Ye({},Ue.SPACER,!0),s=y.a.createElement(a,Ge({style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},i),this.renderText()),c=y.a.createElement(a,{contentEditable:!!o&&null},n);this.debug("render",{props:t});var u=(Ye(e={},Ue.VOID,!0),Ye(e,Ue.KEY,r.key),e);return y.a.createElement(a,Ge({contentEditable:!(!o&&"block"!==r.object)&&null},u),o?null:s,c)}}]),t}(y.a.Component);ut.propTypes={block:b.block,children:m.a.any.isRequired,editor:m.a.object.isRequired,node:b.node.isRequired,parent:b.node.isRequired,readOnly:m.a.bool.isRequired};var lt=function(){var e=this;this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=e.props.node,i=a.key+" ("+a.type+")";ct.apply(void 0,[t,""+i].concat(r))},this.renderText=function(){var t=e.props,n=t.annotations,r=t.block,o=t.decorations,a=t.node,i=t.readOnly,s=t.editor,c=t.textRef,u=a.getFirstText();return y.a.createElement(st,{ref:c,annotations:n,block:"block"===a.object?a:r,decorations:o,editor:s,key:u.key,node:u,parent:a,readOnly:i})}},dt=w()("slate:node"),ft=function(e){function t(){var e,n,r;We(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=Ze(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),vt.call(r),Ze(r,n)}return Xe(t,e),He(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.editor.run("shouldNodeComponentUpdate",t,e),r=e,o=t;if(null!=n){if(Object(T.a)(!1,'As of slate-react@0.22 the `shouldNodeComponentUpdate` middleware is deprecated. You can pass specific values down the tree using React\'s built-in "context" construct instead.'),n)return!0;Object(T.a)(!1!==n,"Returning false in `shouldNodeComponentUpdate` does not disable Slate's internal `shouldComponentUpdate` logic. If you want to prevent updates, use React's `shouldComponentUpdate` instead.")}return r.readOnly!==o.readOnly||(r.node!==o.node||(!!(!r.selection&&o.selection||r.selection&&!o.selection||r.selection&&o.selection&&!r.selection.equals(o.selection))||(!r.annotations.equals(o.annotations)||!r.decorations.equals(o.decorations))))}},{key:"render",value:function(){var e,n=this;this.debug("render",this);var r=this.props,o=r.annotations,a=r.block,i=r.decorations,s=r.editor,c=r.node,u=r.parent,l=r.readOnly,d=r.selection,f=c.getDecorations(s),v=c.nodes.toArray().map(function(e,r){var u="text"===e.object?st:t,v=d&&ht(c,r,d),h=f.map(function(e){return ht(c,r,e)}).filter(function(e){return e}).concat(i),p=o.map(function(e){return ht(c,r,e)}).filter(function(e){return e});return y.a.createElement(u,{block:"block"===c.object?c:a,editor:s,annotations:p,decorations:h,selection:v,key:e.key,node:e,parent:c,readOnly:l,ref:function(e){e?n.tmp.nodeRefs[r]=e:delete n.tmp.nodeRefs[r]}})}),h=(Ye(e={},Ue.OBJECT,c.object),Ye(e,Ue.KEY,c.key),Ye(e,"ref",this.ref),e);c.isLeafBlock()&&("rtl"===c.getTextDirection()&&(h.dir="rtl"));var p=void 0;"block"===c.object?p="renderBlock":"document"===c.object?p="renderDocument":"inline"===c.object&&(p="renderInline");var m=s.run(p,{attributes:h,children:v,editor:s,isFocused:!!d&&d.isFocused,isSelected:!!d,node:c,parent:u,readOnly:l});return s.isVoid(c)?y.a.createElement(ut,Ge({},this.props,{textRef:function(e){e?n.tmp.nodeRefs[0]=e:delete n.tmp.nodeRefs[0]}}),m):m}}]),t}(y.a.Component);ft.propTypes={annotations:O.a.map.isRequired,block:b.block,decorations:O.a.list.isRequired,editor:m.a.object.isRequired,node:b.node.isRequired,parent:b.node,readOnly:m.a.bool.isRequired,selection:b.selection};var vt=function(){var e=this;this.tmp={nodeRefs:{}},this.ref=y.a.createRef(),this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=e.props.node,i=a.key,s=a.type;dt.apply(void 0,[t,i+" ("+s+")"].concat(r))}};function ht(e,t,n){if(n.isUnset)return null;var r=e.nodes.get(t),o=n,a=o.start,i=o.end,s=a.path,c=i.path,u=s.first(),l=c.first();if(u===t)a=a.setPath(s.rest());else if(u<t&&t<=l)if("text"===r.object)a=a.moveTo(g.j.create([t]),0);else{var d=r.texts(),f=Qe(d,1)[0],v=Qe(f,2)[1];a=a.moveTo(v,0)}else a=null;if(l===t)i=i.setPath(c.rest());else if(u<=t&&t<l)if("text"===r.object)i=i.moveTo(g.j.create([t]),r.text.length);else{var h=r.texts({direction:"backward"}),y=Qe(h,1)[0],p=Qe(y,2),m=p[0],k=p[1];i=i.moveTo(k,m.text.length)}else i=null;return a&&i?n=(n=n.setStart(a)).setEnd(i):null}var yt=["auto","overlay","scroll"],pt=de&&!!window.navigator.userAgent.match(/os 11_/i);function mt(e){if(!pt&&e.anchorNode){var t=E()(e.anchorNode),n=function(e,t){for(var n=e.parentNode,r=void 0;!r&&n.parentNode;){var o=t.getComputedStyle(n).overflowY;if(yt.includes(o)){r=n;break}n=n.parentNode}return r||t.document.body}(e.anchorNode,t),r=n===t.document.body||n===t.document.documentElement,o=B()(e),a=e.getRangeAt(0).cloneRange();a.collapse(o);var i=a.getBoundingClientRect();se&&a.collapsed&&0===i.top&&0===i.height&&(0===a.startOffset?a.setEnd(a.endContainer,1):a.setStart(a.startContainer,a.startOffset-1),0===(i=a.getBoundingClientRect()).top&&0===i.height&&a.getClientRects().length&&(i=a.getClientRects()[0]));var s=void 0,c=void 0,u=void 0,l=void 0,d=0,f=0,v=0,h=0,y=0,p=0,m=0,g=0;if(r){s=t.innerWidth,c=t.innerHeight,u=t.pageYOffset,l=t.pageXOffset}else{var k=n.offsetWidth,b=n.offsetHeight,A=n.scrollTop,O=n.scrollLeft,x=t.getComputedStyle(n),w=x.borderTopWidth,T=x.borderBottomWidth,N=x.borderLeftWidth,S=x.borderRightWidth,P=x.paddingTop,j=x.paddingBottom,_=x.paddingLeft,F=x.paddingRight,C=n.getBoundingClientRect();s=k,c=b,d=C.top+parseInt(w,10),f=C.left+parseInt(N,10),v=parseInt(w,10)+parseInt(T,10),h=parseInt(N,10)+parseInt(S,10),y=parseInt(P,10),p=parseInt(j,10),m=parseInt(_,10),g=parseInt(F,10),u=A,l=O}var R=i.top+u-d,D=i.left+l-f,L=l,I=u;D<l?L=D-m:D+i.width+h>l+s&&(L=D+h+g-s),R<u?I=R-y:R+i.height+v>u+c&&(I=R+v+p+i.height-c),r?t.scrollTo(L,I):(n.scrollTop=I,n.scrollLeft=L)}}function gt(e){if(ce){var t=window.document.body.createTextRange();t.collapse(),t.select()}else e.removeAllRanges()}var kt=/Permission denied to access property "nodeType"/,bt=w()("slate:content");bt.update=w()("slate:update");var At=function(e){function t(){var e,n,r;We(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=Ze(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.tmp={isUpdatingSelection:!1,nodeRef:y.a.createRef(),nodeRefs:{}},r.ref=y.a.createRef(),r.handlers=qe.reduce(function(e,t){return e[t]=function(e){return r.onEvent(t,e)},e},{}),r.updateSelection=function(){var e=r.props.editor,t=e.value.selection,n=t.isBackward,o=E()(r.ref.current),a=o.getSelection(),i=o.document.activeElement;if(bt.enabled&&bt.update("updateSelection",{selection:t.toJSON()}),a){var s=a.rangeCount,c=a.anchorNode,u=!1;if(t.isBlurred&&i===r.ref.current&&(r.ref.current.blur(),u=!0),t.isUnset&&s&&r.isInEditor(c)&&(gt(a),u=!0),t.isFocused&&i!==r.ref.current&&(r.ref.current.focus({preventScroll:!0}),u=!0),t.isFocused&&t.isSet){var l=!!s&&a.getRangeAt(0),d=e.findDOMRange(t);if(!d)return void Object(T.a)(!1,"Unable to find a native DOM range from the current selection.");var f=d.startContainer,v=d.startOffset,h=d.endContainer,y=d.endOffset;if(l&&(f===l.startContainer&&v===l.startOffset&&h===l.endContainer&&y===l.endOffset||f===l.endContainer&&v===l.endOffset&&h===l.startContainer&&y===l.startOffset))return;u=!0,r.tmp.isUpdatingSelection=!0,gt(a),a.setBaseAndExtent?n?a.setBaseAndExtent(d.endContainer,d.endOffset,d.startContainer,d.startOffset):a.setBaseAndExtent(d.startContainer,d.startOffset,d.endContainer,d.endOffset):a.addRange(d),mt(a),setTimeout(function(){ie&&r.ref.current&&r.ref.current.focus(),r.tmp.isUpdatingSelection=!1})}u&&bt.enabled&&(bt("updateSelection",{selection:t,native:a,activeElement:i}),bt.update("updateSelection-applied",{selection:t}))}},r.isInEditor=function(e){var t=void 0;try{if(8===e.nodeType)return!1;t=3===e.nodeType?e.parentNode:e}catch(pn){if(ie&&kt.test(pn.message))return!1;throw pn}return t.isContentEditable&&(t===r.ref.current||t.closest(Ve.EDITOR)===r.ref.current)},r.onNativeSelectionChange=pe()(function(e){r.props.readOnly||E()(e.target).document.activeElement===r.ref.current&&r.props.onEvent("onSelect",e)},100),Ze(r,n)}return Xe(t,e),He(t,[{key:"componentDidCatch",value:function(e,t){bt("componentDidCatch",{error:e,info:t}),this.setState({})}},{key:"componentDidMount",value:function(){E()(this.ref.current).document.addEventListener("selectionchange",this.onNativeSelectionChange),he&&this.ref.current.addEventListener("beforeinput",this.handlers.onBeforeInput),this.updateSelection()}},{key:"componentWillUnmount",value:function(){var e=E()(this.ref.current);e&&e.document.removeEventListener("selectionchange",this.onNativeSelectionChange),he&&this.ref.current.removeEventListener("beforeinput",this.handlers.onBeforeInput)}},{key:"componentDidUpdate",value:function(){bt.update("componentDidUpdate"),this.updateSelection()}},{key:"onEvent",value:function(e,t){if(bt("onEvent",e),!this.tmp.isUpdatingSelection||"onSelect"!==e&&"onBlur"!==e&&"onFocus"!==e){if(!le&&"onSelect"===e){var n=this.props.editor,r=n.value.selection,o=E()(t.target).getSelection(),a=n.findRange(o);if(a&&a.equals(r.toRange()))return void this.updateSelection()}if("onDragEnd"===e||"onDragEnter"===e||"onDragExit"===e||"onDragLeave"===e||"onDragOver"===e||"onDragStart"===e||"onDrop"===e)if(t.target.closest(Ve.EDITOR)!==this.ref.current)return;("onBeforeInput"!==e&&"onBlur"!==e&&"onCompositionEnd"!==e&&"onCompositionStart"!==e&&"onCopy"!==e&&"onCut"!==e&&"onFocus"!==e&&"onInput"!==e&&"onKeyDown"!==e&&"onKeyUp"!==e&&"onPaste"!==e&&"onSelect"!==e||this.isInEditor(t.target))&&this.props.onEvent(e,t)}}},{key:"render",value:function(){var e,t=this.props,n=this.handlers,r=t.id,o=t.className,a=t.readOnly,i=t.editor,s=t.tabIndex,c=t.role,u=t.tagName,l=t.spellCheck,d=i.value,f=u,v=d.document,h=d.selection,p=Ge({outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},a?{}:{WebkitUserModify:"read-write-plaintext-only"},t.style);bt("render",{props:t});var m=(Ye(e={},Ue.EDITOR,!0),Ye(e,Ue.KEY,v.key),e);return y.a.createElement(f,Ge({key:this.props.contentKey},n,m,{ref:this.ref,contentEditable:!a||null,suppressContentEditableWarning:!0,id:r,className:o,autoCorrect:t.autoCorrect?"on":"off",spellCheck:l,style:p,role:a?null:c||"textbox",tabIndex:s,"data-gramm":!1}),y.a.createElement(ft,{annotations:d.annotations,block:null,decorations:Object(me.List)(),editor:i,node:v,parent:null,readOnly:a,selection:h,ref:this.tmp.nodeRef}))}}]),t}(y.a.Component);At.propTypes={autoCorrect:m.a.bool.isRequired,className:m.a.string,contentKey:m.a.number,editor:m.a.object.isRequired,id:m.a.string,readOnly:m.a.bool.isRequired,role:m.a.string,spellCheck:m.a.bool.isRequired,style:m.a.object,tabIndex:m.a.number,tagName:m.a.string},At.defaultProps={style:{},tagName:"div"};var Ot=[].concat($e(qe),["commands","decorateNode","queries","renderAnnotation","renderBlock","renderDecoration","renderDocument","renderEditor","renderInline","renderMark","schema"]);function xt(){return{queries:{findDOMNode:function(e,t){t=g.j.create(t);var n=e.tmp.contentRef.current;return t.size?function e(t,n){if(!t)return null;if(!n.size)return t.ref?t.ref.current||null:t||null;var r=n.first(),o=n.rest();return e(t.tmp.nodeRefs[r],o)}(n.tmp.nodeRef.current,t):n.ref.current||null},findDOMPoint:function(e,t){var n=e.findDOMNode(t.path),r=0;if(!n)return null;var o=Array.from(n.querySelectorAll(Ve.STRING+", "+Ve.ZERO_WIDTH)),a=!0,i=!1,s=void 0;try{for(var c,u=o[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value,d=l.childNodes[0],f=d.textContent.length,v=f;l.hasAttribute(Ue.LENGTH)&&(v=parseInt(l.getAttribute(Ue.LENGTH),10));var h=r+v;if(t.offset<=h)return{node:d,offset:Math.min(f,Math.max(0,t.offset-r))};r=h}}catch(pn){i=!0,s=pn}finally{try{!a&&u.return&&u.return()}finally{if(i)throw s}}return null},findDOMRange:function(e,t){var n=t.anchor,r=t.focus,o=t.isBackward,a=t.isCollapsed,i=e.findDOMPoint(n),s=a?i:e.findDOMPoint(r);if(!i||!s)return null;var c=E()(i.node).document.createRange(),u=o?s:i,l=o?i:s;return c.setStart(u.node,u.offset),c.setEnd(l.node,l.offset),c},findEventRange:function(e,t){t.nativeEvent&&(t=t.nativeEvent);var n=t,r=n.clientX,o=n.clientY,a=n.target;if(null==r||null==o)return null;var i=e.value.document,s=e.findPath(t.target);if(!s)return null;var c=i.getNode(s);if(e.isVoid(c)){var u=a.getBoundingClientRect(),l="inline"===c.object?r-u.left<u.left+u.width-r:o-u.top<u.top+u.height-o,d=i.createRange(),f=l?"moveToEndOfNode":"moveToStartOfNode",v=i[l?"previousTexts":"nextTexts"](s);if(v){var h=Qe(v,1)[0];return d[f](h)}return null}var y=E()(a),p=void 0;if(y.document.caretRangeFromPoint)p=y.document.caretRangeFromPoint(r,o);else if(y.document.caretPositionFromPoint){var m=y.document.caretPositionFromPoint(r,o);(p=y.document.createRange()).setStart(m.offsetNode,m.offset),p.setEnd(m.offsetNode,m.offset)}else if(y.document.body.createTextRange){p=y.document.body.createTextRange();try{p.moveToPoint(r,o)}catch(g){return null}}return e.findRange(p)},findNode:function(e,t){var n=e.findPath(t);return n?e.value.document.getNode(n):null},findPath:function(e,t){var n=e.tmp.contentRef.current;if(t===n.ref.current)return g.j.create([]);var r=function e(n,r){if(t===n)return r;if(!n.ref)return null;if(t===n.ref.current)return r;if(!n.tmp)return null;var o=n.tmp.nodeRefs,a=Object.keys(o),i=!0,s=!1,c=void 0;try{for(var u,l=a[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var d=u.value,f=o[d],v=parseInt(d,10),h=e(f,[].concat($e(r),[v]));if(h)return h}}catch(pn){s=!0,c=pn}finally{try{!i&&l.return&&l.return()}finally{if(s)throw c}}return null}(n.tmp.nodeRef.current,[]);return r?g.j.create(r):null},findPoint:function(e,t,n){var r=function(e,t){if(1===e.nodeType&&e.childNodes.length){var n=t===e.childNodes.length,r=n?"backward":"forward",o=n?t-1:t;for(e=wt(e,o,r);1===e.nodeType&&e.childNodes.length;){var a=n?e.childNodes.length-1:0;e=wt(e,a,r)}t=n?e.textContent.length:0}return{node:e,offset:t}}(t,n),o=r.node,a=r.offset,i=E()(t),s=o.parentNode,c=s.closest(Ve.LEAF),u=void 0,l=void 0,d=void 0;if(c){u=c.closest(Ve.TEXT);var f=i.document.createRange();f.setStart(u,0),f.setEnd(o,a);var v=f.cloneContents(),h=v.querySelectorAll([Ve.ZERO_WIDTH,Ve.ANNOTATION+" *:not("+Ve.STRING+")"]);Array.from(h).forEach(function(e){e.parentNode.removeChild(e)}),l=v.textContent.length,d=u}else{var y=s.closest(Ve.VOID);if(!y)return null;if(!(c=y.querySelector(Ve.LEAF)))return null;u=c.closest(Ve.TEXT),l=(d=c).textContent.length}l===d.textContent.length&&s.hasAttribute(Ue.ZERO_WIDTH)&&l--;var p=e.findPath(u);return p?e.value.document.createPoint({path:p,offset:l}):null},findRange:function(e,t){var n=t.anchorNode||t.startContainer;if(!n)return null;var r=E()(n);(t instanceof r.Range||r.StaticRange&&t instanceof r.StaticRange)&&(t={anchorNode:t.startContainer,anchorOffset:t.startOffset,focusNode:t.endContainer,focusOffset:t.endOffset});var o=t,a=o.anchorNode,i=o.anchorOffset,s=o.focusNode,c=o.focusOffset,u=o.isCollapsed,l=e.value,d=e.findPoint(a,i),f=u?d:e.findPoint(s,c);return d&&f?l.document.createRange({anchor:d,focus:f}):null},findSelection:function(e,t){var n=e.value,r=n.document;if(!t.rangeCount)return null;var o=e.findRange(t);if(!o)return null;var a=o,i=a.anchor,s=a.focus,c=r.getNode(i.path),u=r.getNode(s.path),l=r.getClosestInline(i.path),d=r.getClosestInline(s.path),f=r.getClosestBlock(s.path),v=r.getClosestBlock(i.path);if(v&&!e.isVoid(v)&&0===i.offset&&f&&e.isVoid(f)&&0!==s.offset&&(o=o.setFocus(s.setOffset(0))),l&&!e.isVoid(l)&&i.offset===c.text.length){var h=r.getClosestBlock(i.path).texts({path:i.path}),y=Qe(h,1)[0];if(y){var p=Qe(y,2)[1];o=o.moveAnchorTo(p,0)}}if(d&&!e.isVoid(d)&&s.offset===u.text.length){var m=r.getClosestBlock(s.path).texts({path:s.path}),g=Qe(m,1)[0];if(g){var k=Qe(g,2)[1];o=o.moveFocusTo(k,0)}}var b=r.createSelection(o);return b=(b=b.setIsFocused(!0)).set("marks",n.selection.marks)}}}}function wt(e,t,n){for(var r=e.childNodes,o=r[t],a=t,i=!1,s=!1;(8===o.nodeType||1===o.nodeType&&0===o.childNodes.length||1===o.nodeType&&"false"===o.getAttribute("contenteditable"))&&(!i||!s);)a>=r.length?(i=!0,a=t-1,n="backward"):a<0?(s=!0,a=t+1,n="forward"):(o=r[a],"forward"===n&&a++,"backward"===n&&a--);return o||null}function Tt(e,t,n){Object(T.a)(!1,"As of slate-react@0.22 the `findPoint(node, offset)` helper is deprecated in favor of `editor.findPoint(node, offset)`."),Object(ge.a)(!g.n.isValue(n),"As of Slate 0.42.0, the `findPoint` utility takes an `editor` instead of a `value`.");var r=function(e,t){if(1===e.nodeType&&e.childNodes.length){var n=t===e.childNodes.length,r=n?"backward":"forward",o=n?t-1:t;for(e=Nt(e,o,r);1===e.nodeType&&e.childNodes.length;){var a=n?e.childNodes.length-1:0;e=Nt(e,a,r)}t=n?e.textContent.length:0}return{node:e,offset:t}}(e,t),o=r.node,a=r.offset,i=E()(e),s=o.parentNode,c=s.closest(Ve.LEAF),u=void 0,l=void 0;if(c){var d=i.document.createRange(),f=c.closest(Ve.TEXT);d.setStart(f,0),d.setEnd(o,a),l=f,u=d.cloneContents().textContent.length}else{var v=s.closest(Ve.VOID);if(!v)return null;if(!(c=v.querySelector(Ve.LEAF)))return null;u=(l=c).textContent.length}u===l.textContent.length&&s.hasAttribute(Ue.ZERO_WIDTH)&&u--;var h=c.getAttribute(Ue.OFFSET_KEY);if(!h)return null;var y=tt.parse(h).key,p=n.value;return p.document.hasDescendant(y)?p.document.createPoint({key:y,offset:u}):null}function Nt(e,t,n){for(var r=e.childNodes,o=r[t],a=t,i=!1,s=!1;(8===o.nodeType||1===o.nodeType&&0===o.childNodes.length||1===o.nodeType&&"false"===o.getAttribute("contenteditable"))&&(!i||!s);)a>=r.length?(i=!0,a=t-1,n="backward"):a<0?(s=!0,a=t+1,n="forward"):(o=r[a],"forward"===n&&a++,"backward"===n&&a--);return o||null}function Et(e,t){Object(T.a)(!1,"As of slate-react@0.22 the `findRange(selection)` helper is deprecated in favor of `editor.findRange(selection)`."),Object(ge.a)(!g.n.isValue(t),"As of Slate 0.42.0, the `findNode` utility takes an `editor` instead of a `value`.");var n=e.anchorNode||e.startContainer;if(!n)return null;var r=E()(n);(e instanceof r.Range||r.StaticRange&&e instanceof r.StaticRange)&&(e={anchorNode:e.startContainer,anchorOffset:e.startOffset,focusNode:e.endContainer,focusOffset:e.endOffset});var o=e,a=o.anchorNode,i=o.anchorOffset,s=o.focusNode,c=o.focusOffset,u=o.isCollapsed,l=t.value,d=Tt(a,i,t),f=u?d:Tt(s,c,t);return d&&f?l.document.createRange({anchor:d,focus:f}):null}function St(e,t,n){Object(T.a)(!1,"As of slate-react@0.22 the `getSelectionFromDOM(window, editor, domSelection)` helper is deprecated in favor of `editor.findSelection(domSelection)`.");var r=t.value,o=r.document;if(n.rangeCount){var a=Et(n,t);if(a){var i=a,s=i.anchor,c=i.focus,u=o.getNode(s.path),l=o.getNode(c.path),d=o.getClosestInline(s.path),f=o.getClosestInline(c.path),v=o.getClosestBlock(c.path),h=o.getClosestBlock(s.path);if(h&&!t.isVoid(h)&&0===s.offset&&v&&t.isVoid(v)&&0!==c.offset&&(a=a.setFocus(c.setOffset(0))),d&&!t.isVoid(d)&&s.offset===u.text.length){var y=o.getClosestBlock(s.path).texts({path:s.path}),p=Qe(y,1)[0];if(p){var m=Qe(p,2)[1];a=a.moveAnchorTo(m,0)}}if(f&&!t.isVoid(f)&&c.offset===l.text.length){var g=o.getClosestBlock(c.path).texts({path:c.path}),k=Qe(g,1)[0];if(k){var b=Qe(k,2)[1];a=a.moveFocusTo(b,0)}}var A=o.createSelection(a);return A=(A=A.setIsFocused(!0)).set("marks",r.selection.marks)}}else t.blur()}function Bt(e,t,n){var r=Tt(n,0,t);if(r){var o=t.value,a=o.document,i=o.selection,s=a.getDescendant(r.path),c=a.getClosestBlock(r.path),u=s.getLeaves(),l=c.getLastText(),d=u.last(),f=0,v=0,h=u.find(function(e){if(f=v,(v+=e.text.length)>r.offset)return!0})||d,y=h.text,p=n.textContent,m=s===l,g=h===d,k=p.charAt(p.length-1);if(m&&g&&"\n"===k&&(p=p.slice(0,-1)),p!==y){var b=i.moveAnchorTo(r.path,f).moveFocusTo(r.path,v);b=a.resolveRange(b),t.insertTextAtRange(b,p,h.marks)}}}function Pt(e,t){return e.nodeType===t.Node.TEXT_NODE}function jt(e,t){if(!e.length)throw new Error("elements must be an Array");var n=e[e.length-1];return{elements:e.map(function(e){return function e(t,n){var r={};return r.node=t,Pt(t,n)&&(r.text=t.textContent),r.children=Array.from(t.childNodes).map(function(t){return e(t,n)}),r}(e,t)}),parent:n.parentElement,next:n.nextElementSibling}}function _t(e,t){var n=e.elements,r=e.next,o=e.parent;n.forEach(function(e){return function e(t,n){var r=t.node;Pt(r,n)&&r.textContent!==t.text&&(r.textContent=t.text),t.children.forEach(function(t){e(t,n),r.appendChild(t.node)});for(var o=t.children.length;r.childNodes.length>o;)r.removeChild(r.childNodes[0]);var a=r.dataset;if(a){var i=a.key;if(i){var s=new n.Set(Array.from(n.document.querySelectorAll("["+Ue.KEY+'="'+i+'"]')));s.delete(r),s.forEach(function(e){return e.parentElement.removeChild(e)})}}}(e,t)});var a=n[n.length-1].node;e.next?o.insertBefore(a,r):o.appendChild(a);for(var i=a,s=n.length-2;s>=0;s--){var c=n[s].node;o.insertBefore(c,i),i=c}}var Ft=function(){function e(t,n){We(this,e),this.window=E()(t[0]),this.snapshot=jt(t,this.window),this.data=n}return He(e,[{key:"apply",value:function(){_t(this.snapshot,this.window)}},{key:"getData",value:function(){return this.data}}]),e}();function Ct(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;return e.nodeType===n.Node.TEXT_NODE&&(e=e.parentNode),e.closest(t)}var Rt=function(){function e(t,n){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).before,o=void 0!==r&&r;We(this,e);var a=t.getSelection(),i=Ct(a.anchorNode,Ve.EDITOR+" > *"),s=[i];if(o){var c=i.previousElementSibling;c&&s.unshift(c)}this.snapshot=new Ft(s),this.selection=St(0,n,a)}return He(e,[{key:"apply",value:function(e){var t=this.snapshot,n=this.selection;t.apply(),e.moveTo(n.anchor.path,n.anchor.offset)}}]),e}();function Dt(){}var Lt=function e(t,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};We(this,e),this.__call__=function(){r.fn(),r.preventFurtherCalls()},this.preventFurtherCalls=function(){r.fn=Dt},this.resume=function(e){r.cancel(),e?(r.mode="timeout",r.timeoutId=r.window.setTimeout(r.__call__,e)):(r.mode="animationFrame",r.callbackId=r.window.requestAnimationFrame(r.__call__))},this.cancel=function(){"timeout"===r.mode?r.window.clearTimeout(r.timeoutId):r.window.cancelAnimationFrame(r.callbackId),r.onCancel&&r.onCancel()},this.__setTimeout__=function(e){null!=e&&r.window.setTimeout(function(){r.cancel(),r.preventFurtherCalls()},e)},this.fn=n,this.window=t,this.resume(),this.onCancel=o.onCancel,this.__setTimeout__(o.timeout)},It=w()("slate:android");It.reconcile=w()("slate:reconcile"),It("ANDROID_API_VERSION",{ANDROID_API_VERSION:ve});var Mt=0,zt=1;function Jt(){var e=Mt,t=new window.Set,n=null,r=null,o=null,a=null,i=!1,s=null;function c(e,n,r){var o=r.from;It.reconcile({from:o});var a=e.getSelection(),i=St(0,n,a);t.forEach(function(e){Bt(0,n,e)}),n.select(i),t.clear()}return{onBeforeInput:function(t,o,c){var u=!t.nativeEvent;It("onBeforeInput",{isNative:u,event:t,status:e,e:be()(t,["data","inputType","isComposing","nativeEvent"])});var l,d=E()(t.target);if(i)return t.preventDefault(),void(i=!1);switch(ve){case 25:break;case 26:case 27:if(a&&(a.cancel(),r.resume()),u){if("insertParagraph"===t.inputType||"insertLineBreak"===t.inputType){It("onBeforeInput:enter:native",{});var f=d.getSelection(),v=St(0,o,f);i=!0,t.preventDefault(),o.moveTo(v.anchor.path,v.anchor.offset),o.splitBlock()}}else{if(function(e,t){if(!Array.isArray(t))throw new Error("chars must be an array of one character strings");if(null==e)return!1;var n=e[e.length-1];return t.includes(n)}(t.data,["."]))return It("onBeforeInput:period"),r.cancel(),void(s="period");null!=(l=t.data)&&10===l[l.length-1].charCodeAt(0)&&(r&&r.cancel(),d.requestAnimationFrame(function(){It("onBeforeInput:enter:react",{}),n.apply(o),o.splitBlock()}))}break;case 28:a&&(a.cancel(),r.resume());break;default:e!==zt&&c()}},onCompositionEnd:function(o,a,i){It("onCompositionEnd",{event:o});var u=E()(o.target),l=u.getSelection().anchorNode;switch(ve){case 26:case 27:n=new Rt(u,a),e=zt}s="reconcile",t.add(l),r=new Lt(u,function(){e=Mt,c(u,a,{from:"onCompositionEnd:reconciler"}),s=null})},onCompositionStart:function(n,r,o){It("onCompositionStart",{event:n}),e=zt,t.clear()},onCompositionUpdate:function(e,t,n){It("onCompositionUpdate",{event:e})},onInput:function(n,i,u){switch(It("onInput",{event:n,status:e,e:be()(n,["data","nativeEvent","inputType","isComposing"])}),ve){case 24:case 25:break;case 26:case 27:case 28:var l=n.nativeEvent;if(28===ve&&"insertText"===l.inputType&&" "===l.data)return r&&r.cancel(),a&&a.cancel(),void c(window,i,{from:"onInput:space"});if((26===ve||27===ve)&&"period"===s){It("onInput:period:abort");var d=window.getSelection().anchorNode;return void t.add(d)}if("deleteContentBackward"===l.inputType){It("onInput:delete",{keyDownSnapshot:o});var f=E()(n.target);return r&&r.cancel(),a&&a.cancel(),void(a=new Lt(f,function(){It("onInput:delete:callback",{keyDownSnapshot:o}),o.apply(i),i.deleteBackward(),a=null},{onCancel:function(){a=null}}))}if(e===zt){var v=window.getSelection().anchorNode;return void t.add(v)}if(28===ve){It("onInput:fallback");var h=window.getSelection().anchorNode;return t.add(h),void window.requestAnimationFrame(function(){It("onInput:fallback:callback"),c(window,i,{from:"onInput:fallback"})})}break;default:if(e===zt)return;u()}},onKeyDown:function(t,i,s){It("onKeyDown",{event:t,status:e,e:be()(t,["char","charCode","code","key","keyCode","keyIdentifier","keyLocation","location","nativeEvent","which"])});var u=E()(t.target);switch(ve){case 25:"Enter"===t.key&&s();break;case 26:case 27:if("Enter"===t.key){if(It("onKeyDown:enter",{}),a)a.cancel(),t.preventDefault(),u.requestAnimationFrame(function(){It("onKeyDown:enter:callback"),n.apply(i),i.splitBlock()});else{t.preventDefault();var l=u.getSelection(),d=St(0,i,l);i.moveTo(d.anchor.path,d.anchor.offset),i.splitBlock()}return}o=new Rt(u,i,{before:!0});break;case 28:if("Enter"===t.key)return It("onKeyDown:enter"),t.preventDefault(),r&&r.cancel(),a&&a.cancel(),void u.requestAnimationFrame(function(){c(u,i,{from:"onKeyDown:enter"}),i.splitBlock()});o=new Rt(u,i,{before:!0}),It("onKeyDown:snapshot",{keyDownSnapshot:o});break;default:e!==zt&&s()}},onSelect:function(t,n,r){switch(It("onSelect",{event:t,status:e}),ve){case 26:case 27:case 28:!function(e){var t=e.getSelection(),n=t.anchorNode,r=n.parentElement.dataset;if(r&&"n"===r.slateZeroWidth&&1===n.textContent.length&&0!==t.anchorOffset){var o=e.document.createRange();o.setStart(n,0),o.setEnd(n,0),t.removeAllRanges(),t.addRange(o)}}(E()(t.target))}}}}var Kt={FRAGMENT:"application/x-slate-fragment",HTML:"text/html",NODE:"application/x-slate-node",RICH:"text/rtf",TEXT:"text/plain"};function qt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;Object(T.a)(!1,"As of slate-react@0.22 the `findDOMNode(key)` helper is deprecated in favor of `editor.findDOMNode(path)`."),g.i.isNode(e)&&(e=e.key);var n=t.document.querySelector("["+Ue.KEY+'="'+e+'"]');if(!n)throw new Error('Unable to find a DOM node for "'+e+'". This is often because of forgetting to add `props.attributes` to a custom component.');return n}var Ut=Kt.FRAGMENT,Vt=Kt.HTML,Wt=Kt.TEXT;function Ht(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};Object(ge.a)(!g.n.isValue(t),"As of Slate 0.42.0, the `cloneFragment` utility takes an `editor` instead of a `value`.");var r=E()(e.target),o=r.getSelection(),a=t.value,i=a.document,s=a.fragment,c=a.selection,u=c.start,l=c.end,d=i.getClosestVoid(u.path,t),f=i.getClosestVoid(l.path,t);if(!o.isCollapsed||d){var v=we.serializeNode(s),h=o.getRangeAt(0),y=h.cloneContents(),p=y.childNodes[0];if(y.childNodes.forEach(function(e){e.textContent&&""!==e.textContent.trim()&&(p=e)}),f){var m=h.cloneRange(),k=qt(f,r);m.setEndAfter(k),y=m.cloneContents()}if(d&&(p=y.childNodes[0].childNodes[1].firstChild),[].slice.call(y.querySelectorAll(Ve.ZERO_WIDTH)).forEach(function(e){var t="n"===e.getAttribute(Ue.ZERO_WIDTH);e.textContent=t?"\n":""}),3===p.nodeType){var b=r.document.createElement("span");b.style.whiteSpace="pre",b.appendChild(p),y.appendChild(b),p=b}p.setAttribute(Ue.FRAGMENT,v);var A=g.n.create({document:s}),O=Ee.serialize(A),x=r.document.createElement("div");if(x.appendChild(y),e.clipboardData&&e.clipboardData.setData&&!ce)return e.preventDefault(),e.clipboardData.setData(Wt,O),e.clipboardData.setData(Ut,v),e.clipboardData.setData(Vt,x.innerHTML),void n();var w=e.target.closest(Ve.EDITOR);x.setAttribute("contenteditable",!0),x.style.position="absolute",x.style.left="-9999px",w.appendChild(x),o.selectAllChildren(x),r.requestAnimationFrame(function(){w.removeChild(x),gt(o),o.addRange(h),n()})}}var Yt=Kt.FRAGMENT,Gt=Kt.HTML,Xt=Kt.NODE,Zt=Kt.RICH,Qt=Kt.TEXT,$t=/ data-slate-fragment="([^\s"]+)"/;function en(e){!ce&&e.nativeEvent&&(e=e.nativeEvent);var t=e.dataTransfer||e.clipboardData,n=tn(t,Yt),r=tn(t,Xt),o=tn(t,Gt),a=tn(t,Zt),i=tn(t,Qt),s=void 0;if(!n&&o&&~o.indexOf(" "+Ue.FRAGMENT+'="')){var c=$t.exec(o),u=Qe(c,2),l=(u[0],u[1]);l&&(n=l)}if(i){var d=function(e){var t="SLATE-DATA-EMBED::";if(e.substring(0,t.length)!==t)return{TEXT:e};try{return JSON.parse(e.substring(t.length))}catch(pn){throw new Error("Unable to parse custom Slate drag event data.")}}(i);d[Yt]&&(n=d[Yt]),d[Xt]&&(r=d[Xt]),d[Qt]&&(i=d[Qt])}n&&(n=we.deserializeNode(n)),r&&(r=we.deserializeNode(r));try{t.items&&t.items.length?s=Array.from(t.items).map(function(e){return"file"===e.kind?e.getAsFile():null}).filter(function(e){return e}):t.files&&t.files.length&&(s=Array.from(t.files))}catch(pn){t.files&&t.files.length&&(s=Array.from(t.files))}var f={files:s,fragment:n,html:o,node:r,rich:a,text:i};return f.type=function(e){return e.fragment?"fragment":e.node?"node":e.rich&&e.html?"html":e.rich&&e.text?"text":e.files&&e.files.length?"files":e.html?"html":e.text?"text":"unknown"}(f),f}function tn(e,t){return e.types&&e.types.length?-1!==Array.from(e.types).indexOf(t)&&e.getData(t)||null:t===Qt&&e.getData("Text")||null}var nn=Kt.TEXT;function rn(e,t,n){var r=Kt[t.toUpperCase()];if(!r)throw new Error('Cannot set unknown transfer type "'+r+'".');e.nativeEvent&&(e=e.nativeEvent);var o=e.dataTransfer||e.clipboardData;try{o.setData(r,n),o.setData("text",o.getData("text"))}catch(pn){var a="SLATE-DATA-EMBED::",i=o.getData(nn),s={};if(i.substring(0,a.length)===a)try{s=JSON.parse(i.substring(a.length))}catch(u){throw new Error("Failed to parse Slate data from `DataTransfer` object.")}else s[nn]=i;s[r]=n;var c=""+a+JSON.stringify(s);o.setData(nn,c)}}var on=w()("slate:after");var an=w()("slate:before");function sn(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).plugins,t=void 0===e?[]:e,n=function(){var e=null,t=0,n=!1,r=!1,o=!1;return{onBeforeInput:function(e,t,n){var r=!!e.nativeEvent;t.readOnly||r&&he||(an("onBeforeInput",{event:e}),n())},onBlur:function(t,n,o){if(!r&&!n.readOnly){var a=t.relatedTarget,i=t.target,s=E()(i);if(e!==s.document.activeElement){if(a){var c=n.findDOMNode([]);if(a===c)return;if(a.hasAttribute(Ue.SPACER))return;var u=n.findNode(a);if(c.contains(a)&&u&&!n.isVoid(u))return}an("onBlur",{event:t}),o()}}},onClick:function(e,t,n){an("onClick",{event:e}),n()},onCompositionEnd:function(e,r,o){var a=t;window.requestAnimationFrame(function(){t>a||(n=!1)}),an("onCompositionEnd",{event:e}),o()},onCompositionStart:function(e,r,o){n=!0,t++,r.value.selection.isCollapsed||r.delete(),an("onCompositionStart",{event:e}),o()},onCopy:function(e,t,n){var o=E()(e.target);r=!0,o.requestAnimationFrame(function(){return r=!1}),an("onCopy",{event:e}),n()},onCut:function(e,t,n){if(!t.readOnly){var o=E()(e.target);r=!0,o.requestAnimationFrame(function(){return r=!1}),an("onCut",{event:e}),n()}},onDragEnd:function(e,t,n){o=!1,an("onDragEnd",{event:e}),n()},onDragEnter:function(e,t,n){an("onDragEnter",{event:e}),n()},onDragExit:function(e,t,n){an("onDragExit",{event:e}),n()},onDragLeave:function(e,t,n){an("onDragLeave",{event:e}),n()},onDragOver:function(e,t,n){var r=t.findNode(e.target);t.isVoid(r)&&e.preventDefault(),ce&&e.preventDefault(),o||(o=!0,ce||(e.nativeEvent.dataTransfer.dropEffect="move")),an("onDragOver",{event:e}),n()},onDragStart:function(e,t,n){o=!0,an("onDragStart",{event:e}),n()},onDrop:function(e,t,n){t.readOnly||(e.preventDefault(),an("onDrop",{event:e}),n())},onFocus:function(t,n,o){if(!r&&!n.readOnly){var a=n.findDOMNode([]),i=E()(t.target);e=i.document.activeElement,ie&&t.target!==a?a.focus():(an("onFocus",{event:t}),o())}},onInput:function(e,t,r){n||t.value.selection.isBlurred||(an("onInput",{event:e}),r())},onKeyDown:function(e,t,r){t.readOnly||(n?Re.isCompose(e)&&e.preventDefault():(!de&&(Re.isBold(e)||Re.isDeleteBackward(e)||Re.isDeleteForward(e)||Re.isDeleteLineBackward(e)||Re.isDeleteLineForward(e)||Re.isDeleteWordBackward(e)||Re.isDeleteWordForward(e)||Re.isItalic(e)||Re.isRedo(e)||Re.isSplitBlock(e)||Re.isTransposeCharacter(e)||Re.isUndo(e))&&e.preventDefault(),an("onKeyDown",{event:e}),r()))},onPaste:function(e,t,n){t.readOnly||(e.preventDefault(),an("onPaste",{event:e}),n())},onSelect:function(t,o,a){if(!r&&!n&&!o.readOnly){var i=E()(t.target);e=i.document.activeElement,an("onSelect",{event:t}),a()}}}}(),r=function(){var e=null,t=!1;return{onBeforeInput:function(e,t,n){var r=t.value;if(e.nativeEvent)return e.preventDefault(),t.insertText(e.data),n();var o=e.getTargetRanges(),a=Qe(o,1)[0];if(!a)return n();on("onBeforeInput",{event:e}),e.preventDefault();var i=r.document,s=r.selection,c=t.findRange(a);switch(e.inputType){case"deleteByDrag":case"deleteByCut":case"deleteContent":case"deleteContentBackward":case"deleteContentForward":t.deleteAtRange(c);break;case"deleteWordBackward":t.deleteWordBackwardAtRange(c);break;case"deleteWordForward":t.deleteWordForwardAtRange(c);break;case"deleteSoftLineBackward":case"deleteHardLineBackward":t.deleteLineBackwardAtRange(c);break;case"deleteSoftLineForward":case"deleteHardLineForward":t.deleteLineForwardAtRange(c);break;case"insertLineBreak":case"insertParagraph":i.hasVoidParent(s.start.path,t)?t.moveToStartOfNextText():t.splitBlockAtRange(c);break;case"insertFromYank":case"insertReplacementText":case"insertText":var u=null==e.data?e.dataTransfer.getData("text/plain"):e.data;if(null==u)break;t.insertTextAtRange(c,u,s.marks),s.marks&&r.document!==t.value.document&&t.select({marks:null})}n()},onBlur:function(e,t,n){on("onBlur",{event:e}),t.blur(),n()},onClick:function(e,t,n){if(t.readOnly)return n();var r=t.value.document,o=t.findPath(e.target);if(!o)return n();on("onClick",{event:e});var a=r.getNode(o),i=r.getAncestors(o);a&&(t.isVoid(a)||i.some(function(e){return t.isVoid(e)}))&&t.focus().moveToEndOfNode(a),n()},onCopy:function(e,t,n){on("onCopy",{event:e}),Ht(e,t),n()},onCut:function(e,t,n){on("onCut",{event:e}),Ht(e,t,function(){var e=t.value,n=e.document,r=e.selection,o=r.end,a=void 0;if(r.isCollapsed){var i=!0,s=!1,c=void 0;try{for(var u,l=n.ancestors(o.path)[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var d=u.value,f=Qe(d,2),v=f[0],h=f[1];if(t.isVoid(v)){a=h;break}}}catch(pn){s=!0,c=pn}finally{try{!i&&l.return&&l.return()}finally{if(s)throw c}}}a?t.removeNodeByKey(a):t.delete()}),n()},onDragEnd:function(t,n,r){on("onDragEnd",{event:t}),e=null,r()},onDragStart:function(t,n,r){on("onDragStart",{event:t}),e=!0;var o=n.value,a=o.document,i=n.findPath(t.target),s=a.getNode(i),c=a.getAncestors(i),u=s&&(n.isVoid(s)||c.some(function(e){return n.isVoid(e)})),l=o.blocks.some(function(e){return e===s});u&&!l&&n.moveToRangeOfNode(s);var d=n.value.fragment;rn(t,"fragment",we.serializeNode(d)),r()},onDrop:function(t,n,r){var o=n.value,a=o.document,i=o.selection,s=E()(t.target),c=n.findEventRange(t);if(!c)return r();on("onDrop",{event:t});var u=en(t),l=u.type,d=u.fragment,f=u.text;if(n.focus(),e&&i.end.offset<c.end.offset&&i.end.path.equals(c.end.path)&&(c=c.moveForward(i.start.path.equals(i.end.path)?0-i.end.offset+i.start.offset:0-i.end.offset)),e&&n.delete(),n.select(c),"text"===l||"html"===l){var v=c.anchor,h=a.hasVoidParent(v.path,n);if(h){for(var y=v.path,p=a.getNode(v.path);h;){var m=a.texts({path:y}),g=Qe(m,1)[0];if(!g)break;var k=Qe(g,2);p=k[0],y=k[1],h=a.hasVoidParent(y,n)}p&&n.moveToStartOfNode(p)}f&&f.split("\n").forEach(function(e,t){t>0&&n.splitBlock(),n.insertText(e)})}"fragment"===l&&n.insertFragment(d);var b=n.findDOMNode(c.focus.path);b&&b.dispatchEvent(new MouseEvent("mouseup",{view:s,bubbles:!0,cancelable:!0})),r()},onFocus:function(e,n,r){on("onFocus",{event:e}),!t||ce||ue?n.focus():n.deselect().focus(),r()},onInput:function(e,t,n){on("onInput");var r=E()(e.target),o=r.getSelection(),a=t.findSelection(o);a?t.select(a):t.blur(),Bt(0,t,o.anchorNode),n()},onKeyDown:function(e,t,n){on("onKeyDown",{event:e});var r=t.value,o=r.document,a=r.selection,i=a.start,s=o.hasVoidParent(i.path,t);if(Re.isSplitBlock(e)&&!de)return s?t.moveToStartOfNextText():t.splitBlock();if(Re.isDeleteBackward(e)&&!de)return t.deleteCharBackward();if(Re.isDeleteForward(e)&&!de)return t.deleteCharForward();if(Re.isDeleteLineBackward(e))return t.deleteLineBackward();if(Re.isDeleteLineForward(e))return t.deleteLineForward();if(Re.isDeleteWordBackward(e))return t.deleteWordBackward();if(Re.isDeleteWordForward(e))return t.deleteWordForward();if(Re.isRedo(e))return t.redo();if(Re.isUndo(e))return t.undo();if(Re.isMoveLineBackward(e))return e.preventDefault(),t.moveToStartOfBlock();if(Re.isMoveLineForward(e))return e.preventDefault(),t.moveToEndOfBlock();if(Re.isExtendLineBackward(e))return e.preventDefault(),t.moveFocusToStartOfBlock();if(Re.isExtendLineForward(e))return e.preventDefault(),t.moveFocusToEndOfBlock();if(Re.isMoveBackward(e))return e.preventDefault(),a.isCollapsed?t.moveBackward():t.moveToStart();if(Re.isMoveForward(e))return e.preventDefault(),a.isCollapsed?t.moveForward():t.moveToEnd();if(Re.isMoveWordBackward(e))return e.preventDefault(),t.moveWordBackward();if(Re.isMoveWordForward(e))return e.preventDefault(),t.moveWordForward();if(Re.isExtendBackward(e)){var c=o.getNode(i.path),u=o.texts({path:i.path,direction:"backward"}),l=Qe(u,1)[0],d=!1;if(l){var f=Qe(l,2)[1];d=o.hasVoidParent(f,t)}if(s||d||""===c.text)return e.preventDefault(),t.moveFocusBackward()}if(Re.isExtendForward(e)){var v=o.getNode(i.path),h=o.texts({path:i.path}),y=Qe(h,1)[0],p=!1;if(y){var m=Qe(y,2)[1];p=o.hasVoidParent(m,t)}if(s||p||""===v.text)return e.preventDefault(),t.moveFocusForward()}n()},onMouseDown:function(e,n,r){on("onMouseDown",{event:e}),t=!0,r()},onMouseUp:function(e,n,r){on("onMouseUp",{event:e}),t=!1,r()},onPaste:function(e,t,n){on("onPaste",{event:e});var r=t.value,o=en(e),a=o.type,i=o.fragment,s=o.text;if("fragment"===a&&t.insertFragment(i),"text"===a||"html"===a){if(!s)return n();var c=r.document,u=r.selection,l=r.startBlock;if(t.isVoid(l))return n();var d=l,f=c.getInsertMarksAtRange(u),v=Ee.deserialize(s,{defaultBlock:d,defaultMarks:f}).document;t.insertFragment(v)}n()},onSelect:function(e,n,r){on("onSelect",{event:e});var o=E()(e.target).getSelection(),a=n.findSelection(o);a?n.select(a):n.blur(),t=!1,r()}}}(),o=le?[Jt()]:[];return[].concat(o,[n],$e(t),[r])}function cn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.placeholder,n=void 0===t?"":t,r=e.plugins,o=void 0===r?[]:r,a={decorateNode:function(){return[]},renderAnnotation:function(e){var t=e.attributes,n=e.children;return y.a.createElement("span",t,n)},renderBlock:function(e){var t=e.attributes,n=e.children;return y.a.createElement("div",Ge({},t,{style:{position:"relative"}}),n)},renderDecoration:function(e){var t=e.attributes,n=e.children;return y.a.createElement("span",t,n)},renderDocument:function(e){return e.children},renderEditor:function(e){return e.children},renderInline:function(e){var t=e.attributes,n=e.children;return y.a.createElement("span",Ge({},t,{style:{position:"relative"}}),n)},renderMark:function(e){var t=e.attributes,n=e.children;return y.a.createElement("span",t,n)}},i=xt();return[sn({plugins:[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ot.reduce(function(t,n){return n in e&&(t[n]=e[n]),t},{})}(e)].concat($e(o))}),{commands:{restoreDOM:function(e){e.setState({contentKey:e.state.contentKey+1})}}},Je({placeholder:n,when:function(e,t){return"document"===t.object&&""===t.text&&1===t.nodes.size&&1===Array.from(t.texts()).length}}),a,i]}var un=w()("slate:editor"),ln=function(e){function t(){var e,n,r;We(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=Ze(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.state={value:r.props.defaultValue,contentKey:0},r.tmp={mounted:!1,change:null,resolves:0,updates:0,contentRef:y.a.createRef()},r.resolveController=Object(Ke.a)(function(){Object(T.a)(r.tmp.resolves<5||r.tmp.resolves!==r.tmp.updates,"A Slate <Editor> component is re-resolving the `plugins`, `schema`, `commands`, `queries` or `placeholder` prop on each update, which leads to poor performance. This is often due to passing in a new references for these props with each render by declaring them inline in your render function. Do not do this! Declare them outside your render function, or memoize them instead."),r.tmp.resolves++;var e=cn(Ge({},r.props,{value:r.props.value||r.state.value}));r.controller=new g.e({plugins:[e],onChange:function(e){r.tmp.mounted?r.handleChange(e):r.tmp.change=e}},{controller:r,construct:!1}),r.controller.run("onConstruct")}),Ze(r,n)}return Xe(t,e),He(t,[{key:"componentDidMount",value:function(){this.tmp.mounted=!0,this.tmp.updates++,this.props.autoFocus&&this.focus(),this.tmp.change&&(this.handleChange(this.tmp.change),this.tmp.change=null)}},{key:"componentDidUpdate",value:function(){this.tmp.updates++,this.tmp.change&&(this.handleChange(this.tmp.change),this.tmp.change=null)}},{key:"componentWillUnmount",value:function(){this.tmp.mounted=!1}},{key:"render",value:function(){var e=this;un("render",this);var t=this.props,n=t.commands,r=t.placeholder,o=t.plugins,a=t.queries,i=t.schema;this.resolveController(o,i,n,a,r);var s=this.props,c=s.options,u=s.readOnly,l=s.value,d=this.state.value,f=l||d,v=this.state.contentKey;this.controller.setReadOnly(u),this.controller.setValue(f,c);var h=this.props,p=h.autoCorrect,m=h.className,g=h.id,k=h.role,b=h.spellCheck,A=h.tabIndex,O=h.style,x=h.tagName,w=y.a.createElement(At,{ref:this.tmp.contentRef,autoCorrect:p,className:m,contentKey:v,editor:this,id:g,onEvent:function(t,n){return e.run(t,n)},readOnly:u,role:k,spellCheck:b,style:O,tabIndex:A,tagName:x});return this.controller.run("renderEditor",Ge({},this.props,{editor:this,children:w}))}},{key:"handleChange",value:function(e){var t=this.props.onChange;this.state.value&&this.setState({value:e.value}),t(e)}},{key:"applyOperation",value:function(){var e;return(e=this.controller).applyOperation.apply(e,arguments)}},{key:"command",value:function(){var e;return(e=this.controller).command.apply(e,arguments)}},{key:"hasCommand",value:function(){var e;return(e=this.controller).hasCommand.apply(e,arguments)}},{key:"hasQuery",value:function(){var e;return(e=this.controller).hasQuery.apply(e,arguments)}},{key:"normalize",value:function(){var e;return(e=this.controller).normalize.apply(e,arguments)}},{key:"query",value:function(){var e;return(e=this.controller).query.apply(e,arguments)}},{key:"registerCommand",value:function(){var e;return(e=this.controller).registerCommand.apply(e,arguments)}},{key:"registerQuery",value:function(){var e;return(e=this.controller).registerQuery.apply(e,arguments)}},{key:"run",value:function(){var e;return(e=this.controller).run.apply(e,arguments)}},{key:"withoutNormalizing",value:function(){var e;return(e=this.controller).withoutNormalizing.apply(e,arguments)}},{key:"call",value:function(){var e;return(e=this.controller).call.apply(e,arguments)}},{key:"change",value:function(){var e;return(e=this.controller).change.apply(e,arguments)}},{key:"onChange",value:function(){var e;return(e=this.controller).onChange.apply(e,arguments)}},{key:"applyOperations",value:function(){var e;return(e=this.controller).applyOperations.apply(e,arguments)}},{key:"setOperationFlag",value:function(){var e;return(e=this.controller).setOperationFlag.apply(e,arguments)}},{key:"getFlag",value:function(){var e;return(e=this.controller).getFlag.apply(e,arguments)}},{key:"unsetOperationFlag",value:function(){var e;return(e=this.controller).unsetOperationFlag.apply(e,arguments)}},{key:"withoutNormalization",value:function(){var e;return(e=this.controller).withoutNormalization.apply(e,arguments)}},{key:"operations",get:function(){return this.controller.operations}},{key:"readOnly",get:function(){return this.controller.readOnly}},{key:"value",get:function(){return this.controller.value}},{key:"editor",get:function(){return this.controller.editor}},{key:"schema",get:function(){Object(ge.a)(!1,"As of Slate 0.42, the `editor.schema` property no longer exists, and its functionality has been folded into the editor itself. Use the `editor` instead.")}},{key:"stack",get:function(){Object(ge.a)(!1,"As of Slate 0.42, the `editor.stack` property no longer exists, and its functionality has been folded into the editor itself. Use the `editor` instead.")}}]),t}(y.a.Component);ln.propTypes=Ge({autoCorrect:m.a.bool,autoFocus:m.a.bool,className:m.a.string,defaultValue:b.value,id:m.a.string,onChange:m.a.func,options:m.a.object,placeholder:m.a.any,plugins:m.a.array,readOnly:m.a.bool,role:m.a.string,schema:m.a.object,spellCheck:m.a.bool,style:m.a.object,tabIndex:m.a.number,value:b.value},qe.reduce(function(e,t){return e[t]=m.a.func,e},{})),ln.defaultProps={autoFocus:!1,autoCorrect:!0,onChange:function(){},options:{},placeholder:"",plugins:[],readOnly:!1,schema:{},spellCheck:!0};var dn=n(176),fn=n.n(dn),vn={cursor:"cursor"},hn=function(e,t,n){var r=e.children,a=e.annotation,i=e.attributes,s=a.type,c=a.data.toJS(),u=c.color,l=c.name;switch(s){case vn.cursor:return o.a.createElement("span",Object.assign({},i,{style:{backgroundColor:u}}),r,o.a.createElement("span",{style:{backgroundColor:u,paddingRight:"2px",position:"relative"}},o.a.createElement("span",{style:{position:"absolute",bottom:"100%",left:"100%",color:u,fontSize:"5px"}},l)));default:return n()}},yn=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).onChangeServer=function(e){var t=e.value;n.state.value?n.applyServerChange(e):n.setState({value:v.a.create(t)},function(){n.applyServerChange(e)})},n.applyServerChange=function(e){e.value;var t=e.operations,r=void 0===t?[]:t,o=e.annotations,a=void 0===o?[]:o,i=n.editor.value.document.key;n.syncEditor(function(){r.length&&n.editor.withoutSaving(function(){r.forEach(function(e){n.editor.applyOperation(e)})}),n.editor.value.annotations.forEach(function(e){e.type===vn.cursor&&n.editor.removeAnnotation(e)}),a.forEach(function(e){e.key!==n.socket.id&&(e.anchor.key=i,e.focus.key=i,n.editor.addAnnotation(Object(s.a)({},e,{type:vn.cursor})))})})},n.editorRef=function(e){return n.editor=e},n.syncEditor=function(e){n.setState({syncing:!0},e)},n.onChange=function(e){var t=n.state.syncing,r=e.value;t?n.setState({value:r,syncing:!1}):(n.setState({value:r}),n.emitChange(e))},n.state={value:null,syncing:!1},n.editor=null,n.socket=null,n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.socket=fn()(),console.log("Client socket connected: ",this.socket),this.socket.on("change",this.onChangeServer)}},{key:"emitChange",value:function(e){var t=e.operations,n=e.value;this.socket.emit("change",{operations:t,value:n.toJSON({preserveSelection:!0})})}},{key:"render",value:function(){var e=this.state.value;return o.a.createElement("div",{className:"Client"},e?o.a.createElement(ln,{value:e,onChange:this.onChange,ref:this.editorRef,renderAnnotation:hn,className:"Editor",placeholder:"Type something together ..."}):"Loading ...")}}]),t}(o.a.Component);i.a.render(o.a.createElement(yn,null),document.getElementById("root"))}},[[180,1,2]]]);
//# sourceMappingURL=main.dfe0ead1.chunk.js.map